---
title: 'Урок 4. Связи и коллекции записей, документооборот'
kbId: 5116
tags:
# Common tutorial_hr tags
  - BPMS
  - BPMN
  - HR-процессы
  - автоматизация
  - бизнес-аналитика
  - бизнес-процессы
  - внедрение BPMN
  - для бизнес-аналитиков
  - low-code
  - лоукод
  - обучение
  - ознакомительный курс
  - основы BPMS
  - платформа
  - практика
  - старт для аналитика
  - управление процессами
  - уроки
  - цифровизация
  # Lesson-specific tags:
  - атрибут типа «Документ»
  - атрибут типа «Запись»
  - взаимная связь
  - вакансии
  - кандидаты
  - создание записей на лету
  - документы кандидатов
  - форма
  - реестр данных
  - связанные шаблоны
  - связь 1:М
  - таблица на форме
  - типы документов
  - шаблон записи
hide: tags
---

# Урок 4. Связи и коллекции записей, документооборот {: #tutorial_hr_lesson_4 }

## Введение {: #tutorial_hr_lesson_4_intro }

В ходе этого урока вы научитесь расширять модель данных для процесса найма персонала: создавать связь «один ко многим» между шаблонами, использовать атрибут типа «**Документ**», настраивать представление таблицы для связанных записей и добавлять записи «на лету».

**Предусловия:** пройден _[урок 3 «Мой первый бизнес-процесс»][tutorial_hr_lesson_3]_.

**Расчётная продолжительность:** 55 мин.

!!! warning "Бизнес-логика"

    В рамках процесса найма персонала для каждого кандидата необходимо хранить и обрабатывать связанные документы (например, резюме, паспорт, тестовое задание).
    
    Для этого расширим модель данных с использованием связей между шаблонами записей: кандидат может предоставить несколько документов, и каждый документ имеет определённый тип.

    _HR-менеджер_ должен иметь возможность:
    
    - добавлять и просматривать документы, связанные с кандидатом;
    - указывать тип документа из справочника;
    - создавать новые типы документов и вакансии в текущей форме, то есть не покидая карточку кандидата.

    Такая организация данных обеспечит прозрачность документооборота, ускорит работу с кандидатами и позволит гибко настраивать бизнес-процесс под реальные потребности компании.

{% include-markdown ".snippets/tutorial_version_notice.md" %}

## Темы, навыки и задания урока {: #tutorial_hr_lesson_4_taxonomy }

**Темы**

- Связи «один ко многим» (коллекции записей)
- Использование справочников для классификации данных
- Обработка файлов
- Атрибут типа «**Документ**»
- Создание записей «на лету»
- Настройка табличного представления для связанных записей
- Настройка областей кнопок
- Настройка требования обязательного ввода данных
- Организация документооборота

**Навыки**

- Устанавливать связи между шаблонами
- Настраивать обработку файлов
- Создавать и использовать атрибуты типа «**Документ**»
- Добавлять записи в связанные шаблоны «на лету»
- Настраивать контроль ввода данных пользователем
- Настраивать области кнопок

**Задания**

- Организовать хранение и обработку документов кандидатов в рамках процесса найма.
- Настроить связи между данными для обеспечения документооборота.
- Настроить таблицу на форме с записями из связанного шаблона.
- Реализовать возможность добавления и просмотра связанных документов непосредственно с формы кандидата.
- Обеспечить гибкость бизнес-процесса за счёт создания новых типов документов и вакансий «на лету».
- Настроить формы и представления для эффективной работы HR-менеджера с документами и кандидатами.

## Определения {: #tutorial_hr_lesson_4_definitions }

- **Атрибут типа «Документ»** — поле для хранения файлов (резюме, результаты тестирования и др.).
- **Атрибут типа «Запись»** — поле для связи с другим шаблоном записи (например, Документы кандидата).
- **Связь «один ко многим»** — один объект (кандидат) связан с несколькими объектами (документами).
- **Взаимная связь** — двусторонняя связь между шаблонами записей.
- **Создание записей «на лету»** — добавление новых связанных записей прямо из формы.

## Настройка справочника типов документов {: #tutorial_hr_lesson_4_document_types }
Чтобы _HR-менеджер_ мог указать тип документов в записи кандидата, добавим справочник типов документов.

Для этого создадим **шаблон записи** _«Типы документов»_, настроим форму типа документа, список типов документов и заполним справочник данными.

### Создание шаблона записи «Типы документов» {: #tutorial_hr_lesson_4_create_document_types_template }

1. Перейдите в раздел «**Шаблоны**» приложения _«Управление персоналом»_.
2. Создайте **шаблон записи** _«Типы документов»_.
3. Откройте шаблон и перейдите на вкладку «**Атрибуты**».
4. Создайте текстовый атрибут _«Тип документа»_.
5. В свойствах атрибута установите флажок «**Использовать как заголовок записей**».
6. Поместите атрибут _«Тип документа»_ на форму _«Типы документов — Основная форма»_.
7. Сохраните форму.

_![Макет формы шаблона записи «Типы документов»](img/lesson_4_document_type_form.png)_

### Заполнение справочника «Типы документов» {: #tutorial_hr_lesson_4_fill_document_types }

Чтобы указывать типы документов кандидатов в процессе найма, заполним справочник типов документов.

1. Откройте список записей шаблона _«Типы документов»_.
2. В списке нажмите кнопку «**Создать**».
3. Отобразится форма для заполнения типа документа.
4. В поле _«Тип документа»_ укажите значение _«Резюме»_.
5. Сохраните запись.
6. Нажмите ссылку _«Типы документов»_ над формой, чтобы вернуться к списку записей.
7. Аналогичным образом создайте ещё два типа документов — _«Паспорт»_ и _«Тестовое задание»_.

## Создание шаблона записи «Документы кандидатов» {: #tutorial_hr_lesson_4_create_documents_template }

Для хранения документов кандидатов создадим отдельный реестр и свяжем его со справочником _«Типы документов»_.

1. Перейдите в раздел «**Шаблоны**» приложения _«Управление персоналом»_.
2. Создайте **шаблон записи** _«Документы кандидатов»_.
3. Откройте шаблон и перейдите на вкладку «**Атрибуты**».
4. Создайте атрибут типа «**Документ**» с названием _«Файл»_.
5. Создайте **текстовый** атрибут со следующими свойствами:

    - **Название:** _«Наименование»_
    - **Использовать как заголовок записей:** флажок установлен

6. Создайте атрибут типа «**Запись**» со следующими свойствами:

    - **Название:** _Тип_
    - **Связанный шаблон:** _Типы документов_

## Создание атрибута, связывающего два шаблона записей {: #tutorial_hr_lesson_4_add_1m_link }

!!! warning "Бизнес-логика"

    Чтобы _HR-менеджер_ мог добавлять документы и сразу привязывать их к определённому кандидату, свяжем соответствующие шаблоны между собой.

{% include-markdown ".snippets/tutorial_attribute_record_admonition.md" %}

1. Откройте шаблон записи _«Кандидаты»_.
2. Перейдите на вкладку **Атрибуты**.
3. Создайте атрибут типа «**Запись**» со следующими свойствами:

    - **Название:** _«Документы»_
    - **Связанный шаблон:** _«Документы кандидатов»_
    - **Хранить несколько значений:** флажок установлен

    _![Свойства атрибута «Документы»](img/lesson_4_attribute_multiple.png)_

## Настройка таблицы на форме для отображения документов кандидата {: #tutorial_hr_lesson_4_table_on_form }

Настроим отображение связанных с кандидатом документов в таблице на форме.

{% include-markdown ".snippets/tutorial_table_on_form_admonition.md" %}

1. Перейдите на вкладку «**Формы**» шаблона записи _«Кандидаты»_.
2. Откройте форму _«Кандидаты — Основная форма»_.
3. Перетащите атрибут _«Документы»_ на основную форму кандидата.
4. Для поля _«Документы»_ выберите **представление** «**Таблица**» с помощью панели свойств.
5. Раскройте атрибут _«Документы»_ на панели элементов.
6. Перетащите в таблицу на форме атрибуты _«Наименование»_, _«Тип»_ и _«Файл»_.
7. Атрибуты будут добавлены в качестве столбцов таблицы.

    _![Настройка атрибута «Документы» на форме](img/lesson_4_form_table.png)_

8. Выберите область кнопок таблицы.
9. В панели элементов отобразятся кнопки, доступные для таблицы.
10. Перетащите на область кнопок таблицы кнопки «**Создать**», «**Сохранить**» и «**Удалить**». Эти кнопки позволят добавлять и удалять документы, связанные с кандидатом.
11. Сохраните форму.

_![Настройка области кнопок атрибута «Документы» на форме](img/lesson_4_form_button_area.png)_

## Настройка добавления вакансий на форме кандидата {: #tutorial_hr_lesson_4_candidates_form }

Добавим возможность создания новых вакансий «на лету».
<!-- Странноватая бизнес-логика — добавлять вакансии с формы кандидата -->

1. Перейдите на вкладку «**Формы**» шаблона записи _«Кандидаты»_.
2. Откройте форму _«Кандидаты — Основная форма»_.
3. Выберите поле атрибута _«Вакансия»_.
4. С помощью панели свойств поля установите флажок «**Создание записей**».

    !!! note "Примечание"

        Установив флажок «**Создание записей**» в свойствах раскрывающегося списка, мы даём пользователю возможность создавать записи с помощью формы связанного шаблона.

5. В свойстве «**Форма**» выберите _«Вакансии — Основная форма»_.
6. Сохраните форму.

_![Настройка атрибута «Вакансия» на форме](img/lesson_4_form_create_new_record.png)_

## Тестирование {: #tutorial_hr_lesson_4_testing }

Перед тестированием усовершенствованного приложения, убедитесь, что все необходимые атрибуты и связи между шаблонами настроены согласно инструкциям в уроке.

Теперь проверим, как работает добавление и отображение связанных документов кандидата, а также создание новых вакансий непосредственно с формы кандидата.

1. Откройте шаблон записи _«Кандидаты»_.
2. Нажмите кнопку «**Перейти к экземплярам**».
3. Откройте запись или создайте новую.
4. Нажмите кнопку «**Создать**» в области рядом с таблицей _«Документы»_.
5. Введите наглядное название документа в ячейку _«Наименование»_.
6. Выберите тип документа.
7. Прикрепите файл в ячейке _«Файл»_.
8. Нажмите кнопку «**Сохранить**».
9. Разверните список поля _«Вакансия»_.
10. Нажмите кнопку «**Создать**».
11. Введите название вакансии и нажмите кнопку «**ОК**».
12. Сохраните запись.

!!! example "Факультативное задание"

    Попробуйте расширить модель документооборота: добавьте новый тип документа (например, "Медицинская справка") и настройте для него отдельные правила отображения или обязательности на форме кандидата. 
    
    Поэкспериментируйте с настройкой фильтров или сортировки в таблице документов кандидата — например, чтобы сначала отображались наиболее важные или недавно добавленные документы.

## Итоги урока {: #tutorial_hr_lesson_4_summary }

В ходе этого урока вы научились устанавливать между шаблонами записей связи типа «один ко многим», создавать справочники, использовать атрибут типа «**Документ**», настраивать таблицы на форме для со связанными записями, настраивать области кнопок таблиц, добавлять записи «на лету» и настраивать формы задач для бизнес-процесса найма персонала.

В [следующем уроке][tutorial_hr_lesson_5] вы познакомитесь с вычисляемыми атрибутами,  и автоматизацией расчётов в системе, условным управлением потоками процесса и контролем ввода данных.

{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}

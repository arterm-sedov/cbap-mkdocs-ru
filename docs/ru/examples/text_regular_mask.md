---
kbId: 5089
title: 'Атрибут типа «Текст». Использование масок и контроль их заполнения'
tags:
    - текст
    - атрибут типа «текст»
    - регулярное выражение
    - маска
    - проверка маски
hide: tags
---

# Атрибут типа «Текст». Использование масок и контроль их заполнения

## Введение

Текстовый атрибут может содержать неограниченное количество символов. При этом **{{ productName }}** позволяет регулировать и контролировать заполнение атрибутов по определённым принципам.

Для регулирования заполнения текстового атрибута определёнными символами можно использовать готовые маски или задать свою собственную. В **{{ productName }}** имеются следующие готовые маски:

- Телефон (РФ);
- Адрес эл. почты;
- Паспорт (РФ);
- Индекс (РФ);
- ИНН юрлица;
- ИНН физлица;
- ОГРН;
- Регистрационный номер ТС (РФ).

Чтобы контролировать значение атрибута, настраивается его [проверка по выражению][attribute_common_properties].

Маска задаётся с помощью регулярного выражения. При проверке выражения так же можно использовать регулярные выражения.

Здесь представлены настройки по использованию готовых масок и создания своей собственной, а также контроля заполнения атрибута по маске.

!!! tip "Синтаксис регулярного выражения"

    - `[а-яА-яеЁ]` — все буквы русского алфавита.
    - `[0-9]+` или `\d+` — набор из одной или более цифр. Диапазон `[0-9]` и выражение `\d` обозначают любую цифру от 0 до 9, а плюс + обозначает, что таких цифр может быть одна или более.
    - `{5}` — последовательность из 5 символов определённого типа.
    - `[А-ЯЁ]{3}` — последовательность из 3 заглавных букв русского алфавита.
    - `^` — начало строки.
    - `$` — конец строки.
    - Ознакомиться с принципами составления регулярных выражений и поэкспериментировать с ними можно на следующем сайте: <https://regex101.com/>

    !!! example "Пример"

        - Дано регулярное выражение:

            ``` cs
            "^\d{5}$"
            ```

        - `12345` — **удовлетворяет** регулярному выражению.
        - ` 12345 ` и `1абв2` — **не удовлетворяют** регулярному выражению.

## Исходные данные

Имеется шаблон «**Контрагенты**», в котором хранятся реквизиты контрагентов.

## Прикладная задача

Требуется настроить текстовые атрибуты _«ИНН»_ и _«КПП»_ и контролировать их заполнение. Если введено неверное количество символов, то должно появляться сообщение об ошибке.

## Настройка маски для атрибутов типа «Текст»

1. Создайте атрибут _«ИНН»_ со следующими свойствами:

    - **Тип данных: текст**
    - **Формат отображения: ИНН юрлица**

2. На вкладке «**Проверка выражения**» введите следующие данные:

    - **Проверка значения по выражению: формула**

        ``` cs
        MATCHES($INN, "^[0-9]{10}$")
        ```

    - **Сообщение при отрицательном результате проверки: формула**

        ``` cs
        "Неверный ИНН"
        ```

3. Создайте атрибут _«КПП»_ со следующими свойствами:

    - **Тип данных: текст**
    - **Формат отображения: особая маска**
    - **Регулярное выражение маски:** `\d{9}`

4. На вкладке «**Проверка выражения**» введите следующую формулу:

    - **Проверка значения по выражению: формула**

        ``` cs
        MATCHES($KPP, "^\d{9}$")
        ```

    - **Сообщение при отрицательном результате проверки: формула**

        ``` cs
        "Неверный КПП"
        ```

## Тестирование

1. Создайте новую запись в шаблоне _«Контрагенты»_.
2. Ничего не заполняйте.
3. Нажмите кнопку «**Сохранить**».
4. Отобразится сообщение «**Имеются ошибки**».
5. Нажмите кнопку «**Показать детали**» в сообщении об ошибке или значок <i class="fa-light  fa-exclamation-triangle"></i>.
6. Отобразится «**Результат проверки**» и список сообщений об ошибках.
7. Введите корректные _ИНН_ и _КПП_.
8. Нажмите кнопку «**Сохранить**».
9. Запись будет сохранена.

<div class="relatedTopics" markdown="block">

--8<-- "related_topics_heading.md"

- _[Атрибут типа «Текст»][attribute_text]_
- _[Общие свойства атрибутов ][attribute_common_properties]_
- _[Список функций языка формул Comindware][formula_function_list]_

</div>

{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}

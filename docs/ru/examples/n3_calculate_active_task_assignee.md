---
title: 'Вычисление исполнителя активной задачи'
kbTitle: 'Вычисление исполнителя текущей активной задачи'
tags:
    - процессы
    - задачи
    - N3
    - тройки
    - тройка
    - исполнитель
    - вычисление
    - аккаунты
hide:
    - tags
kbId: 4950
---

# Вычисление исполнителя активной задачи с помощью N3 {: #n3_calculate_active_task_assignee }

## Введение {: #n3_calculate_active_task_assignee_intro }

В **{{ productName }}** можно вычислить исполнителя активной задачи по записи, связанной с экземпляром бизнес-процесса. Это может быть полезно для отображения информации об ответственном за задачу или в иных вычислениях.

## Прикладная задача {: #n3_calculate_active_task_assignee_use_case }

Требуется определить исполнителя активной задачи для записи, связанной с бизнес-процессом.

Задаче может быть назначен как один исполнитель, так список возможных исполнителей.

Список исполнителей задачи необходимо поместить в атрибут типа «**Аккаунт**».

## Исходные данные {: #n3_calculate_active_task_assignee_initial_data }

Имеется шаблон процесса _«Оформление заявок»_, связанный с шаблоном записи _«Заявки»_.

В шаблоне _«Оформление заявок»_ имеются пользовательские задачи, которым назначены различные исполнители.

## Настройка вычисления {: #n3_calculate_active_task_assignee_configure }

1. В шаблоне _«Заявки»_ создайте атрибут _«Ответственные»_ типа «**Аккаунт**».
2. В свойствах атрибута установите флажки «**Хранить несколько значений**» и «**Вычислять автоматически**».
3. Введите следующее **вычисляемое значение** на языке **N3**:

    ``` turtle
    # Импортируем функции для работы 
    # с логикой, задачами и статусами задач.
    @prefix cmw: <http://comindware.com/logics#>.
    @prefix task: <http://comindware.com/ontology/task#>.
    @prefix taskStatus: <http://comindware.com/ontology/taskStatus#>.
    {
        # Находим задачу, связанную с текущей записью
        ?task task:objectId ?item.
        # Проверяем, является ли задача активной
        ?task cmw:taskStatus taskStatus:inProgress.
        # Определяем исполнителя задачи
        or {
            # Возвращаем фактического исполнителя
            ?task cmw:assignee ?value.
        }
        or {
            # Возвращаем список возможных исполнителей
            ?task cmw:possibleAssignee ?value.
        }
    }
    ```

4. Поместите атрибут _«Ответственные»_ на форму шаблона _«Заявки»_.

## Тестирование {: #n3_calculate_active_task_assignee_test }

1. Запустите процесс _«Оформление заявок»_.
2. Откройте _заявку_, созданную при запуске процесса.
3. В поле _«Ответственные»_ должен отображаться список исполнителей текущей задачи по _заявке_.

<div class="relatedTopics" markdown="block">

--8<-- "related_topics_heading.md"

- [Вычисление пользователей с активными задачами][n3_calculate_active_task_accounts]
- [Периодические напоминания об открытых задачах][n3_periodic_task_notifications]
- [Уведомления. Типы, назначение, настройка, использование][notification_types]

</div>

{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}

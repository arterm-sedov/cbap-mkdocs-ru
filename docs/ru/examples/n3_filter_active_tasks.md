---
title: 'Фильтр списка по активным задачам'
kbTitle: 'Фильтр списка по активным задачам текущего пользователя: по всем процессам, по конкретному процессу'
tags:
    - процессы
    - задачи
    - N3
    - фильтры
    - таблицы
hide:
    - tags
kbId: 4935
---

# Фильтр списка по активным задачам {: #n3_filter_active_tasks }

## Введение {: #n3_filter_active_tasks_intro }

В **{{ productName }}** можно настроить фильтрацию списка задач, чтобы отображать только активные задачи текущего пользователя. Это может быть полезно для создания персональных представлений задач или для мониторинга текущих задач пользователя.

## Прикладная задача {: #n3_filter_active_tasks_use_case .pageBreakBefore }

Требуется настроить фильтрацию списка задач для отображения:

- [всех активных задач](#n3_filter_active_tasks_all) текущего пользователя;
- активных задач текущего пользователя [в рамках конкретного процесса](#n3_filter_active_tasks_process).

## Настройка фильтра {: #n3_filter_active_tasks_configure .pageBreakBefore }

### Фильтр по всем активным задачам {: #n3_filter_active_tasks_all }

Чтобы получить в таблице список всех активных задач, где текущий пользователь является исполнителем (а также возможным исполнителем, если задача назначена на нескольких пользователей), используйте следующее выражение в [**системном фильтре таблицы**][table_configure_template]:

``` turtle
# Импортируем функции для работы с логикой, задачами и статусами задач
@prefix cmw: <http://comindware.com/logics#>.
@prefix taskStatus: <http://comindware.com/ontology/taskStatus#>.
{
    # Получаем аккаунт текущего пользователя из контекста безопасности
    cmw:securityContext cmw:currentUser ?currentUser.
    # Помещаем массив всех задач в переменную ?item
    # Если выражение используется в таблице задач процесса, 
    # то эта строка не требуется, т. к. контекст уже будет задачей
    ?item a cmw:UserTask.
    # Начинаем цикл по массиву задач
    # Проверяем, является ли текущий пользователь
    # фактическим или возможным исполнителем задачи
    or {
        # Проверяем, назначена ли задача на текущего пользователя
        ?item cmw:assignee ?currentUser.
    }
    or {
        # Проверяем, является ли пользователь возможным исполнителем
        ?item cmw:possibleAssignee ?currentUser.
    }.
    # Проверяем, является ли задача активной
    # Если завершенных задач, например, в 1000 раз больше активных,
    # то эту строку можно перенести к выбору задач процесса
    # для повышения производительности
    ?item cmw:taskStatus taskStatus:inProgress.
}
```

### Фильтр по задачам конкретного процесса {: #n3_filter_active_tasks_process .pageBreakBefore }

Чтобы получить в таблице список всех активных задач, где текущий пользователь является исполнителем (а также возможным исполнителем, если задача назначена на нескольких пользователей) по конкретному процессу, используйте следующее выражение в [**системном фильтре таблицы**][table_configure_template]:

``` turtle
# Импортируем функции для работы
# с логикой, задачами, статусами задач и объектами
@prefix cmw: <http://comindware.com/logics#>.
@prefix taskStatus: <http://comindware.com/ontology/taskStatus#>.
@prefix object: <http://comindware.com/ontology/object#>.
{
    # Получаем шаблон процесса по его системному имени
    ?process object:alias "system_name_of_the_process_template".
    # Получаем аккаунт текущего пользователя из контекста безопасности
    cmw:securityContext cmw:currentUser ?currentUser.
    # Помещаем массив всех задач в переменную ?item
    # Если выражение используется в таблице задач процесса, 
    # то эта строка не требуется, т. к. контекст уже будет задачей
    ?item a cmw:UserTask.
    # Начинаем цикл по массиву задач
    # Фильтруем задачи по конкретному процессу
    ?item cmw:container ?process.
    # Проверяем, является ли текущий пользователь
    # фактическим или возможным исполнителем задачи
    or {
        # Проверяем, назначена ли задача на текущего пользователя
        ?item cmw:assignee ?currentUser.
    }
    or {
        # Проверяем, является ли пользователь возможным исполнителем
        ?item cmw:possibleAssignee ?currentUser.
    }.
    # Проверяем, является ли задача активной
    # Если завершенных задач, например, в 1000 раз больше активных,
    # то эту строку можно перенести к выбору задач процесса
    # для повышения производительности
    ?item cmw:taskStatus taskStatus:inProgress.
}
```

## Тестирование {: #n3_filter_active_tasks_test }

1. Создайте таблицу для отображения задач.
2. Настройте системный фильтр таблицы, используя одно из приведенных выше выражений N3.
3. Проверьте, что в таблице отображаются только активные задачи текущего пользователя.

<div class="relatedTopics" markdown="block">

--8<-- "related_topics_heading.md"

- [Вычисление пользователей с активными задачами][n3_calculate_active_task_accounts]
- [Вычисление исполнителя активной задачи][n3_calculate_active_task_assignee]
- [Периодические напоминания об открытых задачах][n3_periodic_task_notifications]

</div>

{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}

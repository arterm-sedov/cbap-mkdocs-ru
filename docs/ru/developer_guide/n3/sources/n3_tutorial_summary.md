`n3_tutorial.md` представляет собой учебник по языку **Notation 3 (N3)**, предназначенный для обучения пользователей ориентироваться в уже написанных выражениях и самостоятельно создавать запросы средней сложности. Курс охватывает базовые принципы работы триплетов и интерпретатора N3, предоставляя реальные примеры использования и задания для самостоятельной работы.

Ниже представлен анализ ключевых аспектов, освещенных в учебнике:

* **Назначение N3 в {{ productName }}**
  * **Два типа синтаксиса запросов**: В {{ productName }} предусмотрены два типа синтаксиса запросов:
        1. **Формулы**: Фирменный язык выражений {{ companyName }}, похожий на формулы Excel. Он прост для восприятия, является надстройкой над N3 и достаточен для базовой настройки системы. Примеры использования формул включают выборку данных, подсчет объектов, математические операции и преобразования строк.
        2. **Notation 3 (N3, триплеты)**: Более сложный для чтения и написания, но **более функциональный и основополагающий язык**. Его стандарт определен международным консорциумом W3C.
  * **Цели использования N3**: N3 предназначен для **продвинутого использования {{ productName }}**, предоставляя **доступ ко всем созданным и системным атрибутам**, в отличие от формул, которые показывают только наиболее часто используемые атрибуты. Он также предлагает **расширенные возможности работы с данными**, включая дополнительные математические функции, функции для работы со списками, приведения данных к одному типу и расчеты времени.

* **Хранение данных в {{ productName }}**
  * **Графовая база данных на основе RDF**: {{ productName }} использует графовую базу данных, основанную на модели RDF (Resource Description Framework).
  * **Основной синтаксический элемент — Триплет**: Идея графовой модели заключается в описании любой сущности (объекта, свойства, значения) с помощью простых выражений, которые называются свойствами и их значениями. **Основным синтаксическим элементом N3 является триплет**, состоящий из трех связанных сущностей: **Субъект — Предикат — Объект**.
  * **Аналогия с предложением**: Триплет можно соотнести с простым предложением вида: *Подлежащее — Сказуемое — Дополнение*. Например, утверждение "Книга написана Пушкиным" в RDF-терминологии будет: Субъект — Книга, Предикат — написана, Объект — Пушкин.
  * **Структура данных в {{ productName }}**: По этому же принципу описывается структура данных в шаблонах записей:
    * **Субъект** — запись в шаблоне записи.
    * **Предикат** — атрибут записи.
    * **Объект** — значение атрибута.
    * Пример: Записи в шаблоне "Книги" с атрибутами "Название" и "Автор" хранятся в виде триплетов.
  * **Хранение метаинформации**: Вся метаинформация (описания шаблонов, форм, объектов) и атрибуты окружения (текущий пользователь, время, контекст) также хранятся аналогичным образом.
  * **Преимущества использования триплетов**: Такая структура обеспечивает единообразие и простоту доступа к данным. Ключевые преимущества:
        1. **Простота понимания модели данных**.
        2. **Мгновенное добавление новых шаблонов записи и атрибутов**.
        3. **Неограниченная ширина и глубина связей между сущностями**.
        4. **Простота и неограниченность навигации по связям**.

* **Базовые принципы N3-запросов (Урок 1)**
  * **Тело запроса**: Состоит из триплетов вида Субъект – Предикат – Объект.
  * **Основные правила синтаксиса**:
    * Каждый триплет начинается с новой строки.
    * Переменные объявляются с префиксом `?` (например, `?variable`).
    * Весь запрос заключается в фигурные скобки (`{}`).
    * В конце каждого триплета ставится точка (`.`).
    * Интерпретатор **учитывает регистр символов** (`?variable` и `?Variable` — разные переменные).
  * **Переменные**: Именованные хранилища данных, обозначаемые символом `?`. Их имена должны отражать суть хранимых данных.
  * **Входные и выходные параметры (`?item` и `?value`)**:
    * **`?item`**: Входной параметр запроса, значение которого определяется контекстом выполнения (например, ID текущей записи).
    * **`?value`**: Выходной параметр, в который помещается результат запроса. **Тип данных в `?value` должен совпадать с типом данных атрибута**, куда записывается результат.

* **Расширенные возможности N3-запросов (Урок 2)**
  * **Библиотеки пространств имён (префиксы)**: Подключаемые модули (области), содержащие знания об объектах, функциях и правилах. Позволяют обращаться к системным и прикладным атрибутам и их значениям, а также получать доступ к функциям (например, по работе с датами, списками, числами).
    * Пример: `http://comindware.com/ontology/object#` и функция `object:findProperty` базовые и позволяют находить URI атрибутов по их системному имени.
  * **Присвоение переменных**: Интерпретатор N3 может присваивать значения переменным, если одна из сущностей триплета неизвестна. Существуют три основных варианта присвоения:
        1. Субъект и предикат определены, искомое значение — объект.
        2. Объект и предикат определены, искомое значение — субъект.
        3. Все три части известны (точное совпадение), происходит проверка на полное совпадение.
  * **Системные атрибуты**: Помимо прикладных (созданных вручную), у каждого объекта в платформе есть системные атрибуты, которые не всегда видны в интерфейсе, но существуют и автоматически заполняются системой. Доступ к ним осуществляется через соответствующие библиотеки пространств имён.
  * **Встроенные предикаты**: Сложные предикаты, содержащие функции для работы со строками, датами, математические функции и т.д..
  * **Конструкция `from {}`**: Используется для преобразования типов данных. Например, для математических функций, которым требуется `list` на вход, `from {}` позволяет собрать URI значений в список. Структура: `from {триплеты} select ?переменная -> ?лист`.

* **Управление потоком выполнения и логические операции (Урок 3)**
  * **Итератор**: Перечислитель, поддерживающий перебор по группам ссылок (коллекции, ссылки со множественными значениями). Итератор в случайном порядке берет объект из коллекции, проверяет условия в последующих триплетах, и если результат `false`, выбрасывает запись и переходит к следующей. Важное примечание: итератор **работает всегда** и возвращается к верхним строкам для проверки непроверенных значений.
  * **`once {}`**: Если точно известно, что итератор должен пройти только один раз (нет коллекций или множественных значений), триплеты можно обернуть в `once {}` для ускорения запроса.
  * **Логическое И (конъюнкция)**: В N3 между строками триплетов **по умолчанию используется конъюнкция** (логическое И). Если одно из условий `false`, интерпретатор останавливается. Проверка на пустоту атрибута осуществляется синтаксисом `not { ?item ?attribute . }`.
  * **Логическое ИЛИ (`or {}`)**: Используется, когда нужно вывести `true`, если хотя бы одно из условий истинно. Синтаксис: `or {триплеты} or {триплеты}.` В конце перечислений `or` обязательно ставится точка.
  * **Условный оператор `if`**: Позволяет проверить условие и выполнить действие в зависимости от результата. Синтаксис: `if {условие} then {выполняется, если условие - true} else {выполняется, если условие - false}`.
  * **`assert:union true`**: Часто используемая функция для объединения нескольких результатов выполнения запроса в одну переменную. Используется с одноименной переменной.

Учебник N3 подробно объясняет основные принципы N3, его применение в {{ productName }}, структуру данных, синтаксис запросов, работу с переменными, библиотеками, системными атрибутами, а также управление потоком выполнения с помощью итератора и логических операций.

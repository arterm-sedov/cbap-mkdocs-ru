---
title: 'Урок 4. Связи и коллекции записей, документооборот'
kbId: 5115
tags:
# Common tutorial_hr tags
  - BPMS
  - BPMN
  - HR-процессы
  - автоматизация
  - бизнес-аналитика
  - бизнес-процессы
  - внедрение BPMN
  - для бизнес-аналитиков
  - кандидаты
  - low-code
  - лоукод
  - обучение
  - ознакомительный курс
  - основы BPMS
  - платформа
  - практика
  - реестр данных
  - старт для аналитика
  - таблица
  - управление процессами
  - уроки
  - форма
  - цифровиза
  - шаблон записи
  # Lesson-specific tags:
  - связь 1:М
  - взаимная связь
  - атрибут nbgf «Документ»
  - создание записей на лету
  - связанные шаблоны
  - таблица на форме
---

# Урок 4. Связи и коллекции записей, документооборот {: #tutorial_hr_lesson_4 }

## Введение {: #tutorial_hr_lesson_4_intro }

В ходе этого урока вы научитесь расширять модель данных для процесса найма персонала: создавать связь «один ко многим» между шаблонами, использовать атрибут типа «**Документ**», настраивать представление таблицы для связанных записей и добавлять записи «на лету».

**Предусловия:** пройден _[урок 3 «Мой первый бизнес-процесс»][tutorial_hr_lesson_3]_.

**Расчётная продолжительность:** 55 мин.

{% include-markdown ".snippets/tutorial_version_notice.md" %}

## Темы, навыки и задания урока {: #tutorial_hr_lesson_4_taxonomy }

**Темы**

- Тип связи «один ко многим»
- Взаимная связь
- Атрибут типа «**Документ**»
- Создание записей «на лету»

**Навыки**

- Создавать и использовать атрибут типа «**Документ**»
- Добавлять записи «на лету»

**Задания**

- Создать шаблон записи для хранения
- Вернуться в настройку шаблона записи «Кандидаты», создать атрибут типа Запись (связанный шаблон – «Документы») с названием «Документы», хранить несколько значений, вынести на форму, выбрать представление – Таблица
- Создать шаблон записи «Типы документов», в нем атрибут типа Текст «Тип», чекбокс «Использовать как заголовок записей», вынести атрибут на форму
- В шаблоне записи «Документы кандидатов» создать атрибут Запись 1:1 «Тип», связь с шаблоном записи «Типы документов»
- Перейти в настройку формы пользовательской задачи на диаграмме процесса «Зафиксировать результаты тестирования» и вынести на нее основную форму шаблона записи «Кандидаты»
- Вынести в область по умолчанию атрибуты   Результат тестирования – Тестирование пройдено/ Тестирование не пройдено (логический)
- изменить доступ на «Требовать ввод»

## Определения {: #tutorial_hr_lesson_4_definitions }

- **Шаблон записи** — модель бизнес-сущности и хранилище данных (например, Кандидаты, Документы кандидатов).
- **Атрибут типа «Документ»** — поле для хранения файлов (резюме, результаты тестирования и др.).
- **Атрибут типа «Запись»** — поле для связи с другим шаблоном записи (например, Документы кандидата).
- **Связь «один ко многим»** — один объект (кандидат) связан с несколькими объектами (документами).
- **Взаимная связь** — двусторонняя связь между шаблонами записей.
- **Создание записей «на лету»** — добавление новых связанных записей прямо из формы.

## Создание шаблона записи «Типы документов»

1. Перейдите в раздел **Шаблоны** приложения _«Управление персоналом»_.
2. Создайте **шаблон записи** _«Типы документов»_.
3. Откройте шаблон и перейдите на вкладку **Атрибуты**.
4. Создайте текстовый атрибут _«Тип документа»_.
5. В свойствах атрибута установите флажок «**Использовать как заголовок записей**».
6. Добавьте созданный атрибут на форму _«Типы документов — Основная форма»_.
7. Сохраните форму.

_![Форма шаблона записи «Типы документов»](img/lesson_4_document_type_form.png)_

## Заполнение справочника «Типы документов»

1. Откройте список экземпляров записи шаблона _«Типы документов»_.
2. В списке записей _«Типы документов»_ нажмите кнопку «**Создать**».
3. Отобразится форма нового типа документа.
4. В поле _«Тип документа»_ укажите значение _«Резюме»_.
5. Сохраните запись.
6. Нажмите ссылку _«Типы документов»_ над формой, чтобы вернуться к списку записей.
7. Аналогичным образом создайте ещё два типа документов — _«Паспорт»_ и _«Тестовое задание»_.

## Создание шаблона записи «Документы кандидатов» {: #tutorial_hr_lesson_4_create_documents_template }

1. Перейдите в раздел **Шаблоны** приложения _«Управление персоналом»_.
2. Создайте **шаблон записи** _«Документы кандидатов»_.
3. Откройте шаблон и перейдите на вкладку **Атрибуты**.
4. Создайте атрибут типа «**Документ**» с названием _«Файл»_.
5. Создайте **текстовый** атрибут со следущими свойствами:

    - **Название:** _«Наименование»_
    - **Использовать как заголовок записей:** флажок установлен

6. Создайте атрибут типа «**Запись**» со следующими свойствами:

    - **Название:** _Тип_
    - **Связанный шаблон:** _Типы документов_

## Создание атрибута, связывающего два шаблона записей {: #tutorial_hr_lesson_4_add_1m_link }

!!! question "Атрибут типа «Запись»"

    - Атрибут типа «**Запись**» используется для создания связи между шаблонами вида «один ко многим» (1:M), «один к одному» (1:1) или «многие ко многим» (N:M).
    - При установлении связи «один ко многим» несколько записей одного шаблона могут ссылаться на одну запись другого шаблона.
    - Такой шаблон называется **связанным шаблоном**.
    - **Связанный шаблон** всегда указывается при создании атрибута типа «**Запись**».

1. Откройте шаблон записи _«Кандидаты»_.
2. Перейдите на вкладку **Атрибуты**.
3. Создайте атрибут типа «**Запись**» со следующими свойствами:

    - **Название:** _«Документы»_
    - **Связанный шаблон:** _«Документы кандидатов»_
    - **Хранить несколько значений:** флажок установлен

    _![Свойства атрибута «Документы»](img/lesson_4_attribute_multiple.png)_

## Настройка таблицы на форме «Документы» для отображения связанных документов

!!! question "Таблица на форме"

    На форме атрибут типа «**Запись**» с несколькими значениями может отображаться в виде таблицы, в столбцах которой отображаются атрибуты **связанного шаблона**. 
    
    Для таблицы на форме можно настроить набор столбцов, режим доступа, отображение дочерних записей, фильтр записей и кнопки.

1. Перейдите на вкладку «**Формы**» шаблона записи _«Кандидаты»_.
2. Откройте форму _«Кандидаты — Основная форма»_.
3. Перетащите атрибут _«Документы»_ на основную форму кандидата.
4. Для поля _«Документы»_ выберите **представление** «**Таблица**» с помощью панели свойств.
5. Раскройте атрибут _«Документы»_ на панели элементов.
6. Перетащите в таблицу на форме атрибуты _«Наименование»_, _«Тип»_ и _«Файл»_.

    _![Настройка атрибута «Документы» на форме](img/lesson_4_form_table.png)_

7. Выберите область кнопок таблицы.
8. В панели элементов отобразятся кнопки, доступные таблицы.
9. Перетащите на область кнопок таблицы кнопки «**Создать**», «**Сохранить**» и «**Удалить**». Эти кнопки позволят добавлять и удалять документы, связанные с кандидатом.
10. Сохраните форму.

_![Настройка области кнопок атрибута «Документы» на форме](img/lesson_4_form_button_area.png)_

## Доработка формы шаблона записи «Кандидаты»

Добавим возможность создания новых вакансий «на лету».

1. Перейдите на вкладку «**Формы**» шаблона записи _«Кандидаты»_.
2. Откройте форму _«Кандидаты — Основная форма»_.
3. Нажмите поле атрибута _«Вакансия»_.
4. Установите флажок «**Создание записей**».

    !!! note "Примечание"

    Установив флажок «**Создание записей**» в свойствах раскрывающегося списка, мы даём пользователю возможность создавать записи с помощью формы связанного шаблона.

5. В свойстве «**Форма**» выберите _«Вакансии — Основная форма»_.
6. Сохраните форму.

_![Настройка атрибута «Вакансия» на форме](img/lesson_4_form_create_new_record.png)_

## Тестирование

1. Откройте шаблон записи _«Кандидаты»_.
2. Нажмите кнопку «**Перейти к экземплярам**».
3. Откройте запись или создайте новую.
4. Нажмите кнопку «**Создать**» в области рядом с таблицей _«Документы»_.
5. Введите наглядное название документа в ячейку _«Наименование»_.
6. Выберите тип документа.
7. Прикрепите файл в ячейке _«Файл»_.
8. Нажмите кнопку «**Сохранить**».
9. Разверните список поля _«Вакансия»_.
10. Нажмите кнопку «**Создать**».
11. Введите название вакансии и нажмите кнопку «**ОК**».
12. Сохраните запись.

## Итоги урока {: #tutorial_hr_lesson_4_summary }

В ходе этого урока вы научились создавать связанные шаблоны записей с типом связи «один ко многим», использовать атрибут типа «Документ», настраивать табличное представление для связанных записей, добавлять записи «на лету» и настраивать формы задач для бизнес-процесса найма персонала.

В [следующем уроке][tutorial_hr_lesson_5] вы познакомитесь с вычисляемыми атрибутами и автоматизацией расчётов в системе.

{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}

---
title: Урок 5. Автоматизация: сценарии, вычисления, условия и проверки
kbId: 5116
---

# Урок 5. Автоматизация: сценарии, вычисления, условия и проверки {: #tutorial_hr_lesson_5 }

## Введение {: #tutorial_hr_lesson_5_intro }

В ходе этого урока вы научитесь расширять и автоматизировать бизнес-процесс найма персонала с помощью сценариев, вычисляемых атрибутов и формул. Мы рассмотрим, как реализовать автоматические проверки и условия перехода между этапами процесса, используя инструменты ПО **{{ productName }}**.

**Предусловия:** пройден [урок 2 «Первый реестр данных»][tutorial_hr_lesson_2].

**Расчётная продолжительность:** 60 мин.

## Темы, навыки и задания урока {: #tutorial_hr_lesson_5_taxonomy }

**Темы**

- Сценарии (максимум действие «Изменить значение атрибутов»)
- Вычисляемый атрибут
- Язык формул

**Навыки**

- Добавлять сценарий к процессу
- Применять действие изменить значения атрибутов
- Пользоваться редактором выражений
- Использовать формулы

**Задания**

- На диаграмме процесса перейти в задачу «Провести собеседование», на форму вынести основную форму шаблона записи «Кандидаты»
- В отдельную область вынести атрибуты из шаблона записи «Кандидаты»: Дата и время собеседования, Оценка за прохождение собеседования,
- В шаблоне записи «Кандидаты» создать атрибут логический «Проверка службы безопасности»
- В пользовательской задаче «Провести проверку кандидата» вынести форму шаблона записи «Кандидаты» и отдельно в область атрибут «Проверка службы безопасности», переключатель с вариантами «Прошел проверку», «Не прошел», Требовать ввод
- Вынести два исходящих потока из задач «Провести собеседование» и «Провести проверку кандидата» в развилку «и» 2
- В развилке «и» 2 создать сценарий с действием «Изменить значения атрибутов», добавить атрибут «Результаты собеседования», операция «Заменить», выражение AND($Проверкаслужбыбезопасности,GREATEREQ($Оценказапрохождениесобеседования,8))
- Из развилки «и» 2 создать исходящий поток и развилку «или/или» 2 и пользовательскую задачу в дорожке «HR-менеджер»   «Сформировать и согласовать предложение с кандидатом», вынести форму шз «Кандидаты» и закрыть ее на чтение, добавить завершающее событие «Кандидат принят на работу»
- Из развилки «или/или» 2 создать исходящий поток в новое завершающее событие «Кандидат не прошел проверку»
- В развилке «или/или» 2 указать исходящий поток по умолчанию «Кандидат не прошел проверку», для потока «Сформировать и согласовать предложение с кандидатом» указать условие $Результатысобеседования
- Проверить и опубликовать диаграмму процесса

## Определения {: #tutorial_hr_lesson_5_definitions }

- **Сценарий** — последовательность действий, выполняемых системой автоматически при наступлении определённых условий в процессе.
- **Вычисляемый атрибут** — атрибут, значение которого формируется автоматически на основе формулы.
- **Язык формул** — специальный язык для написания выражений, позволяющих вычислять значения атрибутов и управлять логикой процесса.

### Доработка формы задачи «Зафиксировать результаты тестирования» {: #tutorial_hr_lesson_5_task_form }

1. Откройте диаграмму шаблон процесса _«Найм персонала»_ для редактирования.
2. Перейдите к задаче _«Зафиксировать результаты тестирования»_.
3. Нажмите поле атрибута _«Результат тестирования»_.
4. Измените **доступ** к полю на «**Требовать ввод**».
5. В свойстве поля «**Отображать как**» выберете «**Переключатель**».
6. Установите флажок «**Изменить названия вариантов**».
7. Укажите следующие названия вариантов:

    - **Истина:** _Тестирование пройдено_
    - **Ложь:** _Тестирование не пройдено_

8. Сохраните форму задачи.

## Доработка формы задачи «Провести собеседование» {: #tutorial_hr_lesson_5_interview_form }

1. Откройте диаграмму шаблон процесса _«Найм персонала»_ для редактирования.
2. Откройте пользовательскую задачу _«Провести собеседование»_.
3. В область _«Результаты собеседования»_ добавьте следующие атрибуты:
    - _Дата и время собеседования_
    - _Оценка за прохождение собеседования_
4. Нажмите поле атрибута _«Оценка за прохождение собеседования»_.
5. Измените **доступ** к полю на «**Требовать ввод**».
6. В свойстве поля «**Максимум**» укажите число _10_.
7. В свойстве поля «**Отображать как**» выберете «**Переключатель**».
8. Установите флажок «**Изменить названия вариантов**».
9. Укажите следующие названия вариантов:

    - **Истина:** _Пройдено успешно_
    - **Ложь:** _Не пройдено_

10. Удалите с формы поле атрибута _«Результат собеседования»_.
11. Сохраните форму.

### Добавление атрибута «Проверка службы безопасности» {: #tutorial_hr_lesson_5_security_check }

1. Откройте диаграмму шаблон процесса _«Найм персонала»_ для редактирования.
2. Откройте пользовательскую задачу _«Провести проверку кандидата»_.
3. Нажмите поле атрибута _«Проверка службы безопасности»_.
4. Измените **доступ** к полю на «**Требовать ввод**».
5. В свойстве поля «**Отображать как**» выберете «**Переключатель**».
6. Установите флажок «**Изменить названия вариантов**».
7. Укажите следующие названия вариантов:

    - **Истина:** _Прошёл проверку_
    - **Ложь:** _Не прошёл_

8. Сохраните форму.

## Настройка переходов и сценариев на диаграмме процесса {: #tutorial_hr_lesson_5_diagram_scenarios }

!!! warning "Бизнес-логика"

    Кандидат считается успешно прошедшим собеседование, если его оценка будет больше или равна 8 баллам и он пройдёт проверку _Службы безопасности_.

    Для этого изменим значение логического атрибута _«Результат собеседования»_ при помощи сценария.

1. Откройте диаграмму шаблон процесса _«Найм персонала»_ для редактирования.
2. Нажмите элемент «**Развилку **«и»** 2»**.
3. Нажмите кнопку «**Сценарий на выходе**» <i class="fa-light fa-arrow-right-from-bracket"></i>.
4. Откроется сценарий элемента.
5. Внутри действия «**Сменить контекст**» нажмите кнопку «**Добавить действие**» <i class="fa-light fa-circle-plus"></i> и в раскрывающемся меню выберите пункт «**Изменить значения атрибутов**».
6. Внутри действия «**Сменить контекст**» будет создано действие «**Изменить значения атрибутов**».
7. В заголовке действия «**Изменить значения атрибутов**» нажмите кнопку «**Изменить**» <i class="fa-light fa-pen-to-square"></i>.
8. Отобразится окно «**Действие: Изменить значения атрибутов**».
9. Нажмите кнопку «**Создать**».
10. В столбце «**Атрибут**» выберите атрибут _«Результат собеседования»_.
11. В столбце «**Операция со значениями**» выберите пункт «**Заменить**».
12. В столбце «**Значение**» выберите пункт «**Формула**».
13. Нажмите поле в столбце «**Значение**». Отобразится компактный редактор формулы.
14. Введите формулу:

    ``` cs
    AND($Проверкаслужбыбезопасности,GREATEREQ($Оценказапрохождениесобеседования,8))
    ```

    !!! question "Синтаксис формулы номера заявки"

        - `AND()` — эта функция принимает в качестве аргументов два выражения, возвращающих логическое значение, и возвращает логическое значение `true`, если оба аргумента тоже вернули `true`.
        - `GREATEREQ()` — эта функция сравнивает значения двух аргументов и возвращает логическое значение `true`, если значение первого аргумента больше или равно значению второго.
        - `$Проверкаслужбыбезопасности` — атрибут _«Проверка службы безопасности»_.
        - `$Оценказапрохождениесобеседования` — атрибут _«Оценка за прохождение собеседования»_.

15. Нажмите кнопку «**Сохранить**».

## Проверка и публикация диаграммы процесса {: #tutorial_hr_lesson_5_publish }

1. Проверьте корректность настроек сценариев, условий и форм.
2. Опубликуйте обновлённую диаграмму процесса.

## Итоги урока {: #tutorial_hr_lesson_5_summary }

Вы научились использовать автоматические вычисления, настраивать доступ к полям на форме и сценарии в процессе.

В [следующем уроке][tutorial_hr_lesson_6] вы научитесь строить диаграммы моделей, настраивать дашборды и фильтры для мониторинга процесса найма.

{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}

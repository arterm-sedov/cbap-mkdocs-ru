---
title: Урок 3. Мой первый бизнес-процесс
kbId: 
---

# Урок 3. Мой первый бизнес-процесс {: #tutorial_hr_lesson_3 }

## Введение {: #tutorial_hr_lesson_3_intro }

В ходе этого урока вы усовершенствуете **приложение**, созданное на [предыдущем уроке][lesson_2], настроив следующий автоматизированный **процесс** отбора кандидата. На примере процесса «Отбор кандидата на открытую вакансию» вы научитесь моделировать этапы, роли и задачи, используя BPMN-диаграмму, и связывать процесс с данными о кандидатах.

**Предусловия:** пройден [урок 2 «Первый реестр данных»][lesson_2].

!!! warning "Бизнес-логика"

    - _HR-менеджер_ получает результаты тестирования кандидата и заносит их в систему.
    - Если кандидат не прошел тестирование, процесс завершается.
    - Если кандидат успешно прошел тестирование, заявка одновременно поступает _Нанимающему менеджеру_ для проведения собеседования и в _Службу безопасности_ для проведения проверки.

**Предусловия:** пройден [урок 2 «Мой первый реестр данных»][lesson_2].

**Расчётная продолжительность:** 90 мин.

{% include-markdown ".snippets/tutorial_version_notice.md" %}

<div class="admonition question" markdown="block">

## Определения {: .admonition-title #tutorial_hr_lesson_3_definitions}

- **Исполняемый бизнес-процесс**

    {%
    include-markdown "business_apps/templates/template_types/process_templates.md"
    start="<!--process-definitions-start-->"
    end="<!--process-definitions-end-->"
    rewrite-relative-urls=false
    %}

- **Шаблон процесса**
    - Настройка исполняемого бизнес-процесса в **{{ productName }}** выполняется с помощью шаблона процесса.
    - Шаблон процесса состоит из [диаграммы процесса][process_diagram] в нотации BPMN 2.0, хранит экземпляры процесса и свойства, определяющие, как должны выполняться все экземпляра процесса.
    - Каждый шаблон процесса связан с шаблоном записи, который хранит записи для экземпляров процесса.
- **Диаграмма процесса**
    - **Пул и дорожка** — элементы BPMN-диаграммы, отражающие участников процесса (например, HR-менеджер, нанимающий руководитель, служба безопасности).
    - **Пользовательская задача** — действие, выполняемое человеком в рамках процесса (например, "Провести собеседование").
    - **Развилка** — элемент BPMN для ветвления сценариев (например, "Кандидат успешно прошёл тестирование?").
- **Экземпляр процесса** — конкретное выполнение процесса для одного кандидата.

</div>

## Темы, навыки и задания урока {: #tutorial_hr_lesson_3_taxonomy }

**Темы:**
- Процесс
- Шаблон процесса
- Элементы диаграммы
- Простое начальное событие
- Простое конечное событие
- Пользовательская задача
- Развилка или/или
- Развилка и
- Пул и дорожка

**Навыки:**
- Создавать процесс
- Публиковать процесс
- Понимать связи между процессом, записью и задачами
- Различать виды элементов диаграммы
- Создавать экземпляр процесса

**Задания:**
- В приложении «Управление персоналом» создать шаблон процесса «Найм персонала», связать его с шаблоном записи «Кандидаты»
- Переименовать пул по умолчанию в пул «Обработка кандидата на открытую вакансию»
- Создать в пуле 3 дорожки (для ролей):
- HR-менеджер
- Нанимающий менеджер
- Служба безопасности
- Переименовать начальное событие в «Получены результаты тестирования» и конечное событие в «Кандидат не прошел тестирование», перетащить элементы в дорожку «HR-менеджер»
- Добавить на диаграмму процесса пользовательскую задачу «Зафиксировать результаты тестирования»
- Добавить на диаграмму процесса развилку «или/или» и еще один поток, исходящий от нее в дорожку «Нанимающий менеджер» и новую развилку «и»
- В свойствах развилки «или/или» указать поток «иначе»: «Кандидат не прошел тестирование» и добавить условие на развилку «и» - $имяатрибута (Результат тестирования)
- От развилки «и» создать 2 пользовательские задачи – «Провести собеседование» в дорожке «Нанимающий менеджер» и «Провести проверку кандидата» в дорожке «Служба безопасности»

## Создание шаблона процесса {: #tutorial_hr_lesson_3_create_process_template }

Настроим шаблон процесса отбора кандидата.

1. На панели навигации слева выберите пункты «**Настройки**» — «**Шаблоны**».
2. Перейдите на вкладку «**Шаблоны процессов**».
3. Нажмите кнопку «**Создать**».
4. Введите название шаблона _«Найм персонала»_.
5. Укажите приложение _«Управление персоналом»._
6. В поле «**Связанный шаблон**» выберите шаблон _«Кандидаты»_.
7. Нажмите кнопку «**Создать**».

_![Создание шаблона бизнес-процесса](img/lesson_3_hr_process_template_create.png)_

## Построение диаграммы бизнес-процесса {: #tutorial_hr_lesson_3_bpmn_setup }

!!! note "Примечание"

    В **{{ productName }}** для построения **диаграмм бизнес-процесса** используется **нотация BPMN 2.0**.

1. Откройте созданный шаблон процесса _«Найм персонала»_ и перейдите на вкладку «**Диаграмма**».
2. Отобразится конструктор диаграммы бизнес-процесса.

    _![Конструктор диаграммы бизнес-процесса](img/lesson_3_process_diagram_designer.png)_

    !!! question "Конструктор диаграммы процесса"

        Конструктор диаграммы процесса состоит из трех частей, показанных на иллюстрации.

        **(1)** **Панель элементов**, которые можно перетащить на диаграмму:

        - **Действия** — задачи и подпроцессы.
        - **События** — **начальное, промежуточное и конечное**;
        - **Развилки** — «**или/или**», «**и**» (параллельная);
        - **Общие элементы** — **дорожка**, **поток управления**, **комментарий**.

        **(2)** **Диаграмма** бизнес-процесса.

        **(3)** Кнопки **Выбрать версию**, **Очистить**, **Восстановить**, **Опубликовать**, **Проверить**, **Экспортировать**.

3. В пуле по умолчанию задайте название _«Обработка кандидата на открытую вакансию»_.
4. Добавьте еще две дорожки, перетащив их с панели элементов. Присвойте дорожкам названия для ролей:
    - HR-менеджер
    - Нанимающий менеджер
    - Служба безопасности
5. Разместите элементы процесса на диаграмме, как описано ниже. Соедините их потоками управления.

    - **Стартовое событие**: "Получены результаты тестирования" (Дорожка: _HR-менеджер_)
    - **Пользовательская задача**: "Зафиксировать результаты тестирования" (Дорожка: _HR-менеджер_)
    - **Развилка (или/или)**: "Тестирование пройдено?"
        - Поток "Нет" → **Конечное событие**: "Кандидат не прошел тестирование"
        - Поток "Да" → **Развилка «и» (разделение)**
    - От **Развилки «и» (разделение)** два параллельных потока:
        - → **Пользовательская задача**: "Провести собеседование" (Дорожка: _Нанимающий менеджер_)
        - → **Пользовательская задача**: "Провести проверку кандидата" (Дорожка: _Служба безопасности_)
    - Оба потока сходятся в **Развилке «и» (объединение)**.
    - **Развилка (или/или)**: "Собеседование и проверка пройдены?"
        - Поток "Нет" → **Конечное событие**: "Кандидат отклонен"
        - Поток "Да" → **Пользовательская задача**: "Сформировать предложение" (Дорожка: _HR-менеджер_)
    - **Пользовательская задача**: "Согласовать предложение" (Дорожка: _Нанимающий менеджер_)
    - **Развилка (или/или)**: "Предложение согласовано?"
        - Поток "Нет" → **Конечное событие**: "Предложение не согласовано"
        - Поток "Да" → **Пользовательская задача**: "Обсудить предложение с кандидатом" (Дорожка: _HR-менеджер_)
    - **Развилка (или/или)**: "Кандидат принял предложение?"
        - Поток "Нет" → **Конечное событие**: "Кандидат отклонил предложение"
        - Поток "Да" → **Конечное событие**: "Кандидат принят на работу"
        
6. В итоге должна получиться следующая диаграмма:

    _![Результирующая диаграмма бизнес-процесса найма персонала](img/lesson_3_hr_diagram_final_full.svg)_

## Настройка форм пользовательских задач {: #tutorial_hr_lesson_3_task_forms }

### Стартовая форма {: #tutorial_hr_lesson_3_start_form }

Настроим **стартовую форму**, которую будет заполнять _HR-менеджер_ при запуске процесса.

1. Выберите на диаграмме «**Начальное событие**» и в раскрывшемся меню элемента нажмите кнопку «**Стартовая форма**» <i class="fa-light fa-window-maximize"></i>.
2. Перетащите с панели элементов форму _«Кандидаты — Основная форма»_ на макет формы.
3. Сохраните форму.

### Форма задачи «Зафиксировать результаты тестирования» {: #tutorial_hr_lesson_3_task_form_results }

Настроим форму для задачи «Зафиксировать результаты тестирования». На этой форме HR-менеджер будет указывать, прошел ли кандидат тестирование, и оставлять комментарий.

1. Выберите задачу _«Зафиксировать результаты тестирования»_ и в меню элемента нажмите кнопку «**Форма**» <i class="fa-light fa-newspaper"></i>.
2. Перетащите форму _«Кандидаты — Основная форма»_ на макет формы. Установите для нее режим **доступа** «**Только чтение**».
3. Нажмите кнопку «**Добавить атрибут**» <i class="fa-light fa-plus"></i> рядом с пунктом _«Кандидаты»_, чтобы создать новый атрибут.
4. В открывшемся окне создайте **логический** атрибут с названием _«Кандидат успешно завершил тестирование?»_.
5. Аналогично создайте **текстовый** атрибут _«Комментарий к тестированию»_.
6. Перетащите на макет формы под вложенную форму элемент «**Область**» и присвойте ей название _«Результаты тестирования»_.
7. Перетащите в эту область созданные атрибуты:
    - _«Кандидат успешно завершил тестирование?»_
    - _«Результат тестирования»_ (создан в [Уроке 2][lesson_2])
    - _«Комментарий к тестированию»_
8. Сохраните форму.

    _![Настройка формы задачи «Зафиксировать результаты тестирования»](img/lesson_3_hr_task_form_review.png)_

### Форма задачи «Провести собеседование» {: #tutorial_hr_lesson_3_task_form_interview }

Настроим форму для задачи «Провести собеседование».

1. Выберите задачу _«Провести собеседование»_ и в меню элемента нажмите кнопку «**Форма**» <i class="fa-light fa-newspaper"></i>.
2. Перетащите форму _«Кандидаты — Основная форма»_ на макет формы в режиме **«Только чтение»**.
3. Создайте новые атрибуты в шаблоне «Кандидаты»:
    - **Логический**: _«Кандидат успешно завершил собеседование?»_
    - **Текстовый**: _«Комментарий к собеседованию»_
4. Перетащите на макет формы элемент «**Область**» и назовите ее _«Результаты собеседования»_.
5. Перетащите в эту область следующие атрибуты:
    - _«Дата и время проведения собеседования»_ (создан в [Уроке 2][lesson_2])
    - _«Оценка за прохождение собеседования»_ (создан в [Уроке 2][lesson_2])
    - _«Кандидат успешно завершил собеседование?»_
    - _«Комментарий к собеседованию»_
6. Сохраните форму.

### Форма задачи «Провести проверку кандидата» {: #tutorial_hr_lesson_3_task_form_security_check }

Для задачи «Провести проверку кандидата» настройте форму аналогично, создав атрибуты, необходимые для фиксации результатов проверки службой безопасности.

1. Откройте форму задачи _«Провести проверку кандидата»_.
2. Создайте **логический** атрибут _«Проверка СБ пройдена?»_ и **текстовый** атрибут _«Комментарий СБ»_.
3. Вынесите на форму область _«Результаты проверки»_ и добавьте в нее созданные атрибуты.
4. Добавьте вложенную форму _«Кандидаты — Основная форма»_ в режиме **«Только чтение»**.
5. Сохраните форму.

### Форма задачи «Сформировать предложение» {: #tutorial_hr_lesson_3_task_form_offer }

1. Выберите задачу _«Сформировать предложение»_ и в меню элемента нажмите кнопку «**Форма**» <i class="fa-light fa-newspaper"></i>.
2. Перетащите форму _«Кандидаты — Основная форма»_ на макет формы. Установите для нее режим **доступа** «**Только чтение**».
3. Создайте следующие атрибуты в шаблоне «Кандидаты»:
   - **Текст**: _«Название предложения»_
   - **Документ**: _«Файл предложения»_
   - **Текст (Размеченный)**: _«Описание предложения»_
4. Перетащите на макет формы элемент «**Область**» и присвойте ей название _«Предложение о работе»_.
5. Перетащите в область _«Предложение о работе»_ созданные атрибуты.
6. Сохраните форму.

### Форма задачи «Согласовать предложение» {: #tutorial_hr_lesson_3_task_form_approve }

1. Выберите задачу _«Согласовать предложение»_ и в меню элемента нажмите кнопку «**Форма**» <i class="fa-light fa-newspaper"></i>.
2. Перетащите форму _«Кандидаты — Основная форма»_ на макет формы в режиме **«Только чтение»**.
3. Создайте атрибуты:
   - **Логический**: _«Предложение одобрено»_
   - **Текст**: _«Комментарий к предложению»_
4. Перетащите на макет формы элемент «**Область**» и присвойте ей название _«Решение по предложению»_.
5. Перетащите в область _«Решение по предложению»_ созданные атрибуты.
6. Сохраните форму.

### Форма задачи «Обсудить предложение с кандидатом» {: #tutorial_hr_lesson_3_task_form_discuss }

1. Выберите задачу _«Обсудить предложение с кандидатом»_ и в меню элемента нажмите кнопку «**Форма**» <i class="fa-light fa-newspaper"></i>.
2. Перетащите форму _«Кандидаты — Основная форма»_ на макет формы в режиме **«Только чтение»**.
3. Создайте **логический** атрибут _«Кандидат принял предложение?»_.
4. Перетащите на макет формы элемент «**Область**» и присвойте ей название _«Решение кандидата»_.
5. Перетащите в область _«Решение кандидата»_ атрибут _«Кандидат принял предложение?»_ и _«Комментарий к предложению»_ (для чтения).
6. Сохраните форму.

## Настройка развилок {: #tutorial_hr_lesson_3_gateway_setup }

Настроим логику ветвления процесса с помощью развилок.

### Развилка «Тестирование пройдено?»

Эта развилка направляет процесс в зависимости от результатов тестирования.

1.  Выберите развилку _«Тестирование пройдено?»_ и в меню элемента нажмите кнопку «**Свойства**» <i class="fa-light fa-gear"></i>.
2.  На вкладке «**Дополнительные**» укажите названия исходящих потоков — _«Да»_ и _«Нет»_.
3.  Для потока _«Нет»_, ведущего к конечному событию _«Кандидат не прошел тестирование»_, установите флажок «**Поток** «**иначе**».
4.  Для потока _«Да»_ в ячейке «**Условие**» введите формулу `$Кандидатуспешнозавершилтестирование`. Эта формула вернет `true`, если HR-менеджер установил флажок на форме задачи.
5.  Сохраните настройки.

    _![Настройка условия для потока управления](img/lesson_3_hr_exclusive_gate_formula.png)_

### Развилка «Собеседование и проверка пройдены?»

Эта развилка проверяет, что кандидат успешно прошел и собеседование, и проверку СБ. Процесс пойдет дальше, только если оба условия истинны.

1.  Выберите развилку _«Собеседование и проверка пройдены?»_.
2.  Настройте поток «**Да**» с условием, которое проверяет оба флага, используя логический оператор `&&` (И): 
    `$Кандидатуспешнозавершилсобеседование && $ПроверкаСБпройдена`.
3.  Поток «**Нет**» сделайте потоком «**иначе**», ведущим к конечному событию _«Кандидат отклонен»_.
4.  Сохраните настройки.

### Развилка «Предложение согласовано?»

Эта развилка определяет, согласовано ли предложение о работе нанимающим менеджером.

1.  Выберите развилку _«Предложение согласовано?»_.
2.  Настройте поток «**Да**» с условием `$Предложениеодобрено`.
3.  Поток «**Нет**» сделайте потоком «**иначе**», ведущим к конечному событию _«Предложение не согласовано»_.
4.  Сохраните настройки.

### Развилка «Кандидат принял предложение?»

Эта развилка определяет финальный статус процесса в зависимости от решения кандидата.

1.  Выберите развилку _«Кандидат принял предложение?»_.
2.  Настройте поток «**Да**» с условием `$Кандидатпринялпредложение`. Он должен вести к конечному событию _«Кандидат принят на работу»_.
3.  Поток «**Нет**» сделайте потоком «**иначе**», ведущим к конечному событию _«Кандидат отклонил предложение»_.
4.  Сохраните настройки.

## Настройка исполнителей задач {: #tutorial_hr_lesson_3_assignee_setup }

1. Выберите пользовательскую задачу _«Зафиксировать результаты тестирования»_ и в меню элемента нажмите кнопку «**Свойства**» <i class="fa-light fa-gear"></i>.
2. На вкладке «**Дополнительные**» выберите исполнителя в раскрывающемся списке «**Исполнители**».
3. Введите заголовок задачи, который будет видеть пользователь, например: _«Отбор кандидата — Зафиксировать результаты тестирования»._
4. Нажмите кнопку «**Сохранить**».
5. Аналогичным образом задайте **исполнителей** и **заголовки** для всех остальных задач: _«Провести собеседование»_, _«Провести проверку кандидата»_, _«Сформировать предложение»_, _«Согласовать предложение»_ и _«Обсудить предложение с кандидатом»_. В реальном процессе это были бы разные сотрудники из разных ролей, но для целей обучения можно назначить себя на все задачи.

## Проверка и публикация процесса {: #tutorial_hr_lesson_3_publish }

Диаграмму бизнес-процесса рекомендуется публиковать каждый раз после внесения изменений. Перед публикацией проверьте диаграмму.

1. Нажмите кнопку «**Проверить**» в конструкторе диаграммы процесса.
2. Если ошибок нет, появится сообщение «**Ошибок нет**», после чего диаграмму можно публиковать. Нажмите кнопку «**Опубликовать**».

## Тестирование: запуск процесса и «Мои задачи» {: #tutorial_hr_lesson_3_testing }

Вы настроили и опубликовали бизнес-процесс, теперь протестируйте его в роли пользователя.

1. Перейдите к экземплярам процесса _«Найм персонала»_ и нажмите «**Создать**».
2. Заполните стартовую форму в роли _HR-менеджера_ и запустите процесс.
3. Перейдите на страницу «**Мои задачи**» с помощью панели навигации слева. Откройте задачу _«Зафиксировать результаты тестирования»_.
4. **Сценарий 1: Успешное прохождение**
    - Установите флажок _«Кандидат успешно завершил тестирование?»_ и завершите задачу.
    - Убедитесь, что в «Моих задачах» появились две новые параллельные задачи: _«Провести собеседование»_ и _«Провести проверку кандидата»_.
    - Завершите обе задачи, указав, что кандидат прошел проверки (установите флажки _«Кандидат успешно завершил собеседование?»_ и _«Проверка СБ пройдена?»_).
    - Убедитесь, что появилась задача «Сформировать предложение». Заполните данные и завершите ее.
    - Проверьте поступление задачи «Согласовать предложение». Одобрите предложение (установите флажок _«Предложение одобрено»_).
    - Убедитесь, что появилась задача «Обсудить предложение с кандидатом». Укажите, что кандидат принял предложение (установите флажок _«Кандидат принял предложение?»_).
    - Проверьте, что процесс успешно завершился со статусом «Кандидат принят на работу».
5. **Сценарий 2: Отказ на этапе собеседования**
    - Запустите еще один экземпляр процесса и успешно пройдите этап тестирования.
    - На этапах собеседования и проверки СБ укажите, что собеседование не пройдено.
    - Завершите обе задачи.
    - Убедитесь, что процесс завершился со статусом «Кандидат отклонен» и новые задачи не появились.
6. **Сценарий 3: Неуспешное тестирование**
    - Запустите еще один экземпляр процесса.
    - На шаге фиксации результатов не устанавливайте флажок _«Кандидат успешно завершил тестирование?»_ и завершите задачу.
    - Убедитесь, что процесс завершился со статусом «Кандидат не прошел тестирование» и новые задачи не появились.

## Результаты {: #tutorial_hr_lesson_3_summary }

Вы создали полноценный бизнес-процесс по найму персонала, настроили для него дорожки, задачи, параллельное выполнение и сложную логику ветвления с помощью нескольких развилок. Вы научились создавать атрибуты "на лету" и настраивать формы для разных этапов процесса.

В [следующем уроке][lesson_4] вы узнаете, как усовершенствовать шаблон записи для работы с документами кандидатов.

{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}


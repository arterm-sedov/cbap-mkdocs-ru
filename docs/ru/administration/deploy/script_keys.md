---
title: 'Скрипты и их ключи'
kbId: 5122
tags:
  - bash
  - deployment
  - deploy
  - Windows
  - Linux
  - powershell
  - скрипты
  - ключи
  - установка
  - администрирование
  - инсталляция
  - удаление
  - обновление
  - экземпляр
  - скрипты установки
hide: tags
---


# Поддерживаемые ключи скриптов {: #scripts_keys}

Для быстрого развёртывания, обновления, запуска, остановки и удаления **{{ productName }}** компания **{{ companyName }}** предоставляет дистрибутив со скриптами, настраивающими необходимое программное обеспечение.

Здесь представлены сведения о скриптах и ключах, которые поддерживают эти скрипты для настройки конфигурации ПО.

!!! tip "Обязательные ключи для скриптов"

    Если не указать обязательный ключ для любого скрипта, он запросит его после запуска.

## Условные обозначения

Далее используются следующие обозначения:

- `<instanceName>` — имя экземпляра ПО.
- `<versionNumber>` — номер версии ПО.
- `<portNumber>` — номер порта.
- `<versionPath>` — путь к директории с версией ПО.
- `<hostName>` — имя хоста экземпляра ПО.
- `<value>` — значение, подставляемое пользователем.
- `<path/to>` — путь к файлу или директории, подставляемый пользователем.

!!! warning "Пути к файлам и директориям"

    Используемые по умолчанию пути к файлам ПО **{{ productName }}** см. в статье _«[Пути и содержимое директорий экземпляра ПО][paths]»_.

    В вашей конфигурации могут использоваться другие пути, поэтому внимательно подставляйте фактические пути в команды при выполнении инструкций.

## Вызов справки для скриптов

Для ознакомления с ключами и назначением с большинством скриптов можно использовать ключ `-h` или `--help` без каких-либо других ключей, например:

``` sh
sh prerequisites_install.sh -h
```

``` powershell
.\instance_upgrade.ps1 -h
```

## Скрипты установки вспомогательного ПО

Скрипты установки вспомогательного ПО расположены в следующей папке архива:

- **Linux:** `X.X-release-ru-<versionNumber>.prerequisites.<osname>/CMW_<osname>/scripts`
- **Windows:** `X.X-release-ru-<versionNumber>.prerequisites.Windows\CMW_Windows<versionNumber>\scripts`

### files_unblock

Назначение: разблокировка установочных файлов, скачанных из Интернета (снятие метки безопасности `Zone.Identifier`).

Ключи:

- `-path <path/to>` — указать путь до распакованной папки с установочными файлами.
- `-h`, `--help` — вывести справку по использованию скрипта.

### prerequisites_install

Назначение: установка и настройка вспомогательного ПО и зависимостей **{{ productName }}**.

Ключи:

- **Linux**
    - `-h`, `--help` — вывести справку по использованию скрипта.
    - `-u=<user>`, `--user=<user>` — указать пользователя для установки компонентов.
    - `-g=<group>`, `--group=<group>` — указать группу для установки компонентов.
    - `-k`, `--kafka` — установить Kafka.
    - `-kc`, `--kafkaClient` — установить клиентские библиотеки Kafka.
    - `-d`, `--dotnet` — установить .NET.
    - `-o`, `--opensearch` — установить Opensearch.
    - `-i`, `--ignite` — установить Apache Ignite.
    - `-p`, `--platform` — установить компоненты **{{ productName }}**.
- **Windows**
    - `-ignite` — установить Apache Ignite.
    - `-h`, `-help` — вывести справку по использованию скрипта.

### prerequisites_list

Назначение: вывод списка установленных компонентов вспомогательного ПО.

Ключи:

- `-h`, `--help` — вывести справку по использованию скрипта.

### prerequisites_uninstall

Назначение: удаление выбранных компонентов вспомогательного ПО.

Ключи:

- `-d`, `--dotnet` — удалить .NET.
- `-j`, `--java` — удалить Java.
- `-k`, `--kafka` — удалить Kafka.
- `-m`, `--mono` — удалить Mono.
- `-n`, `--nginx` — удалить Nginx.
- `-h`, `--help` — вывести справку по использованию скрипта.

### version_check_environment

Назначение: проверка состояния среды — выводит статус и версию установленных компонентов, необходимых для работы **{{ productName }}**.

### version_check

Назначение: проверка состояния среды и компонентов **{{ productName }}**.

### version_list

Назначение: вывод списка установленных версий **{{ productName }}**.

### version_upgrade_onetime

Назначение: обновление установленной версии **{{ productName }}** до новой с переносом файлов, остановкой и удалением старых сервисов, обновлением конфигураций и запуском новой версии.

## Скрипты установки {{ productName }}

Скрипты установки вспомогательного ПО расположены в следующей папке архива:

- **Linux:** `X.X-release-ru-<versionNumber>.<osname>/CMW_<osname>_<versionNumber>/scripts`
- **Windows:** `X.X-release-ru-<versionNumber>.Windows\CMW_Windows<versionNumber>\scripts`

### files_unblock

Назначение: разблокировка установочных файлов, скачанных из Интернета (снятие метки безопасности `Zone.Identifier`).

Ключи:

- `-path <path/to>` — указать путь до распакованной папки с установочными файлами.
- `-h`, `--help` — вывести справку по использованию скрипта.

### instance_check

Назначение: проверка состояния экземпляра ПО.

Параметры:

- <instanceName> — имя экземпляра ПО (обязательный).

**Пример:**

``` bash
bash instance_check.sh CMW
```

### instance_create

Назначение: создание нового экземпляра **{{ productName }}**, генерация конфигурационных файлов, а также развёртывание демонстрационной базы данных.

Ключи:

- **Linux**
    - `-n=<instanceName>`, `--name=<instanceName>` — указать имя экземпляра ПО (обязательный).
    - `-p=<portNumber>`, `--port=<portNumber>` — назначить порт экземпляру ПО (обязательный). По умолчанию: `80`.
    - `-v=<versionNumber>`, `--version=<versionNumber>` — развернуть ПО указанной версии (обязательный).
    - `-fqdn=<hostName>`, `--instance-fqdn=<hostName>` — указать имя хоста для экземпляра ПО. По умолчанию: `localhost`.
    - `-el=<value>`, `--elasticsearch-url=<value>` — указать ссылку или IP-адрес службы Elasticsearch.
    - `-kf=<value>`, `--kafka-url=<value>` — указать ссылку или IP-адрес службы Kafka.
    - `-d`, `--demoDB` — создать экземпляр ПО c демонстрационной базой данных.
    - `-h`, `--help` — вывести справку по использованию скрипта.
    - **Пример:**

        ``` sh
        bash instance_create.sh -n=CMW -p=8080 -v=5.0.1234.0
        ```

- **Windows**
    - `-name <instanceName>` — указать имя экземпляра ПО (обязательный).
    - `-port <portNumber>` — назначить порт экземпляру ПО. По умолчанию: 80.
    - `-version <versionNumber>` — развернуть ПО указанной версии вида `X.X.XXXX.X`.
    - `-versionPath <versionPath>` — развернуть ПО из указанной папки `<versionPath>` с версией ПО.
    - `-fqdn <hostName>` — имя хоста для экземпляра ПО (опционально, по умолчанию: localhost).
    - `-demoDB` — создать экземпляр ПО c демонстрационной базой данных.
    - **Пример:**

        ``` powershell
        .\instance_create.ps1 -name CMW -port 8080 -version 5.0.1234.0
        ```

### instance_delete

Назначение: удаление экземпляра **{{ productName }}**, его конфигурационных файлов, а также пользовательских данных и всех связанных файлов.

Ключи:

- **Linux**
    - `-n=<instanceName>`, `--name=<instanceName>` — указать имя экземпляра ПО (обязательный).
    - `--deleteData` — удалить базу данных и пользовательские файлы экземпляра ПО.
    - `--deleteLogs` — удалить журналы экземпляра ПО.
    - `--deleteBackups` — удалить резервные копии экземпляра ПО.
    - `-h`, `--help` — вывести справку по использованию скрипта.
    - **Пример:**

        ``` sh
        bash instance_delete.sh -n=CMW
        ```

- **Windows**
    - `-name <instanceName>` — указать имя экземпляра ПО (обязательный). Если не указать другие ключи, будет удалена только служба `comindware<instanceName>`.
    - `-deleteData` — удалить базу данных из папки вида и пользовательские файлы экземпляра ПО. Без указания этого ключа или ключа `-clear` база данных экземпляра ПО не будет удалена.
    - `-clear` — удалить все файлы, папки, базу данных и пользовательские файлы, а также службы экземпляра ПО, сайт и пул из IIS.
    - **Пример:**

        ``` powershell
        .\instance_delete.ps1 -name CMW -clear
        ```

### instance_list

Назначение: вывод списка установленных экземпляров ПО.

Ключи:

- `-h`, `--help` — вывести справку по использованию скрипта.

### instance_restore_from_backup

Назначение: восстановление данных экземпляра ПО из архивной резервной копии (файл .cdbbz) в указанные каталоги `Database` и `Streams`.

Ключи:

- `-zipPath <path/to>` — указать путь к архиву резервной копии `.cdbbz` (обязательный).
- `-dataPath <path/to>` — указать путь к каталогу `Database` для восстановления (обязательный).
- `-streamsPath <path/to>` — указать путь к каталогу `Streams` для восстановления (обязательный).
- `-tempDir <path/to>` — указать временный каталог для распаковки архива.
- `-deleteOldData` — удалить старые данные перед восстановлением.
- `-h`, `--help` — вывести справку по использованию скрипта.

### instance_start

Назначение: запуск экземпляра ПО.

- `-name <instanceName>` — указать имя экземпляра ПО (обязательный).
- `-h`, `-help` — вывести справку по использованию скрипта.

**Пример:**

``` powershell
.\instance_start.ps1 -name CMW
```

### instance_stop

Назначение: остановка экземпляра ПО.

Ключи:

- `-name <instanceName>` — указать имя экземпляра ПО (обязательный).
- `-h`, `-help` — вывести справку по использованию скрипта.

**Пример:**

``` powershell
.\instance_stop.ps1 -name CMW
```

### instance_upgrade

Назначение: обновление экземпляра ПО.

Ключи:

- **Linux**
    - `-n=<instanceName>`, `--name=<instanceName>` — указать имя экземпляра ПО (обязательный).
    - `-vp=<path/to>`, `--versionPath=<path/to>` — путь к папке с новой версией ПО (обязательный).
    - `-h`, `--help` — вывести справку по использованию скрипта.
    - **Пример:**

        ``` bash
        bash instance_upgrade.sh -n=CMW -vp=/comindware/5.0.1234.0
        ```

- **Windows**
    - `-name <instanceName>` — указать имя экземпляра ПО (обязательный).
    - `-version <versionNumber>` — указать номер версии, до которой необходимо обновить экземпляр ПО (обязательный).
    - `-versionPath <path/to>` — обновить экземпляр ПО до версии из указанной папки.
    - `-h`, `-help` — вывести справку по использованию скрипта.
    - **Пример:**

        ``` powershell
        .\instance_upgrade.ps1 -name CMW -version 5.0.1234.0
        ```

### version_check_environment

Назначение: проверка состояния среды — выводит статус и версию установленных компонентов, необходимых для работы **{{ productName }}**.

### version_check

Назначение: проверка состояния среды и компонентов **{{ productName }}**.

### version_delete

Назначение: удаление версии ПО.

- **Linux**
    - `-v=<versionNumber>`, `--version=<versionNumber>` — указать номер версии ПО (обязательный).
    - `-h`, `--help` — вывести справку по использованию скрипта.
    - **Пример:**

        ``` sh
        bash version_delete.sh -v=5.0.1234.0
        ```

- **Windows**
    - `-version <versionNumber>` — указать номер версии ПО (обязательный).
    - `-h`, `-help` — вывести справку по использованию скрипта.
    - **Пример:**

        ``` powershell
        .\version_delete.ps1 -version 5.0.1234.0
        ```

### version_install

Назначение: установка версии ПО.

Ключи:

- `-h`, `--help` — вывести справку по использованию скрипта.

### version_list

Назначение: вывод установленных версий ПО.

Ключи:

- `-h`, `--help` — вывести справку по использованию скрипта.

### version_upgrade_onetime

Назначение: обновление установленной версии **{{ productName }}** до новой с переносом файлов, остановкой и удалением старых сервисов, обновлением конфигураций и запуском новой версии.

<div class="relatedTopics" markdown="block">

--8<-- "related_topics_heading.md"

- [Пути и содержимое директорий экземпляра ПО][paths]
- [Развёртывание ПО в ОС Linux][deploy_guide_Linux]
- [Резервное копирование и восстановление в ОС Linux][backup_and_restore]
- [Развёртывание ПО в ОС Windows][deploy_guide_Windows]
- [Резервное копирование и восстановление в ОС Windows][backup_restore_Windows]

</div>

{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}

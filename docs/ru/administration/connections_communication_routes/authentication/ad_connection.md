---
title: Active Directory
tags:
  - подключение
  - подключения
  - AD
  - Active Directory
hide:
  - tags
kbId: 4687
---

# Сервер каталогов. Настройка подключения {: #ad_connection}

### Определения

Подключение типа «**Сервер каталогов**» используется для синхронизации аккаунтов со службой Active Directory (AD), OpenLDAP, FreeIPA или аналогичной службой каталогов.

## Настройка подключения

1. Откройте [список подключений][connections].
2. Создайте подключение типа «**Аутентификация**» — «**Сервер каталогов**» или дважды нажмите строку подключения типа «**ActiveDirectory**».
3. Отобразится окно свойств подключения.
4. Настройте свойства подключения на следующих вкладках:

    - [Основные свойства](#основные-свойства)
    - [Группы на сервере каталогов](#группы-на-сервере-каталогов)
    - [Сопоставление атрибутов](#сопоставление-атрибутов)
    - [Дополнительные свойства](#дополнительные-свойства)

5. Проверьте соединение, нажав кнопку «**Проверить соединение**» на вкладке «**Основные**».
6. Сохраните подключение.

### Основные свойства {: .pageBreakBefore }

- **Тип сервера каталогов** — выберите:

    - **Active Directory**
    - **OpenLDAP**
    - **FreeIPA**

- **Название** — введите наглядное наименование подключения.
- **Использовать по умолчанию** — установите этот флажок, чтобы данное подключение использовалось как основное для синхронизации аккаунтов.
- **Отключить синхронизацию** — установите этот флажок, чтобы прекратить синхронизацию аккаунтов посредством данного подключения.
- **Адрес сервера** — укажите адрес сервера каталогов.
- **Базовое DN** — укажите уникальное имя для доступа к базовой записи сервера каталогов;
- **Имя пользователя** — логин для входа на сервер каталогов:
    - если выбран **тип привязки** «**Простая**», введите _отличительное имя пользователя_ на сервере каталогов, например:

        ```
        CN=Ivan Ivanov,CN=Users,DC=corp,DC=example,DC=com
        ```

    - если выбран **тип привязки** «**По учётным данным**», введите _отличительное имя пользователя_ или _логин_ для входа на сервер каталогов.

- **Пароль** — пароль для входа на сервер каталогов.
- Тип привязки — выберите режим привязки пользователей:

    - **Простая**
    - **По учётным данным**

- **Аутентификация пользователей** — выберите протокол проверки подлинности:

    - **LDAP**
    - **Kerberos**

- **Режим синхронизации**

    - **Синхронизировать все аккаунты (без групп)** — выберите этот пункт, чтобы синхронизировать аккаунты без учёта их вхождения в группы и без синхронизации групп.
    - **Выбрать группы для синхронизации** — выберите этот пункт, чтобы синхронизировать аккаунты в выбранных группах. См. вкладку «**[Группы на сервере каталогов](#группы-на-сервере-каталогов)**».

- **Проверить соединение** — нажмите эту кнопку, чтобы протестировать подключение к серверу каталогов.
- **Синхронизировать** — нажмите эту кнопку, чтобы принудительно синхронизировать аккаунты с сервером каталогов.

!!! warning "Внимание!"

    При SSO-аутентификации, если экземпляр ПО **{{ productName }}** работает под управлением ОС Linux, то для обеспечения возможности аутентификации новых пользователей, добавленных при синхронизации с сервером каталогов необходимо заново создать keytab-файл на сервере с экземпляром ПО.

    Эту операцию необходимо выполнять каждый раз после добавления новых пользователей с сервера каталогов на уже настроенной машине с экземпляром ПО.

    Если не создать новый keytab-файл, пользователи, добавленные с сервера каталогов после создания имеющегося keytab-файла, не смогут войти в систему.

    См. параграф [_«Обновление keytab-файла аутентификации»_][sso_authentication_configure_keytab_update].
    {% include-markdown ".snippets/pdfEndOfBlockHack.md" %}

_![Настройка основных свойств подключения к серверу каталогов](ad_connection_properties_settings.png)_
  
### Группы на сервере каталогов {: .pageBreakBefore }

- **Исключить все** — нажмите эту кнопку, чтобы прекратить синхронизацию всех групп, перечисленных в таблице ниже.
- **Включить все** — нажмите эту кнопку, чтобы включить синхронизацию всех групп, перечисленных в таблице ниже.
- **Синхронизируется** — в этом столбце отображается флажок, если соответствующая группа на сервере каталогов синхронизируется с **{{ productName }}**.
- **Название** — в этом столбце отображается название группы на сервере каталогов.
- **Уникальное имя** — в этом столбце отображается уникальное имя группы на сервере каталогов.

_![Настройка групп на сервере каталогов](ad_connection_groups_settings.png)_

### Сопоставление атрибутов {: .pageBreakBefore }

- **Изменить** — нажмите эту кнопку, чтобы отредактировать сопоставление атрибутов между **{{ productName }}** и сервером каталогов.
- **Восстановить** — нажмите эту кнопку, вернуть стандартное сопоставление атрибутов между **{{ productName }}** и сервером каталогов.
- **Атрибут аккаунта** — в этом столбце укажите атрибуты аккаунта на стороне **{{ productName }}**.
- **Атрибут сервера каталогов** — в этом столбце указаны атрибуты аккаунтов на стороне сервера каталогов.

_![Сопоставление атрибутов для подключения к серверу каталогов](ad_connection_attributes_difference.png)_

### Дополнительные свойства {: .pageBreakBefore }

- **Запретить вход** — установите этот флажок, чтобы использовать подключение только для синхронизации аккаунтов, но не для входа в систему.
- **Домен** — укажите домен сервера каталогов, используемый для аутентификации.
- **Интервал опроса** — укажите периодичность синхронизации, чтобы включить автоматическую периодическую синхронизацию аккаунтов с сервером каталогов. Если оставить это поле пустым, то синхронизация будет выполняться только при нажатии кнопки «**Синхронизировать**» на вкладке «**[Основные](#основные-свойства)**».
- **Загружать данные аккаунтов**

    - **Только обновленные** — выберите этот пункт, чтобы при синхронизации загружались только данные аккаунтов, изменённых на стороне сервера каталогов (при первой синхронизации загружаются все аккаунты).
    - **Все** — выберите этот пункт, чтобы при синхронизации загружались данные всех аккаунтов.

- **Действия при исключении аккаунтов с сервера каталогов** — доступно при выборе «**Синхронизировать все аккаунты (без групп)**» в поле «**Режим синхронизации**» на вкладке «**[Основные](#основные-свойства)**»:

    - **Отключение или включение** — укажите действие с аккаунтами в **{{ productName }}** в зависимости от их статуса на сервере каталогов:

        - **Не изменять аккаунты**
        - **Отключить исключённые аккаунты**
        - **Включить все несинхронизированные**

    - **Архивирование или разархивирование** — укажите действие с аккаунтами в **{{ productName }}** в зависимости от их статуса на сервере каталогов:

        - **Не изменять аккаунты**
        - **Архивировать исключённые**
        - **Разархивировать все несинхронизированные**

_![Настройка дополнительных свойств подключения к серверу каталогов](img/ad_connection_advanced_settings.png)_

<div class="relatedTopics" markdown="block">

--8<-- "related_topics_heading.md"

- _[Аутентификация через Active Directory. Настройка контроллера домена и экземпляра ПО][ad_authentication_configure_dc_instance]_
- _[Настройка единого входа (SSO-аутентификации) в ОС Windows][sso_authentication_configure_windows]_
- _[Аутентификация через единый вход (SSO). Настройка контроллера домена, экземпляра ПО и компьютера конечного пользователя][sso_authenticatation_configure]_
- _[Синхронизация с сервером каталогов (Active Directory)][accounts_dc_sync]_
- _[Удаление подключения][connections]_

</div>

{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}

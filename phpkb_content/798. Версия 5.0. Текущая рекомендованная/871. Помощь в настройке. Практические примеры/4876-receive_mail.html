<h1>Получение входящей эл. почты в процессе</h1><p><strong>Comindware Platform</strong> может как отправлять, так и принимать входящие электронные письма. Например, если вы хотите принимать запросы, заявки, или какую-либо другую информацию, то:</p>
<p><strong>1.</strong> Создайте новое подключение с эл. почтой, с которой будут приниматься эл. письма.</p>
<p><strong>2.</strong> Создайте новый путь «<em>Входящие сообщения</em>» в разделе «<strong><em>Пути передачи данных</em></strong>».</p>
<ul>
<li>В зависимости от требуемого сценария использования выберите вариант назначения эл. письма: «<strong><em>Новый экземпляр процесса</em></strong>» или «<strong><em>Существующий экземпляр процесса</em></strong>».</li>
</ul>
<p>Например, при использовании выбранного эл. адреса только для приема запросов можно указать «<strong><em>Новый экземпляр процесса</em></strong>». Если предполагается прием и разбор ответов на отправленные эл. письма с дальнейшей отправкой в ожидающий процесс, то нужно указать «<em><strong>Существующий экземпляр процесса</strong></em>».</p>
<ul>
<li>Также важно корректно выбрать процесс, который будет запускаться при обработке одного эл. письма.</li>
</ul>
<p>Например, при использовании выбранного эл. адреса только для приема запросов можно указать конкретный бизнес-процесс обработки запроса. Если на выбранный эл. адрес отправляются запросы различного типа или ответы на отправленные письма, то необходимо создать технический процесс приема всех запросов.</p>
<div class="screenshot_with_caption" style="font-size: 15px !important;">
<p><img alt="Пример технического процесса по обработке входящих писем" class="img-responsive" height="564" src="https://kb.comindware.ru/assets/incomingmail1.png" width="1069"/></p>
<p class="caption" style="font-size: 15px !important;">Пример технического процесса по обработке входящих писем</p>
</div>
<p><strong>3.</strong><strong> </strong>В путях передачи данных настройте атрибуты сообщения, с помощью которых можно настроить соответствие атрибутов системы и атрибутов эл.письма.</p>
<div class="screenshot_with_caption" style="font-size: 15px !important;">
<p><img alt="Настройка соответствия атрибутов" class="img-responsive" height="556" src="https://kb.comindware.ru/assets/incomingmail2.png" width="804"/></p>
<p class="caption" style="font-size: 15px !important;">Настройка соответствия атрибутов</p>
</div>
<p>Взаимодействие через эл. письма имеет ограничения по количеству и формату передаваемых данных — перечень стандартных атрибутов эл. письма:</p>
<ul>
<li>Адрес отправителя;</li>
<li>Имя отправителя;</li>
<li>Адрес получателя;</li>
<li>Имя получателя;</li>
<li>Тема;</li>
<li>Сообщение;</li>
<li>Адрес для отправки копии;</li>
<li>Имя для отправки копии;</li>
<li>Адрес для отправки скрытой копии;</li>
<li>Имя для отправки скрытой копии;</li>
<li>Прикрепленные файлы.</li>
</ul>
<p><strong>4.</strong> В дополнительных свойствах начального события-получения сообщения выберите созданный путь передачи данных.</p>
<div class="screenshot_with_caption" style="font-size: 15px !important;">
<p><img alt="Настройка начального события-получения сообщения" class="img-responsive" height="698" src="https://kb.comindware.ru/assets/incomingmail3.png" width="981"/></p>
<p class="caption" style="font-size: 15px !important;">Настройка начального события-получения сообщения</p>
</div>
<p>Во вкладке «<strong><em>Шаблон сообщения</em></strong>» также укажите атрибуты вашего шаблона записи для передачи данных из шаблона сообщения выбранного пути передачи данных.</p>
<div class="screenshot_with_caption" style="font-size: 15px !important;">
<p><img alt="Настройка передачи данных из полученного сообщения" class="img-responsive" height="698" src="https://kb.comindware.ru/assets/incomingmail4.png" width="975"/></p>
<p class="caption" style="font-size: 15px !important;">Настройка передачи данных из полученного сообщения</p>
</div>
<p><strong>5.</strong> В зависимости от сценария использования в настройке процесса возможно потребуется разбор темы или тела письма для определения типа запроса или варианта новый/существующий запрос. В данном случае рекомендуем воспользоваться примерами реализации на языке Comindware Expression Language (примеры парсинга атрибутов: <samp data-name="aid" data-title="" data-value="4978"><span style="color: #0066bc; font-family: Tahoma;"><img src="https://kb.comindware.ru/images/marker.png" style="vertical-align: middle;"/>{Article-ID:4978}</span></samp>, <samp data-name="aid" data-title="" data-value="4983"><span style="color: #0066bc; font-family: Tahoma;"><img src="https://kb.comindware.ru/images/marker.png" style="vertical-align: middle;"/>{Article-ID:4983}</span></samp>).</p>
<div class="blue_note">При настройке подключения для получения эл.почты, имейте в виду, что каждое непрочитанное письмо в данной эл. почте будет обработано и помечено как прочитанное.</div>
<h1>Атрибут типа «Список значений». Вычисление значения по справочнику</h1><div class="md-container">
<div class="md-main__inner md-grid">
<div class="mce-toc">
<h2 class="toc-heading">Содержание</h2>
<ul>
<li><a href="#mcetoc_1hl3ofm5k0">Прикладная задача</a></li>
<li><a href="#mcetoc_1hl3pdij72">Исходные данные</a></li>
<li><a href="#mcetoc_1hkgc9ofi2">Практический пример</a></li>
<li><a href="#mcetoc_1gk2vv81k5">Связанные статьи</a></li>
</ul>
</div>
<div class="md-content">
<h2 id="mcetoc_1hl3ofm5k0">Прикладная задача</h2>
<p>В этой статье представлен способ вычисления значения атрибута типа «<strong>Список значений</strong>» по справочнику из связанного шаблона.</p>
<p>Для примера настроим простейшую форму заказа пассажирской перевозки следующим образом:</p>
<ol>
<li>Заказчик создаёт заявку на перевозку и выбирает её тип:
<ul>
<li>автобусная перевозка;</li>
<li>грузоперевозка;</li>
<li>перевозка на легковом автомобиле;</li>
<li>перевозка на микроавтобусе.</li>
</ul>
</li>
<li>На форме заявке автоматически отображается подходящий для выполнения заявки тип транспортного средства.</li>
</ol>
<h2 id="mcetoc_1hl3pdij72">Исходные данные</h2>
<p>Для выполнения примера создайте указанные в следующей таблице шаблоны и атрибуты.</p>
</div>
</div>
</div>
<table border="1" style="height: 181px;">
<tbody>
<tr style="height: 64px;">
<td style="height: 64px; width: 326.285px;"><strong>Название / системное имя шаблона записи</strong></td>
<td style="height: 64px; width: 276.892px;"><strong>Название / системное имя атрибута</strong></td>
<td style="height: 64px; width: 121.337px;"><strong>Тип атрибута</strong></td>
<td style="height: 64px; width: 1035.47px;"><strong>Описание</strong></td>
</tr>
<tr style="height: 39px;">
<td rowspan="2" style="height: 78px; width: 326.285px;">
<p><em>Типы заявок / </em><em>RequestTypes</em> <br/><em><br/></em></p>
</td>
<td style="height: 39px; width: 276.892px;"><em>Наименование типа заявки / Name</em></td>
<td style="height: 39px; width: 121.337px;"><strong>Текст</strong></td>
<td rowspan="2" style="vertical-align: middle; height: 78px; width: 1035.47px;">
<p>Атрибут <em>«Наименование типа заявки»</em> содержит наглядное название типа заявки.</p>
<p>Атрибут <em>«Код типа заявки»</em> содержит условное обозначение типа заявки.</p>
</td>
</tr>
<tr style="height: 39px;">
<td style="height: 39px; width: 276.892px;"><em>Код типа заявки / Code</em></td>
<td style="height: 39px; width: 121.337px;"><strong>Текст</strong></td>
</tr>
<tr style="height: 39px;">
<td style="height: 39px; width: 326.285px; vertical-align: middle;"><em>Заявки / Requests</em></td>
<td style="height: 39px; width: 276.892px; vertical-align: middle;"><em>Тип заявки / RequestType</em></td>
<td style="height: 39px; width: 121.337px; vertical-align: middle;"><strong>Запись</strong></td>
<td style="vertical-align: middle; height: 39px; width: 1035.47px;">
<p>Атрибут <em>«Тип заявки»</em> связан с шаблоном <em>«Типы заявок»</em>.</p>
</td>
</tr>
</tbody>
</table>
<div class="md-container">
<div class="md-main__inner md-grid">
<div class="md-content">
<h2 id="mcetoc_1hkgc9ofi2">Практический пример</h2>
<ol class="colored_numbers_list">
<li>
<p>В шаблоне <em>«Типы заявок» </em>создайте четыре записи:</p>
<div class="table-responsive">
<table border="1" style="width: 100%; border-collapse: collapse;">
<tbody>
<tr>
<th style="width: 33.3333%;">Наименование типа заявки</th>
<th style="width: 33.3333%;">Код типа заявки</th>
</tr>
<tr>
<td style="width: 33.3333%;">Автобусная перевозка</td>
<td style="width: 33.3333%;">bus</td>
</tr>
<tr>
<td style="width: 33.3333%;">Грузоперевозка</td>
<td style="width: 33.3333%;">truck</td>
</tr>
<tr>
<td style="width: 33.3333%;">Перевозка на микроавтобусе</td>
<td style="width: 33.3333%;">van</td>
</tr>
<tr>
<td style="width: 33.3333%;">Перевозка на легковом автомобиле</td>
<td style="width: 33.3333%;">passengerCar</td>
</tr>
</tbody>
</table>
</div>
</li>
<li>Поместите на форму и в таблицу шаблона <em>«Заявки»</em> атрибут <em>«Тип заявки».</em></li>
<li>Создайте и поместите на форму и в таблицу шаблона <em>«Заявки»</em> атрибут <em>«Тип транспортного средства»</em>:
<ul>
<li><strong> Тип данных:</strong> <strong>Список значений</strong></li>
<li><strong>Формат отображения: </strong><strong>Бейдж</strong></li>
<li><strong>Вычислять автоматически: </strong>флажок установлен</li>
<li><strong>Вычисляемое значение:</strong> <strong><strong>формула</strong> </strong>
<pre class="source_code_container"><code> ENUMVALUE("VehicleType",$RequestType-&gt;Code)</code></pre>
<div class="notice notice-success">
<p class="admonition-title">Синтаксис формулы</p>
<ul>
<li><code>ENUMVALUE(enumAttributeSystemName, enumValueSystemName)</code> — эта функция принимает два аргумента: системное имя атрибута типа «<strong>Список значений</strong>» и системное имя одного из значений этого атрибута, и возвращает ID указанного значения.</li>
<li><code>ENUMVALUE("VehicleType",$RequestType-&gt;Code)</code> — возвращает строку с ID значения атрибута <code>VehicleType</code>, соответствующего значению атрибута <code>Code</code> из записи шаблона <em>«Типы заявок»</em>, на которую ссылается атрибут <code>RequestType</code>.</li>
<li>Данная формула присваивает атрибуту <em>«Тип транспортного средства» </em>значение, соответствующее  из справочника типов заявок</li>
</ul>
</div>
</li>
<li><strong>Список значений:</strong>
<table style="width: 99.8794%; height: 200px;">
<thead>
<tr style="height: 40px;">
<th style="width: 30.03%; height: 0px;">Системное имя</th>
<th style="width: 30.9309%; height: 0px;">RU</th>
<th style="width: 19.2793%; height: 0px;">Цвет</th>
<th style="width: 19.6997%; height: 0px;">Значок</th>
</tr>
</thead>
<tbody>
<tr style="height: 40px;">
<td style="width: 30.03%; height: 0px;">bus</td>
<td style="width: 30.9309%; height: 0px;">Автобус</td>
<td style="width: 19.2793%; height: 0px;"><span style="background-color: #ff0000; color: #ffffff;">#ff0000</span></td>
<td style="width: 19.6997%; height: 0px;"><em class="fa-light fa-bus">‌</em> bus</td>
</tr>
<tr style="height: 40px;">
<td style="width: 30.03%; height: 0px;">passengerCar</td>
<td style="width: 30.9309%; height: 0px;">Легковой автомобиль</td>
<td style="width: 19.2793%; height: 0px;"><span style="background-color: #0000ff; color: #ffffff;">#0000ff</span></td>
<td style="width: 19.6997%; height: 0px;"> <em class="fa-light fa-car">‌</em> car</td>
</tr>
<tr style="height: 40px;">
<td style="width: 30.03%; height: 0px;">truck</td>
<td style="width: 30.9309%; height: 0px;">Грузовик</td>
<td style="width: 19.2793%; height: 0px;"><span style="background-color: #00ff00;">#00ff00</span></td>
<td style="width: 19.6997%; height: 0px;"> <em class="fa-light fa-truck">‌</em> truck</td>
</tr>
<tr style="height: 40px;">
<td style="width: 30.03%; height: 0px;">van</td>
<td style="width: 30.9309%; height: 0px;">Микроавтобус</td>
<td style="width: 19.2793%; height: 0px;"><span style="background-color: #ffff00;">#ffff00</span></td>
<td style="width: 19.6997%; height: 0px;"> <em class="fa-light fa-van-shuttle">‌</em> van-shuttle</td>
</tr>
</tbody>
</table>
<div class="notice notice-info">
<p class="admonition-title">Примечание</p>
<p>Системные имена значений атрибута должны совпадать со значениями атрибута <em>«Код типа заявки» ранее </em>созданных записях шаблона <em>«Типы заявок»: </em><code>bus</code>, <code>passengerCar</code>, <code>truck</code>, <code>van</code></p>
</div>
</li>
</ul>
</li>
<li>Откройте форму и в поле <em>«Тип заявки»</em> выберите любое значение.</li>
<li>В поле <em>«Тип транспортного средства» </em>должны автоматически отображаться соответствующие значения.
<figure class="screenshot_with_caption" style="font-size: 15px !important;">
<p><img class="img-responsive" src="https://kb.comindware.ru/assets/enum_field_calculate_by_reference.gif"/></p>
<figcaption class="caption" style="font-size: 15px !important;">Автоматическое вычисление значения атрибута типа «Список значений» по значению атрибута из справочника</figcaption>
</figure>
</li>
<li>Откройте таблицу с записями шаблона <em>«Заявки»</em>.</li>
<li>Столбец <em>«Тип транспортного средства»</em> должен выглядеть как показано на иллюстрации.
<figure class="screenshot_with_caption" style="font-size: 15px !important;">
<p><img alt="Представление атрибута типа «Список значений» в таблице" class="img-responsive" src="https://kb.comindware.ru/assets/img_65b75c467bf5d.png"/></p>
<figcaption class="caption" style="font-size: 15px !important;">Представление атрибута типа «Список значений» в таблице</figcaption>
</figure>
</li>
</ol>
<h2 id="mcetoc_1gk2vv81k5">Связанные статьи</h2>
<p><strong><a href="https://kb.comindware.ru/article.php?id=4779">Атрибут типа «Список значений»</a></strong></p>
<p><strong><a href="https://kb.comindware.ru/article.php?id=4780">Атрибут типа «Запись»</a></strong></p>
<p><a href="https://kb.comindware.ru/article.php?id=4913"><strong>Атрибут типа «Список значений». Вычисление текущего значения</strong></a></p>
</div>
</div>
<p><a class="md-top md-icon mkdocs_imported_link" href="#"> <em class="fa-light fa-arrow-up">‌</em> К началу </a></p>
</div>
<div class="md-dialog">
<div class="md-dialog__inner md-typeset"> </div>
</div>
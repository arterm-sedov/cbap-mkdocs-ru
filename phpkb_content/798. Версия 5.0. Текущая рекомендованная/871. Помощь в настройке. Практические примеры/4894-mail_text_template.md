---
title: Формирование текста письма по шаблону
kbId: 4894
---

# Формирование текста письма по шаблону

В ряде случаев может потребоваться необходимость формирования текста письма по определённому шаблону с возможностью автоматического добавления переменных в некоторых местах. Это может понадобиться, например, для настройки отправки уведомления пользователям о результатах выполнения работы или информировании клиентов об изменениях сроков.

Ниже описана последовательность действий для настройки текста уведомления сотрудника в рамках процесса оформления отпуска. Данную последовательность можно применять и для настройки вашего сценария, видоизменив определенные переменные.

**1.** В текущем шаблоне записи (в данном примере — «Отпуска») создайте текстовый атрибут «Шаблон письма» (системное имя «template»), в котором будет содержаться текст шаблона с переменными, а также при необходимости с включенными в него дополнительными данными (графические изображения и т.д.).

Пример шаблона:

| *Уважаемый [Сотрудник],*  *Просим вас явиться в кабинет директора по персоналу [Срок] для подписания документов на отпуск.* *С уважением, специалист отдела кадров [ФИО специалиста]* |
| --- |

В этом примере текст в квадратных скобках является переменной, вместо него будут подставлены данные с формы при заполнении: ФИО сотрудника, дата подписания, ФИО сотрудника кадрового отдела.

**Примечание :** Содержание шаблона может быть предварительно заполнено правилами для данных на форме или событием в процессе.
**2.** В текущем шаблоне записи (в данном примере — «Отпуска») создайте текстовый атрибут «ФИО сотрудника» (системное имя «fiosotrudnika»).

**3.** В текущем шаблоне записи (в данном примере — «Отпуска») создайте атрибут Дата / Время «Дата подписания» (системное имя «date»).

**4.** В текущем шаблоне записи (в данном примере — «Отпуска») создайте текстовый атрибут «ФИО специалиста» (системное имя «managerfio»).

**5.** В текущем шаблоне записи (в данном примере — «Отпуска») создайте текстовый атрибут «Текст письма», в котором будет содержаться итоговый текст для отправки. Сделайте этот атрибут вычисляемым и напишите выражение с помощью функции REPLACE:

| REPLACE( REPLACE( REPLACE($template,"[*Срок*]", $date)", "[*Сотрудник*]", $fiosotrudnika), [*ФИО специалиста*]", $managerfio) |
| --- |

Полученный результат можно использовать для отправки на почту сотруднику в рамках процесса оформления отпуска.

{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}

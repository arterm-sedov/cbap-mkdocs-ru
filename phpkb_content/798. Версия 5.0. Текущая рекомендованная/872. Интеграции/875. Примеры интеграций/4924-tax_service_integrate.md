---
title: Comindware интеграция с ФНС
kbId: 4924
---

# Comindware интеграция с ФНС

ФНС предоставляет данные компаний, которые, в частности, могут быть необходимы в процессе проверки контрагента. Интеграция с сервисом ФНС осуществляется через подключение к [API-ФНС](https://api-fns.ru/index). 

В данной статье представлен базовый вариант интеграций по следующему сценарию: получение ряда данных компании по указанному ИНН (метод *multinfo*). Интеграция запускается по нажатию кнопки в записи контрагента. Данные забираются из сведений баз данных ФНС, но не все данные могут присутствовать. Если ИНН является действительным, то полученные из базы ФНС данные запишутся в поля, если поля остались пустыми — это означает, что в ФНС таких данных нет. При повторном нажатии на кнопку данные будут перезаписаны.

Для юридического лица будут получены следующие данные:

- Наименование юридического лица;
- Количество сотрудников;
- Годовой доход;
- ФИО руководителя;
- ОГРН;
- КПП;
- Юридический адрес;
- ОКВЭД;
- Вид деятельности.

Для ИП будут получены следующие данные:

- Наименование;
- ФИО руководителя;
- ОГРН;
- Юридический адрес;
- ОКВЭД;
- Вид деятельности.

**Настройка**

**1.** Зарегистрируйтесь на сайте [API-ФНС](https://api-fns.ru/index) и получите API ключ для подключения. 

**2.** В шаблоне записи, где хранятся данные по контрагентам, добавьте кнопку с операцией C# скрипт.

**3.**Скачайте файл со скриптом из вложения к данной статье и модифицируйте его под свои данные:

- строка 23, 25, 30 — "INN" (вставьте в кавычках системное имя атрибута, хранящего данные по ИНН компании);
- строка 31 — "123" (вставьте в кавычках полученный API ключ);
- строка 42 — "NaimenovanieYuL" (вставьте в кавычках системное имя атрибута, хранящего данные по наименованию юридического лица);
- строка 43 — "Kolichestvosotrudnikov" (вставьте в кавычках системное имя атрибута, хранящего данные по количеству сотрудников компании);
- строка 45 — "Godovoydokhod" (вставьте в кавычках системное имя атрибута, хранящего данные по годовому доходу компании);
- строка 46, 57 — "FIOrukovoditelya" (вставьте в кавычках системное имя атрибута, хранящего данные по ФИО руководителя компании);
- строка 48, 58 — "OGRN" (вставьте в кавычках системное имя атрибута, хранящего данные по ОГРН компании);
- строка 49 — "KPP" (вставьте в кавычках системное имя атрибута, хранящего данные по КПП компании);
- строка 50, 59 — "Yuridicheskiyadres" (вставьте в кавычках системное имя атрибута, хранящего данные по юридическому адресу компании);
- строка 52, 61 — "OKVED" (вставьте в кавычках системное имя атрибута, хранящего данные по коду ОКВЭД компании);
- строка 53, 62 — "Viddeyatelnosti" (вставьте в кавычках системное имя атрибута, хранящего данные по виду деятельности компании);
- строка 56 — "Naimenovanie" (вставьте в кавычках системное имя атрибута, хранящего данные по наименованию ИП);
- строка 54, 64 — "Clients" (вставьте в кавычках системное имя шаблона записи, где хранятся все вышеуказанные атрибуты, т.е., текущий шаблон записи).

**4.** Во вкладке «***Скрипт***» вставьте получившийся скрипт.

**5.** Нажмите «***Сохранить***».

**6.** Расположите кнопку на формуе, или на области кнопок для формы.

При выполнении скрипта могут возникнуть следующие ошибки:

- Нет ИНН — атрибут для указания ИНН пустой.
- Проблема с ответом — произошла проблема на сервере ФНС или проблема с API.
- Нет компании по такому ИНН — в базе ФНС не найдена компания по такому ИНН;
- Пустые поля — ФНС не хранит данных по указанной компании.
- Ошибка — Возникла неизвестная ошибка.
{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}

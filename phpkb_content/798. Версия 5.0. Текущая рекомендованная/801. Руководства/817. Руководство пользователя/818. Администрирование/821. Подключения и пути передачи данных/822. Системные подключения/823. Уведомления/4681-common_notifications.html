<h1>Общие уведомления. Настройка пути передачи данных, диаграммы процесса и глобальной конфигурации</h1><div class="md-container" data-md-component="container">
<div class="md-main__inner md-grid"><nav aria-label="Содержание" class="md-nav md-nav--secondary">
<div class="mce-toc">
<h2 class="toc-heading">Содержание</h2>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#definitions"> <span class="md-ellipsis"> Определения </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#порядок-настройки-общих-уведомлений"> <span class="md-ellipsis"> Порядок настройки общих уведомлений </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#global_configuration_setting"> <span class="md-ellipsis"> Настройка глобальной конфигурации </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#communication_routes_setting"> <span class="md-ellipsis"> Настройка пути передачи данных </span> </a><nav aria-label="Настройка пути передачи данных" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#communication_routes_properties"> <span class="md-ellipsis"> Свойства пути передачи данных </span> </a><nav aria-label="Свойства пути передачи данных" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#основные-свойства"> <span class="md-ellipsis"> Основные свойства </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#message_attributes"> <span class="md-ellipsis"> Атрибуты сообщения </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#message_properties"> <span class="md-ellipsis"> Свойства сообщения </span> </a></li>
</ul>
</nav></li>
</ul>
</nav></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#common_notification_example"> <span class="md-ellipsis"> Пример: вывод общих уведомлений в информационной панели и на странице входа </span> </a><nav aria-label="Пример: вывод общих уведомлений в информационной панели и на странице входа" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#настройка-приложения"> <span class="md-ellipsis"> Настройка приложения </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#тестирование-уведомлений"> <span class="md-ellipsis"> Тестирование уведомлений </span> </a></li>
</ul>
</nav></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#связанные-статьи"> <span class="md-ellipsis"> Связанные статьи </span> </a></li>
</ul>
</div>
</nav>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<div class="notice notice-success">
<h2 class="admonition-title" id="definitions">Определения</h2>
<p><strong>Общие уведомления</strong> — это сообщения, которые отображаются для всех авторизованных пользователей системы в течение заданного промежутка времени:</p>
<ul>
<li>при нажатии значка «<strong>Уведомления</strong>» <em class="fa-light fa-bell">‌<!--icon--></em> в информационной панели;</li>
<li>на странице входа (если в <a class="mkdocs_imported_link" href="#message_properties">свойствах сообщения</a> не установлен флажок «<strong>Внутреннее уведомление</strong>»).</li>
</ul>
</div>
<figure class="screenshot_with_caption">
<p><img alt="Вызов панели «Уведомления»" src="https://kb.comindware.ru/assets/common_notifications_board_call.png"/></p>
<figcaption class="caption">Вызов панели «Уведомления»</figcaption>
</figure>
<figure class="screenshot_with_caption">
<p><img alt="Критически важное уведомление на странице входа" src="https://kb.comindware.ru/assets/common_notifications_entry_page_urgent_message_generic.png"/></p>
<figcaption class="caption">Критически важное уведомление на странице входа</figcaption>
</figure>
<h2 id="порядок-настройки-общих-уведомлений">Порядок настройки общих уведомлений</h2>
<ol class="colored_numbers_list">
<li>Включите получение уведомлений в <a class="mkdocs_imported_link" href="#global_configuration_setting"><strong>Глобальной конфигурации</strong></a>.</li>
<li>Настройте <a class="mkdocs_imported_link" href="#communication_routes_setting"><strong>путь передачи данных</strong></a> типа «<strong>Общие уведомления</strong>».</li>
<li>Используйте настроенный путь передачи данных в качестве <strong>места назначения</strong> в <strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4740">промежуточном событии-отправке сообщения</a></strong> или <strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4745">конечном событии-отправке сообщения</a></strong>.</li>
</ol>
<p>См. также <em><a class="autorefs autorefs-internal mkdocs_imported_link" href="#common_notification_example">Пример: вывод общих уведомлений в информационной панели и на странице входа</a>.</em></p>
<h2 id="global_configuration_setting">Настройка глобальной конфигурации</h2>
<ol class="colored_numbers_list">
<li>На странице «<a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4661"><strong>Администрирование</strong></a> в разделе «<strong>Инфраструктура</strong>» выберите пункт «<strong>Глобальная конфигурация</strong>» <em class="fa-light fa-desktop">‌<!--icon--></em>.</li>
<li>Установите флажок «<strong>Включить получение уведомлений (кроме уведомлений о задачах)</strong>».</li>
<li>Сохраните глобальную конфигурацию.</li>
<li>Перезапустите экземпляр <strong>Comindware Platform</strong>, чтобы изменения вступили в силу. Для этого может потребоваться обратиться к системному администратору.</li>
</ol>
<figure class="screenshot_with_caption">
<p><img alt="Включение получения общих уведомлений" src="https://kb.comindware.ru/assets/common_notifications_switch_on.png"/></p>
<figcaption class="caption">Включение получения общих уведомлений</figcaption>
</figure>
<h2 id="communication_routes_setting">Настройка пути передачи данных</h2>
<ol class="colored_numbers_list">
<li>Откройте страницу «<strong>Администрирование</strong>» — «<strong>Архитектура</strong>» или страницу «<strong>Администрирование</strong>» приложения.</li>
<li>Выберите пункт «<strong>Пути передачи данных</strong>» <em class="fa-light fa-route">‌<!--icon--></em>.</li>
<li>Отобразится список путей передачи данных.</li>
<li>Дважды нажмите в списке или создайте путь передачи данных типа «<strong>Системные подключения</strong>» — «<strong>Общие уведомления</strong>».</li>
<li><a class="mkdocs_imported_link" href="#communication_routes_properties">Настройте свойства</a> пути передачи данных.</li>
<li>Сохраните путь передачи данных.</li>
</ol>
<h3 id="communication_routes_properties">Свойства пути передачи данных</h3>
<h4 id="основные-свойства">Основные свойства</h4>
<p>Вкладка «<strong>Основные свойства</strong>» содержит основные параметры пути передачи данных:</p>
<ul>
<li><strong>Отключить</strong> — установите этот флажок, чтобы временно деактивировать путь передачи данных.</li>
<li><strong>Название</strong> — введите наглядное наименование пути передачи данных.</li>
<li><strong>Имя сообщения</strong> — введите <em>уникальный</em> идентификатор сообщения, проходящего по данному пути передачи данных.</li>
<li><strong>Приложение</strong> — выберите бизнес-приложение, в котором будет использоваться путь передачи данных.</li>
</ul>
<figure class="screenshot_with_caption">
<p><img alt="Настройка основных свойств пути передачи данных для общего уведомления" src="https://kb.comindware.ru/assets/common_notifications_properties_setting.png"/></p>
<figcaption class="caption">Настройка основных свойств пути передачи данных для общего уведомления</figcaption>
</figure>
<h4 id="message_attributes">Атрибуты сообщения</h4>
<p>На вкладке «<strong>Атрибуты сообщения</strong>» заполните таблицу соответствия атрибутов сообщения с атрибутами уведомления.</p>
<p>Настроенные на этой вкладке атрибуты будут использоваться для передачи данных из процесса в уведомление.</p>
<p>Эти атрибуты следует использовать на вкладке «<strong><a class="mkdocs_imported_link" href="#message_properties">Свойства сообщения</a></strong> » пути передачи данных,</p>
<p>Значения этих атрибутов необходимо задать на вкладке «<strong>Данные сообщения</strong> » в свойствах <strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4740">промежуточного события-отправки сообщения</a></strong> и <strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4745">конечного события-отправки сообщения</a></strong>.</p>
<p>Чтобы создать атрибут сообщения и сопоставить его с полем уведомления, нажмите кнопку «<strong>Создать</strong>» и заполните строку таблицы сопоставления:</p>
<ul>
<li><strong>Название</strong> — введите наглядное название атрибута.</li>
<li><strong>Системное имя</strong> — введите уникальное имя атрибута, оно будет использоваться в уведомления на вкладке «<strong>Свойства сообщения</strong>».</li>
<li>
<p><strong>Тип данных</strong> — выберите тип данных в соответствии с данными, которые в него будут передаваться из процесса:</p>
<ul>
<li><strong>Текст</strong></li>
<li><strong>Число</strong></li>
<li><strong>Длительность</strong></li>
<li><strong>Дата и время</strong></li>
<li><strong>Логический</strong></li>
<li>
<p><strong>Документ</strong></p>
</li>
<li>
<p><strong>Аккаунт</strong></p>
</li>
</ul>
</li>
</ul>
<p>Чтобы удалить атрибут, установите рядом с ним флажок, и нажмите кнопку «<strong>Удалить</strong>».</p>
<figure class="screenshot_with_caption">
<p><img alt="Настройка атрибутов сообщения в пути передачи данных для общих уведомлений" src="https://kb.comindware.ru/assets/common_notifications_attributes_setting.png"/></p>
<figcaption class="caption">Настройка атрибутов сообщения в пути передачи данных для общих уведомлений</figcaption>
</figure>
<h4 id="message_properties">Свойства сообщения</h4>
<p>На вкладке «<strong>Свойства сообщения</strong>» настройте шаблон уведомления с использованием атрибутов с вкладки «<strong>Атрибуты сообщения</strong>».**</p>
<ul>
<li>
<p><strong>Список атрибутов, которые можно использовать при написании эл. письма</strong> содержит настроенные <a class="mkdocs_imported_link" href="#message_attributes"><strong>атрибуты сообщения</strong></a>.</p>
<div class="notice notice-tip">
<p class="admonition-title">Подстановка значений атрибутов сообщения в уведомление</p>
<ul>
<li>Чтобы поместить значение атрибута сообщения в эл. письмо, введите его системное имя в фигурных скобках <code>{ }</code> в соответствующее поле письма.</li>
<li>В текстовые поля письма (адреса и имена отправителей и получателей, тема, текст сообщения, место встречи) можно вводить произвольный текст и несколько <strong>атрибутов сообщений</strong>.</li>
<li>
<p>Например, в поле «<strong>Заголовок</strong>» можно ввести строку:</p>
<div class="highlight"><code><code></code></code>
<pre><code>Уведомление «{Title}» от {Date} </code></pre>
</div>
<p>Здесь: <code>{Title}</code> — атрибут сообщения, содержащий название уведомления, а <code>{Date}</code> — дата формирования уведомления.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Электронное письмо</strong> — это шаблон, в полях которого следует ввести статические значения и системные имена <strong>атрибутов сообщения</strong>. В шаблоне уведомления предусмотрены перечисленные ниже поля.</p>
<ul>
<li><strong>Заголовок</strong> — введите тему письма или укажите <strong>атрибут сообщения</strong> типа «<strong>Текст</strong>», содержащий тему письма.</li>
<li><strong>Текст сообщения</strong> — введите текст письма или укажите <strong>атрибут сообщения</strong> типа «<strong>Текст</strong>», содержащий текст письма.</li>
<li><strong>Длительность</strong> — задайте длительность отображения уведомления.</li>
<li>
<p><strong>Важность</strong> — выберите уровень важности уведомления:</p>
<ul>
<li>Критический</li>
<li>Высокий</li>
<li>Обычный</li>
<li>Низкий</li>
</ul>
</li>
<li>
<p><strong>Внутреннее уведомление</strong> — установите этот флажок, чтобы уведомление отображалось только для авторизованных пользователей.</p>
</li>
</ul>
</li>
</ul>
<figure class="screenshot_with_caption">
<p><img alt="Настройка свойств сообщения для общего уведомления" src="https://kb.comindware.ru/assets/common_notifications_message_setting.png"/></p>
<figcaption class="caption">Настройка свойств сообщения для общего уведомления</figcaption>
</figure>
<h2 id="common_notification_example">Пример: вывод общих уведомлений в информационной панели и на странице входа</h2>
<p>Рассмотрим пример настройки приложения для вывода общих уведомлений с текстом, содержащим значения атрибутов.</p>
<p>Уведомления будут отображаться в информационной панели и на странице входа.</p>
<h3 id="настройка-приложения">Настройка приложения</h3>
<ol class="colored_numbers_list">
<li>Включите получение уведомлений в <a class="mkdocs_imported_link" href="#global_configuration_setting"><strong>Глобальной конфигурации</strong></a>.</li>
<li>Создайте шаблон процесса <em>«Отправка общих уведомлений»</em>.</li>
<li>Перейдите к <a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4721#process_diagram_designer">конструктору диаграммы процесса</a>.</li>
<li>Откройте <strong>стартовую форму</strong> начального события с помощью меню элемента.</li>
<li>
<p>С помощью панели элементов создайте и поместите на стартовую форму два атрибута типа «<strong>Текст</strong>» (см. <em>«<a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4786#form_designer">Редактирование формы. Создание атрибута</a>»</em>):</p>
<ul>
<li><em>Тема сообщения</em></li>
<li>
<p><em>Текст сообщения</em></p>
<p><img alt="Настройка стартовой формы процесса отправки общих уведомлений" src="https://kb.comindware.ru/assets/common_notifications_start_form_setting.png"/></p>
</li>
</ul>
</li>
<li>
<p>Сохраните стартовую форму.</p>
</li>
<li>Вернитесь к диаграмме процесса, нажав в браузере кнопку «<strong>Назад</strong>».</li>
<li>
<p>Добавьте на диаграмму процесса <strong>промежуточное событие-отправку сообщения</strong>.</p>
<figure class="screenshot_with_caption"><img alt="Событие отправка-сообщения на диаграмме процесса" src="https://kb.comindware.ru/assets/common_notifications_event_diagram.png"/>
<figcaption class="caption">Событие отправка-сообщения на диаграмме процесса</figcaption>
</figure>
</li>
<li>
<p>Откройте свойства события-отправки сообщения.</p>
</li>
<li>На вкладке «<strong>Дополнительные</strong>» в группе «<strong>Место назначения</strong>» выберите «<strong>Общее уведомление</strong>».</li>
<li>
<p>В раскрывающемся списке «<strong>Использовать путь передачи данных</strong>» создайте путь передачи данных типа «<strong>Общие уведомления</strong>».</p>
<figure class="screenshot_with_caption"><img alt="Настройка события-отправки сообщения для общих уведомлений" src="https://kb.comindware.ru/assets/common_notifications_event_setting.png"/>
<figcaption class="caption">Настройка события-отправки сообщения для общих уведомлений</figcaption>
</figure>
</li>
<li>
<p>Настройте путь передачи данных, как указано ниже. Подробные инструкции см. <em>«<a class="mkdocs_imported_link" href="#communication_routes_setting">Настройка пути передачи данных</a>»</em>.</p>
<ul>
<li>
<p><strong>Основные свойства</strong></p>
<ul>
<li><strong>Название:</strong> <em>Уведомление для пользователей</em></li>
<li><strong>Имя сообщения:</strong> <em>UserNotification</em></li>
</ul>
</li>
<li>
<p><strong>Атрибуты сообщения</strong></p>
<table style="width: 100%;">
<thead>
<tr>
<th> </th>
<th> </th>
<th> </th>
</tr>
</thead>
<tbody>
<tr>
<td>Название</td>
<td>Системное имя</td>
<td>Тип данных</td>
</tr>
<tr>
<td><em>Текст сообщения</em></td>
<td><em>body</em></td>
<td><strong>Текст</strong></td>
</tr>
<tr>
<td><em>Тема</em></td>
<td><em>subject</em></td>
<td><strong>Текст</strong></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><strong>Свойства сообщения</strong></p>
<ul>
<li><strong>Заголовок:</strong> <em>{subject}</em></li>
<li><strong>Текст сообщения:</strong> <em>{body}</em></li>
<li><strong>Длительность: 5 минут</strong></li>
<li><strong>Важность: Критический</strong></li>
</ul>
</li>
</ul>
<figure class="screenshot_with_caption"><img alt="Настройка свойств сообщения пути передачи общих уведомлений" src="https://kb.comindware.ru/assets/common_notifications_message_routes_setting.png"/>
<figcaption class="caption">Настройка свойств сообщения пути передачи общих уведомлений</figcaption>
</figure>
</li>
<li>
<p>Задайте значения атрибутов на вкладке «<strong>Данные сообщения</strong>». См. параграфы <em>«<a class="mkdocs_imported_link" href="#communication_routes_setting">Настройка пути передачи данных</a>»</em>.</p>
<figure class="screenshot_with_caption"><img alt="Настройка данных сообщения для отправки общих уведомлений" src="https://kb.comindware.ru/assets/common_notifications_message_data_setting.png"/>
<figcaption class="caption">Настройка данных сообщения для отправки общих уведомлений</figcaption>
</figure>
</li>
<li>
<p>Опубликуйте диаграмму процесса.</p>
</li>
</ol>
<h3 id="тестирование-уведомлений">Тестирование уведомлений</h3>
<ol class="colored_numbers_list">
<li>Откройте шаблон процесса <em>«Отправка общих уведомлений»</em>.</li>
<li>Нажмите кнопку «<strong>Перейти к экземплярам</strong>».</li>
<li>В списке экземпляров процесса нажмите кнопку «<strong>Создать</strong>».</li>
<li>Отобразится стартовая форма процесса.</li>
<li>Заполните поля <em>«Тема сообщения»</em> и <em>«Текст сообщения»</em>.</li>
<li>
<p>Нажмите кнопку «Создать».</p>
<figure class="screenshot_with_caption"><img alt="Заполнение стартовой формы для отправки общего уведомления" src="https://kb.comindware.ru/assets/common_notifications_start_form.png"/>
<figcaption class="caption">Заполнение стартовой формы для отправки общего уведомления</figcaption>
</figure>
</li>
<li>
<p>Нажмите значок «<strong>Уведомления</strong>» <em class="fa-light fa-bell">‌<!--icon--></em> в информационной панели, чтобы просмотреть уведомление.</p>
<figure class="screenshot_with_caption"><img alt="Просмотр уведомления в информационной панели" src="https://kb.comindware.ru/assets/common_notifications_message_view.png"/>
<figcaption class="caption">Просмотр уведомления в информационной панели</figcaption>
</figure>
</li>
<li>
<p>Выйдите из системы, чтобы просмотреть уведомление на странице входа.</p>
<figure class="screenshot_with_caption"><img alt="Критически важное уведомление на странице входа" src="https://kb.comindware.ru/assets/common_notifications_entry_page_urgent_message.png"/>
<figcaption class="caption">Критически важное уведомление на странице входа</figcaption>
</figure>
</li>
</ol>
<h2 id="связанные-статьи">Связанные статьи</h2>
<p><strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4668">Глобальная конфигурация</a></strong></p>
<p><strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4734">Простое начальное событие</a></strong></p>
<p><strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4745">Конечное событие-отправка сообщения</a></strong></p>
<p><strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4740">Промежуточное событие-отправка сообщения</a></strong></p>
<p><strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4786#form_designer">Редактирование формы. Создание атрибута</a></strong></p>
</article>
</div>
</div>
<a class="md-top md-icon mkdocs_imported_link" data-md-component="top" href="#"> <em class="fa-light fa-arrow-up">‌<!--icon--></em> К началу </a></div>
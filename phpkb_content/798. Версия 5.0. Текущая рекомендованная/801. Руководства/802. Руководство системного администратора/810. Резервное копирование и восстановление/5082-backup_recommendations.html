<h1>Резервное копирование и восстановление. Рекомендации по организации и оптимизации</h1><div class="md-body" data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="comindware" dir="ltr" kb-id="5082">
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<nav aria-label="Содержание" class="md-nav md-nav--secondary">
<div class="mce-toc">
<h2 class="toc-heading">
      Содержание
      </h2>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#введение">
<span class="md-ellipsis">
      Введение
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#общие-рекомендации">
<span class="md-ellipsis">
      Общие рекомендации
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#практики-которых-следует-избегать">
<span class="md-ellipsis">
      Практики, которых следует избегать
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#состав-частота-создания-и-срок-хранения-резервных-копий">
<span class="md-ellipsis">
      Состав, частота создания и срок хранения резервных копий
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#хранение-резервных-копий">
<span class="md-ellipsis">
      Хранение резервных копий
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#связанные-статьи">
<span class="md-ellipsis">
      Связанные статьи
    </span>
</a>
</li>
</ul>
</div>
</nav>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h2 id="введение">Введение</h2>
<p>Для обеспечения высокой доступности и отказоустойчивости <strong>Comindware Platform</strong>, включая снижение RTO (время восстановления после сбоя) и RPO (допустимый объём потерянных данных после сбоя) важно надлежащим образом организовать резервное копирование.</p>
<p>Здесь представлены рекомендации по техническим и организационным мерам, позволяющим обеспечить высокую доступность и отказоустойчивость <strong>Comindware Platform</strong>, непрерывность бизнес-процессов, оптимизировать показатели RPO и RTO и снизить риски потери данных.</p>
<p>Инструкции по настройке резервного копирования встроенными средствами <strong>Comindware Platform</strong> см. в статье <em>«<a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4642">Резервное копирование. Настройка, запуск и просмотр журнала сеансов</a>»</em>.</p>
<h2 id="общие-рекомендации">Общие рекомендации</h2>
<ul>
<li><strong>Проведите анализ влияния на бизнес (BIA)</strong><ul>
<li><strong>Оценка критичности процессов, приложений и данных:</strong> определите наиболее важные бизнес-функции, приложения и данные. Оцените потенциальное воздействие их сбоя и установите порядок их восстановления.</li>
<li><strong>Приоритизация:</strong> классифицируйте процессы, приложения и данные по их важности, чтобы эффективно распределять ресурсы в случае восстановления.</li>
</ul>
</li>
<li><strong>Определите целевые показатели RTO и RPO</strong><ul>
<li><strong>RTO (целевое время восстановления):</strong> установите максимально допустимое время простоя после сбоя для каждого критически важного процесса.</li>
<li><strong>RPO (допустимый объём потерянных данных):</strong> определите максимально допустимый объём потерь данных, чтобы установить частоту резервного копирования.</li>
<li><strong>Экономическое обоснование:</strong> следует учитывать, что чем меньше RTO и RPO, тем больше затраты на достижение этих показателей. Поэтому целевые показатели необходимо обосновать не только с технической, но и с экономической точки зрения с привлечением бизнес-руководителей.</li>
</ul>
</li>
<li><strong>Реализуйте надёжную стратегию резервного копирования и восстановления</strong><ul>
<li><strong>Регулярное резервное копирование:</strong> настройте резервное копирование с частотой, необходимой для достижения целевого показателя RPO.</li>
<li><strong>Избыточность хранилищ:</strong> используйте комбинацию локальных и удалённых хранилищ для защиты от различных сбоев для достижения целевых показателей RTO и RPO.</li>
<li><strong>Многоуровневое восстановление:</strong> разработайте подход с многоуровневым восстановлением, начиная с самых важных компонентов.</li>
</ul>
</li>
<li><strong>Используйте резервирование и механизмы отказоустойчивости</strong><ul>
<li><strong>Резервирование:</strong> разверните резервные компоненты, чтобы обеспечить непрерывную доступность при их отказе.</li>
<li><strong>Автоматическое переключение:</strong> реализуйте автоматическое переключение на резервные компоненты для сокращения времени простоя и соблюдения RTO.</li>
<li><strong>Использование вспомогательных технологий</strong>: при необходимости используйте контейнеризацию и оркестрацию контейнеров (например, Docker и Kubernetes).</li>
</ul>
</li>
<li><strong>Автоматизируйте задачи</strong><ul>
<li><strong>Скрипты процедур:</strong> разработайте скрипты для автоматизации задач резервного копирования и восстановления, чтобы минимизировать ошибки и обеспечить целевой показатель RTO.</li>
<li><strong>Мониторинг и оповещения:</strong> внедрите инструменты мониторинга (например, Zabbix) для отслеживания состояния всех компонентов системы, оперативного выявления сбоев, автоматического реагирования и превентивного уведомления администраторов о возможных проблемах.</li>
</ul>
</li>
<li><strong>Регулярно проводите тестирование и проверку плана восстановления</strong><ul>
<li><strong>Плановые учения:</strong> проводите регулярные учения по восстановлению после сбоев, чтобы выявлять слабые места и области для улучшения. В том числе проверяйте целостность резервных копий и возможность восстановления системы из них.</li>
<li><strong>Актуализация плана:</strong> пересматривайте план восстановления на основе результатов тестов и изменяющихся бизнес-требований.</li>
</ul>
</li>
<li><strong>Обеспечьте соответствие отраслевым стандартам</strong><ul>
<li><strong>Соблюдение требований:</strong> согласуйте целевые показатели RTO и RPO с действующими отраслевыми стандартами и нормативами.</li>
<li><strong>Документирование:</strong> подробно документируйте процессы резервного копирования и восстановления. Это позволит администраторам соблюдать установленные регламенты, а также подтвердить соответствие нормативным требованиям.</li>
</ul>
</li>
<li><strong>Улучшайте методологию и инструменты</strong><ul>
<li><strong>Актуализация подходов:</strong> следите за новыми технологиями и рисками и по необходимости обновляйте стратегии резервного копирования и восстановления.</li>
<li><strong>Обратная связь:</strong> собирайте обратную связь от заинтересованных сторон для выявления возможностей улучшения.</li>
</ul>
</li>
</ul>
<h2 id="практики-которых-следует-избегать">Практики, которых следует избегать</h2>
<ul>
<li><strong>Отсутствие регулярного автоматического резервного копирования</strong>:<ul>
<li>Это может привести к к нерегулярному созданию резервных копий и значительным потерям данных в случае сбоя.</li>
</ul>
</li>
<li><strong>Хранение резервных копий не в отдельном хранилище</strong>:<ul>
<li>В случае отказа этого носителя все резервные копии будут потеряны.</li>
</ul>
</li>
</ul>
<h2 id="состав-частота-создания-и-срок-хранения-резервных-копий">Состав, частота создания и срок хранения резервных копий</h2>
<p>Для обеспечения оперативного и наиболее полного восстановления данных рекомендуется применять следующие способы резервного копирования:</p>
<ul>
<li><strong>Репликация — непрерывно</strong>:<ul>
<li>Репликация данных средствами Apache Ignite, Elasticsearch, Apache Kafka и файловой системы NFS, развёрнутых в отказоустойчивой конфигурации (с зеркалированием).</li>
<li>Это обеспечивает высокую доступность и сводит к минимуму риск простоев системы.</li>
</ul>
</li>
<li><strong>Создание снимков виртуальных машин — раз в неделю</strong>:<ul>
<li>Резервное копирование образа всего развёрнутого ПО средствами виртуализации.</li>
<li>Рекомендуется сохранять снимок перед любыми изменениями в системе, такими как обновления или изменения конфигурации.</li>
<li>Срок хранения резервных копий: не менее трёх месяцев.</li>
<li>Это позволяет быстро восстановить систему в случае критического сбоя.</li>
</ul>
</li>
<li><strong>Полное резервное копирование экземпляра ПО — не реже двух раз в неделю</strong>:<ul>
<li>Создание полной резервной копии в формате <code>.CDBBZ</code> встроенными средствами ПО.</li>
<li>Резервная копия должна содержать базу данных, скрипты, прикреплённые файлы и историю операций.</li>
<li>Рекомендуется хранить такие резервные копии во внешнем репозитории или на отдельном диске для дополнительной защиты.</li>
<li>Срок хранения резервных копий: не менее двух недель.</li>
<li>Это обеспечивает полное восстановление экземпляра ПО.</li>
</ul>
</li>
<li><strong>Резервное копирование базы данных — не реже раза в день</strong>:<ul>
<li>Создание резервной копии базы данных в формате <code>.CDBBZ</code> встроенными средствами ПО.</li>
<li>Срок хранения резервных копий: не менее недели.</li>
<li>Рекомендуется настроить два правила резервного копирования:<ul>
<li>с интервалом не реже раза в день и сроком хранения не менее 10 рабочих дней (2 недели);</li>
<li>с интервалом не реже двух раз в день и сроком хранения не менее 5 рабочих дней (1 неделя).</li>
</ul>
</li>
<li>Это позволяет минимизировать потери данных в случае сбоя.</li>
</ul>
</li>
<li><strong>Резервное копирование данных Elasticsearch — не реже раза в день</strong>:<ul>
<li>Резервное копирование каждого индекса Elasticsearch следует выполнять вместе с резервным копированием базы данных.</li>
<li>Это обеспечивает актуальность данных в репозитории и позволяет быстро восстановить индексы в случае сбоя.</li>
<li>См. <em>«<a class="mkdocs_imported_link" href="#настройка-резервного-копирования-данных-elasticsearch">Настройка резервного копирования данных Elasticsearch</a>»</em>.</li>
</ul>
</li>
</ul>
<h2 id="хранение-резервных-копий">Хранение резервных копий</h2>
<p>Для повышения надёжности и минимизации потери данных резервные копии следует помещать одновременно в два хранилища:</p>
<ul>
<li><strong>На машине — на выделенном диске</strong>:<ul>
<li>Используйте отдельный диск для хранения резервных копий.</li>
<li>Это позволяет избежать потери данных при сбое основного диска.</li>
</ul>
</li>
<li><strong>Во внешнем репозитории</strong>:<ul>
<li>Храните копии во внешнем репозитории для дополнительной защиты данных.</li>
<li>Это позволяет восстановить систему в случае катастрофического сбоя.</li>
</ul>
</li>
</ul>
<p>Дополнительные инструкции по резервному копированию и восстановлению данных встроенными и внешними средствами см. в разделе <em>«<a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4643">Резервное копирование и восстановление</a>»</em> базы знаний Comindware.</p>
<div class="relatedTopics">
<h2 id="связанные-статьи">Связанные статьи</h2>
<ul>
<li>
<p><em><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4643">Резервное копирование и восстановление</a></em></p>
</li>
<li>
<p><em><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4642">Резервное копирование. Настройка, запуск и просмотр журнала сеансов</a></em></p>
</li>
<li><em><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4677">Хранилище S3. Настройка экземпляра ПО и подключения</a></em></li>
<li><em><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4647">Восстановление базы данных из файла резервной копии в формате .CDBBZ</a></em></li>
</ul>
</div>
</article>
</div>
</div>
<a class="md-top md-icon mkdocs_imported_link" data-md-component="top" href="#">
<i class="fa-light fa-arrow-up">‌<!--icon--></i>
            К началу
          </a>
</main>
</div>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": true, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></div>
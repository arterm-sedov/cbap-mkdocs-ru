---
title: Установка, запуск, инициализация и остановка Comindware Platform
kbId: 5063
---

# Установка, запуск, инициализация и остановка {{ productName }}

## Введение

Для быстрого развёртывания **{{ productName }}** в Windows компания **Comindware** предоставляет дистрибутив с установщиком, настраивающим необходимое программное обеспечение.

Здесь представлены инструкции по развёртыванию и инициализации **{{ productName }}** из дистрибутива в ОС Windows.

## Требования к серверу

Для работы **{{ productName }}** требуются операционная система, сервер базы данных, веб-сервер, обратный прокси-сервер и сервер журналирования.

Перед установкой ПО убедитесь, что сервер соответствует следующим требованиям:

- сервер работает под управлением *Windows Server*;
- сервер настраивается от имени пользователя с правами администратора;
- установлена служба *IIS (Internet Information Services)*.

Конфигурация сервера журналирования (Elasticsearch, OpenSearch)

- В конфигурации Elasticsearch (OpenSearch) необходимо создать одного пользователя для **{{ productName }}**.
- В конфигурации экземпляра ПО необходимо указать адрес сервера и уникальный префикс индексов Elasticsearch (OpenSearch). Индекс префикса служит для идентификации данных экземпляра ПО в Elasticsearch (OpenSearch). Поэтому во избежание конфликтов данных для каждого экземпляра ПО следует указывать собственный префикс индекса.
- При [инициализации экземпляра ПО](#initialize_instance) необходимо указать пользователя **{{ productName }}**, используемого в Elasticsearch (OpenSearch).
- Экземпляр ПО будет взаимодействовать с Elasticsearch (OpenSearch) под указанным пользователем и создавать, наполнять и читать индексы с заданным префиксом.

## Порядок установки ПО

1. Подготовьте сервер к установке ПО.
2. Установите и настройте необходимое вспомогательное ПО.
3. Установите ПО **{{ productName }}**.
4. Создайте экземпляр ПО.
5. Запустите экземпляр ПО.
6. Инициализируйте экземпляр ПО.

## Подготовка сервера к установке ПО

1. Откройте **Диспетчер сервера**.
2. Добавьте в список серверов компьютер, на котором будет установлено ПО **{{ productName }}**.
3. Запустите **Мастер добавления ролей и компонентов**, выбрав пункт «**Добавить роли и компоненты**» для данного сервера.
4. На шаге «**Тип установки**» выберите пункт «**Установка ролей или компонентов**».
5. На шаге «**Выбор сервера**» укажите сервер, на котором будет установлено ПО.
6. На шаге «**Роли сервера**» установите флажок «**Веб-сервер (IIS)**».
7. На шаге «**Компоненты**» для компонента «**Веб-сервер (IIS)** — **Веб-сервер** — **Разработка приложений**» установите следующие флажки:

    - **ASP.NET 4.8** (или выше);
    - **Расширяемость .NET 4.8** (или выше);
    - **Расширения ISAPI**;
    - **Фильтры ISAPI**.
8. На шаге «**Подтверждение**» нажмите кнопку «**Установить**» и дождитесь завершения процесса.

## Установка вспомогательного ПО

1. Скачайте и распакуйте архив с дистрибутивом вспомогательного ПО для **{{ productName }}**.
2. Запустите *PowerShell* от имени администратора.
3. Установите неограниченную политику выполнения *PowerShell*:

````
Set-ExecutionPolicy Unrestricted

````
4. В запросе на изменение политики выберите вариант «**Да для всех**», введя букву `A`.
5. Перейдите в папку со скриптами для развёртывания вспомогательного ПО:

````
cd "X:\\<distPath>\\X.X-release-ru-<versionNumber>.prerequisites.windows\\CMW_Windows\\scripts"

````
Здесь: `X:\\<distPath>\\X.X-release-ru-<versionNumber>.prerequisites.windows` — путь к распакованному дистрибутиву вспомогательного ПО, а `<versionNumber>` — номер версии ПО.
6. Разблокируйте доступ к скачанным из Интернета установочным файлам:

````
.\\files_unblock.ps1

````

Вызов справки для скриптов

Для ознакомления с ключами и назначением любого скрипта используйте ключ `-h` без каких-либо других ключей, например:

````
.\\files_unblock.ps1 -h

````
7. Установите необходимое вспомогательное ПО:

````
.\\prerequisites_install.ps1

````
8. Перезагрузите машину.
9. Запустите *PowerShell* от имени администратора.
10. Перейдите в папку со скриптами для развёртывания вспомогательного ПО:

````
cd "X:\\<distPath>\\X.X-release-ru-<versionNumber>.prerequisites.windows\\CMW_Windows\\scripts"

````
11. Проверьте, что дополнительные компоненты установлены:

````
.\\prerequisites_list.ps1

````
Если какие-либо дополнительные компоненты не были установлены, повторите шаги 8–12.

## Установка {{ productName }}

1. Скачайте и распакуйте архив с дистрибутивом **{{ productName }}**.
2. Запустите *PowerShell* от имени администратора.
3. Установите неограниченную политику выполнения *PowerShell*:

````
Set-ExecutionPolicy Unrestricted

````
4. В запросе на изменение политики выберите вариант «**Да для всех**», введя букву `A`.
5. Перейдите в папку со скриптами для развёртывания ПО **{{ productName }}**:

````
cd "X:\\<distPath>\\X.X-release-ru-<versionNumber>.windows\\CMW_Windows\\scripts"

````
Здесь: `X:\\<distPath>\\X.X-release-ru-<versionNumber>.windows` — путь к распакованному дистрибутиву продукта, а `<versionNumber>` — номер версии ПО.
6. Разблокируйте доступ к скачанным из Интернета установочным файлам:

````
.\\files_unblock.ps1

````

Вызов справки для скриптов

Для ознакомления с ключами и назначением любого скрипта используйте ключ `-h` без каких-либо других ключей, например:

````
.\\files_unblock.ps1 -h

````
7. Установите версию ПО:

````
.\\version_install.ps1

````
8. Удостоверьтесь, что ПО установлено, вызывав список установленных версий ПО:

````
.\\version_list.ps1

````

## Создание экземпляра ПО

1. Перейдите в папку со скриптами для развёртывания ПО **{{ productName }}**:

````
cd "X:\\<distPath>\\X.X-release-ru-<versionNumber>.windows\\CMW_Windows\\scripts"

````
2. Разверните экземпляр ПО:

````
.\\instance_create.ps1 -name <instanceName> -port <portNumber> -version <versionNumber>

````
Скрипт `instance_create.ps1` поддерживает следующие ключи:

    - `name <instanceName>` — **обязательный** ключ с именем экземпляра ПО.
    - `port <portNumber>` — порт для экземпляра ПО, по умолчанию: 80 (необязательный ключ).
    - `version <versionNumber>` — развернуть ПО указанной версии вида `X.X.XXXX.X` (например: `5.0.1234.0`) из папки вида `C:\\Program Files\\Comindware\\CBAP\\<versionNumber>`.
    - `versionPath <versionPath>` — развернуть ПО из указанной папки `<versionPath>` с версией ПО.
    - `demoDB` — создать экземпляр ПО **{{ productName }}** c демонстрационной базой данных.
    - `fqdn <hostName>` — имя хоста для экземпляра ПО (необязательный ключ). По умолчанию: `localhost`.
    - `h` — вызвать справку по использованию скрипта (этот ключ следует указывать только без остальных ключей).
Обязательные ключи для скриптов

Если не указать обязательный ключ для любого скрипта, он запросит его после запуска.

## Запуск экземпляра ПО

1. Перейдите в папку со скриптами для развёртывания ПО **{{ productName }}**:

````
cd "X:\\<distPath>\\X.X-release-ru-<versionNumber>.windows\\CMW_Windows\\scripts"

````
2. Запустите экземпляр ПО:

````
.\\instance_start.ps1 -name <instanceName>

````
Здесь: `name <instanceName>` — **обязательный** ключ с именем экземпляра ПО.

## Остановка экземпляра ПО

1. Перейдите в папку со скриптами для развёртывания ПО **{{ productName }}**:

````
cd "X:\\<distPath>\\X.X-release-ru-<versionNumber>.windows\\CMW_Windows\\scripts"

````
2. Остановите экземпляр ПО:

````
.\\instance_stop.ps1 -name <instanceName>

````
Здесь: `-name <instanceName>` — **обязательный** ключ с именем экземпляра ПО.

## Инициализация {{ productName }}

1. Запустите веб-браузер и в адресной строке введите URL-адрес, на котором был развёрнут экземпляр ПО:

````
http://<instanceHost>:<portNumber>

````
2. Дождитесь запуска и отображения веб-сайта **{{ productName }}**, что может занять примерно 5 минут.
3. Откроется страница создания аккаунта администратора **{{ productName }}**.

_![Страница создания аккаунта администратора](/platform/v5.0/administration/deploy/windows/../linux/img/deploy_guide_admin_account_create.png)_
4. Введите учётные данные аккаунта администратора и нажмите кнопку «**Создать аккаунт**».

Внимание!

    - В экземпляре ПО всегда должен оставаться хотя бы один аккаунт администратора. Он может потребоваться для восстановления системы.
    - Аккаунт администратора, созданный при инициализации экземпляра ПО, не следует удалять, даже если впоследствии аккаунты будут синхронизироваться с Active Directory.
5. При необходимости откроется страница инициализации служб. Выберите службы, которые должны быть запущены, и нажмите кнопку «**Далее**».

_![Страница инициализации служб](/platform/v5.0/administration/deploy/windows/../linux/img/deploy_guide_system_initialize.png)_
6. При необходимости откроется страница активации ПО. Выполните **онлайн-** или **ручную активацию** либо нажмите кнопку «**Пропустить**» для первоначального ознакомления с ПО без активации.
7. При необходимости откроется страница настройки подключения к службе Elasticsearch (OpenSearch).

    - В поле «**URI**» введите адрес сервера Elasticsearch (OpenSearch), например: `http://localhost:9200`.
    - При необходимости введите **имя пользователя** и **пароль** Elasticsearch (OpenSearch).
    - Установите уникальный **префикс индекса**, например `mycompanyprefix`.
    - Экземпляр ПО будет взаимодействовать с Elasticsearch (OpenSearch) под указанным пользователем и создавать, наполнять и читать индексы с заданным префиксом.
    - Нажмите кнопку «**Далее**».
8. При необходимости откроется страница инициализации данных в Elasticsearch (OpenSearch).

_![Страница инициализации данных в Elasticsearch](/platform/v5.0/administration/deploy/windows/../linux/img/deploy_guide_elasticsearch_initialize.png)_
9. Нажмите кнопку «**Обновить**».
10. Дождитесь открытия начальной страницы **{{ productName }}**.
11. На этом этапе развертывание экземпляра **{{ productName }}** завершено и можно приступать к созданию и использованию приложений.

## Обновление экземпляра ПО

1. Скачайте и установите ПО новой версии согласно инструкциям в параграфе *«[Установка {{ productName }}](#deploy_guide_windows_install_sw)»*.
2. Перейдите в папку со скриптами для развёртывания ПО **{{ productName }}**:

````
cd "X:\\<distPath>\\X.X-release-ru-<versionNumber>.windows\\CMW_Windows\\scripts"

````
3. Запустите обновление экземпляра ПО:

````
.\\instance_upgrade.ps1 -name <instanceName> -version <versionNumber>

````
Скрипт `instance_upgrade.ps1` поддерживает следующие ключи:

    - `name <instanceName>` — **обязательный** ключ с именем экземпляра ПО.
    - `version <versionNumber>` — обновить экземпляр ПО до указанной версии вида `X.X.XXXX.X` (например: `5.0.1234.0`) из папки вида `C:\\Program Files\\Comindware\\CBAP\\<versionNumber>`.
    - `versionPath <versionPath>` — обновить экземпляр ПО до версии из указанной папки `<versionPath>`.
    - `h` — вызвать справку по использованию скрипта (этот ключ следует указывать только без остальных ключей).
4. Просмотрите список установленных экземпляров ПО:

````
.\\instance_list.ps1

````
5. Рядом с именем экземпляра ПО отобразится номер версии.

## Удаление экземпляра ПО

1. Перейдите в папку со скриптами для развёртывания ПО **{{ productName }}**:

````
cd "X:\\<distPath>\\X.X-release-ru-<versionNumber>.windows\\CMW_Windows\\scripts"

````
2. Удалите экземпляр ПО:

````
.\\instance_delete.ps1 -name <instanceName>

````
Скрипт `instance_delete.ps1` поддерживает следующие ключи:

    - `name <instanceName>` — **обязательный** ключ с именем экземпляра ПО. Если не указать другие ключи, будет удалена только служба `comindware<instanceName>`.
    - `deleteData` — удалить базу данных из папки вида `C:\\ProgramData\\Comindware\\Instances\\<instanceName>\\Data` и пользовательские файлы экземпляра ПО из папки вида `C:\\ProgramData\\Comindware\\Instances\\<instanceName>\\Streams`. Без указания этого ключа или ключа `clear` база данных экземпляра ПО не будет удалена.
    - `clear` — удалить все файлы, папки, базу данных и пользовательские файлы вместе с папкой вида `C:\\ProgramData\\Comindware\\Instances\\<instanceName>`, а также службы экземпляра ПО, сайт и пул приложения из IIS.

## Удаление версии ПО

1. Перейдите в папку со скриптами для развёртывания ПО **{{ productName }}**:

````
cd "X:\\<distPath>\\X.X-release-ru-<versionNumber>.windows\\CMW_Windows\\scripts"

````
2. Просмотрите список установленных экземпляров ПО:

````
.\\instance_list.ps1

````
3. Удалите все экземпляры с версией ПО, которую требуется удалить, или обновите их до другой версии. Удалить версию ПО, которая используется в каких-либо экземплярах, не удастся. См. *«[Удаление экземпляра ПО](#удаление-экземпляра-по)»*.
4. Удалите версию ПО:

````
.\\version_delete.ps1 -version <versionNumber>

````
Здесь: `-version <versionNumber>` — указать номер версии ПО вида `X.X.XXXX.X` (например: `5.0.1234.0`).

--8<-- "related_topics_heading.md"

- *[Пути и содержимое директорий экземпляра ПО][paths]*

[*‌*
 К началу](#)

{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}

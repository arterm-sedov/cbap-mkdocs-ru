<h1>Развёртывание Comindware Platform. Архитектура, ландшафт, программное и техническое обеспечение</h1><div class="md-body" data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="comindware" dir="ltr" kb-id="4596" kb-tags="" kb-title="Развёртывание Comindware Platform. Архитектура, ландшафт, программное и техническое обеспечение">
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<nav aria-label="Содержание" class="md-nav md-nav--secondary">
<div class="mce-toc">
<h2 class="toc-heading">
      Содержание
      </h2>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#architecture_landscape_intro">
<span class="md-ellipsis">
      Введение
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#architecture_landscape_system_architecture">
<span class="md-ellipsis">
      Архитектура Системы
    </span>
</a>
<nav aria-label="Архитектура Системы" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#architecture_landscape_security_reliability">
<span class="md-ellipsis">
      Безопасность и отказоустойчивость Системы
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#architecture_landscape_external_integration">
<span class="md-ellipsis">
      Интеграция с внешними системами
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#architecture_landscape_deployment_landscape">
<span class="md-ellipsis">
      Ландшафт развертывания Системы
    </span>
</a>
<nav aria-label="Ландшафт развертывания Системы" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#architecture_landscape_deployment_options">
<span class="md-ellipsis">
      Рекомендуемые варианты развертывания Системы
    </span>
</a>
<nav aria-label="Рекомендуемые варианты развертывания Системы" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#architecture_landscape_minimal_configuration">
<span class="md-ellipsis">
      Минимальная конфигурация
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#architecture_landscape_production_configuration">
<span class="md-ellipsis">
      Продуктовая конфигурация
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#architecture_landscape_application_servers">
<span class="md-ellipsis">
      Рекомендуемый набор серверов приложений
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#architecture_landscape_subsystems_configuration">
<span class="md-ellipsis">
      Конфигурация подсистем
    </span>
</a>
<nav aria-label="Конфигурация подсистем" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#architecture_landscape_distributed_db_configuration">
<span class="md-ellipsis">
      Конфигурация сервера распределённой СУБД
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#architecture_landscape_transaction_logging_configuration">
<span class="md-ellipsis">
      Конфигурация сервера журналирования транзакций
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#architecture_landscape_reverse_proxy_configuration">
<span class="md-ellipsis">
      Конфигурация обратного прокси-сервера
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#architecture_landscape_monitoring_server_configuration">
<span class="md-ellipsis">
      Конфигурация сервера Zabbix
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#связанные-статьи">
<span class="md-ellipsis">
      Связанные статьи
    </span>
</a>
</li>
</ul>
</div>
</nav>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h2 id="architecture_landscape_intro">Введение</h2>
<p><strong>Comindware Platform</strong> представляет собой целостный программный комплекс на базе стека современных технологий.</p>
<p>Здесь представлено краткое описание архитектуры <strong>Comindware Platform</strong>, а также даны рекомендации по выбору ландшафта и конфигурации программного и аппаратного (технического) обеспечения для развёртывания Системы на основе <strong>Comindware Platform</strong>.</p>
<div class="notice notice-success">
<p class="admonition-title">Определения</p>
<ul>
<li><strong>Сервер приложений</strong> — установленный экземпляр ПО <strong>Comindware Platform</strong>.</li>
<li><strong>Приложение</strong> — обособленное бизнес-решение, реализованное на сервере приложений.</li>
<li><strong>Активные пользователи</strong> — пользователи, регулярно генерирующие данные на сервере приложений.</li>
<li><strong>DAS</strong> — запоминающее устройство, непосредственно подключенное к серверу приложений.</li>
<li><strong>SAN</strong> — сетевая система хранения (СХД, сеть хранения данных).</li>
<li><strong>IOPS</strong> — количество операций ввода-вывода в секунду.</li>
</ul>
</div>
<h2 id="architecture_landscape_system_architecture">Архитектура Системы</h2>
<p>В основе Системы лежит клиент-серверная компонентно-многослойная сервисно-ориентированная архитектура, расширяемая плагинами и адаптерами.</p>
<p>В состав Системы входят следующие компоненты:</p>
<ul>
<li><em>Веб-приложение</em>: одностраничное приложение (SPA) на основе Marionette, Backbone, React, Redux.</li>
<li><em>Мобильное приложение</em>: React Native on Expo.</li>
<li><em>Бэкенд</em>: компоненты-сервисы на основе .NET 8.0,  JRE 17, Mono 6.12 (Linux), .NET Framework 4.8 (Windows).</li>
<li><em>СУБД</em>: фирменная патентованная СУБД <strong>Comindware ElasticData</strong></li>
<li><em>Хранилище данных</em>: распределённая высокопроизводительная СУБД Apache Ignite.</li>
<li><em>Сервис журналирования транзакций</em>: OpenSearch (Elasticsearch).</li>
<li><em>Сервис сбора и анализа журналов и данных мониторинга Системы</em>: Zabbix, OpenSearch (Elasticsearch), Kibana (OpenSearch Dashboards).</li>
<li><em>Сервис файловых журналов</em>: NLog.</li>
<li><em>Модули для интеграции</em>: см. <em>«<a class="mkdocs_imported_link" href="#architecture_landscape_external_integration">Интеграция с внешними системами</a>»</em>.</li>
</ul>
<div class="notice notice-warning">
<p class="admonition-title">Внимание!</p>
<p>Если продуктовый контур <strong>Comindware Platform</strong> изолирован внешним межсетевым экраном, необходимо настроить правила фильтрации для разрешения входящего трафика HTTP/HTTPS и WS/WSS в контур <strong>Comindware Platform</strong>.</p>
</div>
<p>См. <em><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4582">Перечень стороннего ПО, входящего в состав и необходимого для работы Системы</a></em>.</p>
<figure class="screenshot_with_caption">
<p><img alt="Диаграмма архитектуры Comindware Platform" src="https://kb.comindware.ru/assets/Picture1.png"/><figcaption class="caption">Диаграмма архитектуры Comindware Platform</figcaption></p>
</figure>
<h3 class="pageBreakBefore" id="architecture_landscape_security_reliability">Безопасность и отказоустойчивость Системы</h3>
<p>В Системе предусмотрены следующие механизмы обеспечения безопасности и отказоустойчивости:</p>
<ul>
<li>Внешняя безопасность — реализуется посредством:<ul>
<li>механизма аутентификации пользователей Kerberos и OpenID;</li>
<li>сетевого экрана;</li>
<li>обратного прокси-сервера.</li>
</ul>
</li>
<li>Внутренняя безопасность — реализуется посредством ролевой модели безопасности.</li>
<li>Отказоустойчивость — реализуется посредством использованием резервных серверов и дополнительных узлов хранения и обработки данных.</li>
<li>Масштабируемость — реализуется посредством увеличения количества серверов, обрабатывающих запросы.</li>
</ul>
<p>См. <em>«<a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4660">Безопасность</a>»</em>.</p>
<h3 id="architecture_landscape_external_integration">Интеграция с внешними системами</h3>
<p>Предусмотрены следующие механизмы интеграции с внешними системами:</p>
<ul>
<li>Git — контроль версий приложений, создаваемых с помощью Системы.</li>
<li>OData — обмен данными с внешними системами посредством REST API.</li>
<li>OpenLDAP (Active Directory) — аутентификация, управление аккаунтами и единый вход.</li>
<li>SMTP/IMAP/Exchange — получение и отправка электронных писем.</li>
<li>ESB (Apache Kafka / RabbitMQ / MSMQ) — обмен сообщениями с внешними системами в распределенных и федеративных конфигурациях.</li>
</ul>
<p>См. <em>«<a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4675">Подключения</a>»</em>.</p>
<h2 class="pageBreakBefore" id="architecture_landscape_deployment_landscape">Ландшафт развертывания Системы</h2>
<p>Для достижения бесперебойной работы Систему необходимо развернуть в окружении, обеспечивающем достаточную производительность и отказоустойчивость.</p>
<p>Систему можно развернуть для доступа через интернет и интранет:</p>
<ul>
<li><em>в минимальной конфигурации</em> — на одной виртуальной или физической машине заказчика.</li>
<li><em>в продуктовой конфигурации</em>— на мощностях заказчика в отказоустойчивой конфигурации в соответствии с требованиями заказчика.</li>
</ul>
<h3 id="architecture_landscape_deployment_options">Рекомендуемые варианты развертывания Системы</h3>
<h4 class="pageBreakBefore" id="architecture_landscape_minimal_configuration">Минимальная конфигурация</h4>
<p>Компоненты типовой минимальная конфигурации Системы, предназначенной для демонстраций и реализации пилотных проектов:</p>
<ul>
<li><em><strong>Comindware Platform</strong></em>: установленный экземпляр ПО.</li>
<li><em>СУБД</em> <em>Comindware ElasticData</em>.</li>
<li><em>Сервер журналирования транзакций OpenSearch (Elasticsearch)</em> — в конфигурации с одним узлом.</li>
</ul>
<figure class="screenshot_with_caption">
<p><img alt="Минимальная конфигурация Системы" src="https://kb.comindware.ru/assets/Picture2_2.png"/><figcaption class="caption">Минимальная конфигурация Системы</figcaption></p>
</figure>
<h4 id="architecture_landscape_production_configuration">Продуктовая конфигурация</h4>
<p>Компоненты типовой продуктовой конфигурации, обеспечивающей дублирование и резервирование ресурсов, а также отказоустойчивость Системы:</p>
<ul>
<li><em><strong>Comindware Platform</strong></em>: установленный экземпляр ПО.</li>
<li><em>СУБД Comindware ElasticData</em>.</li>
<li><em>Сервер OpenSearch (Elasticsearch)</em> для журналирования транзакций.</li>
<li><em>Обратный прокси-сервер NGINX</em> для фильтрации нежелательных запросов и ретрансляции допустимых запросов во внутреннюю сеть.</li>
<li><em>Сервер мониторинга Zabbix</em> для мониторинга доступности служб и свободного пространства на дисках.</li>
<li><em>Сервер  SMTP/IMAP/Exchange</em> (необязательно) для передачи уведомлений.</li>
<li><em>Сервер LDAP</em> (необязательно) для централизованного управления инфраструктурой сети.</li>
<li><em>Сервер Git</em> (необязательно) для контроля версий приложений, создаваемых с помощью <strong>Comindware Platform</strong>.</li>
</ul>
<figure class="screenshot_with_caption">
<p><img alt="Продуктовая конфигурация: ландшафт подсистем" src="https://kb.comindware.ru/assets/Picture3_3.png"/><figcaption class="caption">Продуктовая конфигурация: ландшафт подсистем</figcaption></p>
</figure>
<p>Продуктовое использование накладывает требования на следующие характеристики Системы:</p>
<ul>
<li><em>безопасность</em> — реализуется за счет настройки сетевого экрана и обратного прокси-сервера;</li>
<li><em>отказоустойчивость</em> — реализуется за счет использования резервных серверов и дополнительных узлов на серверах, хранящих данные;</li>
<li><em>масштабируемость</em> — реализуется за счет добавления дополнительных серверов, обрабатывающих запросы.</li>
</ul>
<figure class="screenshot_with_caption">
<p><img alt="Типовой ландшафт сервисов в составе Системы" src="https://kb.comindware.ru/assets/Picture4_4.png"/><figcaption class="caption">Типовой ландшафт сервисов в составе Системы</figcaption></p>
</figure>
<h3 class="pageBreakBefore" id="architecture_landscape_application_servers">Рекомендуемый набор серверов приложений</h3>
<p>Для повышения эффективности разработки и тестирования приложений, а также отказоустойчивости и безопасности эксплуатации приложений рекомендуется развернуть несколько серверов приложений (необходимость использования каждого из этих серверов определяется при составлении технических требований):</p>
<ul>
<li><em>сервер разработки</em> (development), на котором осуществляется разработка приложений;</li>
<li><em>сервер тестирования</em> (pre-production), на котором осуществляется тестирование приложений;</li>
<li><em>основной сервер</em> (production), на котором осуществляется эксплуатация приложений;</li>
<li><em>резервный сервер</em> (standby), который используется в случае перегрузки или выхода из строя основного сервера.</li>
</ul>
<h2 class="pageBreakBefore" id="architecture_landscape_subsystems_configuration">Конфигурация подсистем</h2>
<h3 id="architecture_landscape_distributed_db_configuration">Конфигурация сервера распределённой СУБД</h3>
<p>Сервер распределённой СУБД Apache Ignite в минимально необходимой конфигурации можно установить автоматически при развертывании <strong>Comindware Platform</strong> либо самостоятельно в требуемой конфигурации.</p>
<p><strong>Требования к конфигурации</strong></p>
<ul>
<li><em><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4600">Apache Ignite. Установка и настройка. Краткое руководство</a></em>.</li>
</ul>
<p><strong>Примеры конфигураций</strong></p>
<ul>
<li><em><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4600">Apache Ignite. Установка и настройка. Краткое руководство</a></em>.</li>
</ul>
<h3 id="architecture_landscape_transaction_logging_configuration">Конфигурация сервера журналирования транзакций</h3>
<p>Сервер журналирования транзакций OpenSearch (Elasticsearch) в минимально необходимой конфигурации можно установить автоматически при развертывании <strong>Comindware Platform</strong> либо самостоятельно в требуемой конфигурации.</p>
<p><strong>Требования к конфигурации</strong></p>
<ul>
<li>Должна быть включена аутентификация.</li>
<li>Должна быть разрешена работа под любым аккаунтом, кроме стандартного (например, <code>elastic</code>).</li>
<li>Номер порта должен отличаться от стандартного 9200.</li>
<li>В конфигурации должно быть задано достаточное количество шардов: минимум 3000.</li>
</ul>
<p><strong>Примеры конфигураций</strong></p>
<ul>
<li>
<p><em><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4612">Установка и настройка Elasticsearch без сертификатов подлинности</a></em></p>
</li>
<li>
<p><em><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4617">Установка Elasticsearch. Краткое руководство для Windows</a></em></p>
</li>
</ul>
<h3 class="pageBreakBefore" id="architecture_landscape_reverse_proxy_configuration">Конфигурация обратного прокси-сервера</h3>
<p>Обратный прокси-сервер NGINX в минимально необходимой конфигурации можно установить автоматически при развертывании <strong>Comindware Platform</strong> либо самостоятельно в требуемой конфигурации.</p>
<p><strong>Требования к конфигурации</strong></p>
<ul>
<li>NGINX;</li>
<li>Модуль ModSecurity;</li>
<li>Модуль GeoIP.</li>
</ul>
<p><strong>Примеры конфигураций</strong></p>
<ul>
<li><em><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4611">NGINX. Установка и настройка</a>»</em></li>
<li><em><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4610">Модуль GeoIP для NGINX. Установка и настройка</a></em>.</li>
</ul>
<h3 class="pageBreakBefore" id="architecture_landscape_monitoring_server_configuration">Конфигурация сервера Zabbix</h3>
<p><strong>Требования к конфигурации</strong></p>
<p>Конфигурация сервера Zabbix должна обеспечивать мониторинг работоспособности Системы, как указано ниже.</p>
<ul>
<li>Мониторинг доступности сервера распределённой СУБД Apache Ignite.<ul>
<li>Сервер может быть недоступен из-за проблем с сетью.</li>
<li>На сервере может закончиться свободное место на диске.</li>
<li>Конфигурация сервера может не позволять обработать запросы, например, ввиду невозможности создания нового индекса или соответствующего ему шарду.</li>
</ul>
</li>
<li>Мониторинг доступности сервера журналирования транзакций OpenSearch (Elasticsearch)<ul>
<li>Сервер может быть недоступен из-за проблем с сетью.</li>
<li>На сервере может закончиться свободное место на диске.</li>
<li>Конфигурация сервера может не позволять обработать запросы, например, ввиду невозможности создания нового индекса или соответствующего ему шарда.</li>
</ul>
</li>
<li>Мониторинг места на дисках с базой данных, журналами, резервными копиями и т. п.</li>
<li>Мониторинг ошибок в процессе работы Системы<ul>
<li>Ошибки конфигурации Системы.</li>
<li>Ошибки в процессе эксплуатации Системы.</li>
<li>Ошибки, связанные с обновлением окружения, в котором работает Система, или компонентов самой Системы.</li>
</ul>
</li>
</ul>
<p><strong>Примеры конфигураций</strong></p>
<ul>
<li><em><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4609">Zabbix. Установка и настройка. Краткое руководство</a></em>.</li>
</ul>
<div class="relatedTopics">
<h2 id="связанные-статьи">Связанные статьи</h2>
<ul>
<li><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4659">Системные требования Comindware Platform</a></li>
<li><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=5079">Обеспечение высокой доступности и отказоустойчивости</a></li>
</ul>
</div>
</article>
</div>
</div>
<a class="md-top md-icon mkdocs_imported_link" data-md-component="top" href="#">
<i class="fa-light fa-arrow-up">‌<!--icon--></i>
            К началу
          </a>
</main>
</div>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": true, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></div>
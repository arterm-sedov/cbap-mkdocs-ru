<h1>Урок 5. Структуры данных</h1><div class="md-body" data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="comindware" dir="ltr" kb-id="4869">
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<nav aria-label="Содержание" class="md-nav md-nav--secondary">
<div class="mce-toc">
<h2 class="toc-heading">
      Содержание
      </h2>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#введение">
<span class="md-ellipsis">
      Введение
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#definitions">
<span class="md-ellipsis">
      Определения
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#создание-диаграммы-модели-данных">
<span class="md-ellipsis">
      Создание диаграммы модели данных
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#настройка-шаблона-для-справочных-данных">
<span class="md-ellipsis">
      Настройка шаблона для справочных данных
    </span>
</a>
<nav aria-label="Настройка шаблона для справочных данных" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#создание-шаблона-записи-типы-автомобилей">
<span class="md-ellipsis">
      Создание шаблона записи «Типы автомобилей»
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#настройка-текстового-атрибута-в-качестве-заголовка-записи">
<span class="md-ellipsis">
      Настройка текстового атрибута в качестве заголовка записи
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#настройка-формы-тип-автомобиля">
<span class="md-ellipsis">
      Настройка формы «Тип автомобиля»
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#настройка-таблицы-типы-автомобилей">
<span class="md-ellipsis">
      Настройка таблицы «Типы автомобилей»
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#заполнение-справочника-типы-автомобилей">
<span class="md-ellipsis">
      Заполнение справочника «Типы автомобилей»
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#создание-атрибута-связывающего-два-шаблона-записей">
<span class="md-ellipsis">
      Создание атрибута, связывающего два шаблона записей
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#настройка-шаблона-для-мастер-данных">
<span class="md-ellipsis">
      Настройка шаблона для мастер-данных
    </span>
</a>
<nav aria-label="Настройка шаблона для мастер-данных" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#создание-шаблона-записи-автомобили">
<span class="md-ellipsis">
      Создание шаблона записи «Автомобили»
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#настройка-формы-автомобиль">
<span class="md-ellipsis">
      Настройка формы «Автомобиль»
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#настройка-таблицы-автомобили">
<span class="md-ellipsis">
      Настройка таблицы «Автомобили»
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#тестирование-справочники-и-мастер-данные">
<span class="md-ellipsis">
      Тестирование: справочники и мастер-данные
    </span>
</a>
<nav aria-label="Тестирование: справочники и мастер-данные" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#создание-записи-с-данными-автомобиля">
<span class="md-ellipsis">
      Создание записи с данными автомобиля
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#группировка-автомобилей-в-таблице">
<span class="md-ellipsis">
      Группировка автомобилей в таблице
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#установление-связи-между-автомобилями-и-заявками-на-автомобили">
<span class="md-ellipsis">
      Установление связи между автомобилями и заявками на автомобили
    </span>
</a>
<nav aria-label="Установление связи между автомобилями и заявками на автомобили" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#создание-взаимосвязанных-атрибутов-типа-запись">
<span class="md-ellipsis">
      Создание взаимосвязанных атрибутов типа «Запись»
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#настройка-таблицы-на-форме-автомобиль-для-отображения-связанных-заявок">
<span class="md-ellipsis">
      Настройка таблицы на форме «Автомобиль» для отображения связанных заявок
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#настройка-шаблонов-транзакционных-данных-для-учёта-затрат">
<span class="md-ellipsis">
      Настройка шаблонов транзакционных данных для учёта затрат
    </span>
</a>
<nav aria-label="Настройка шаблонов транзакционных данных для учёта затрат" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#создание-шаблона-записи-типы-затрат">
<span class="md-ellipsis">
      Создание шаблона записи «Типы затрат»
    </span>
</a>
<nav aria-label="Создание шаблона записи «Типы затрат»" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#настройка-формы-тип-затрат">
<span class="md-ellipsis">
      Настройка формы «Тип затрат»
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#настройка-таблицы-типы-затрат">
<span class="md-ellipsis">
      Настройка таблицы «Типы затрат»
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#заполнение-справочника-типы-затрат">
<span class="md-ellipsis">
      Заполнение справочника «Типы затрат»
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#создание-шаблона-записи-затраты">
<span class="md-ellipsis">
      Создание шаблона записи «Затраты»
    </span>
</a>
<nav aria-label="Создание шаблона записи «Затраты»" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#настройка-формы-затраты">
<span class="md-ellipsis">
      Настройка формы «Затраты»
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#установление-связей-между-заявками-на-автомобили-с-затратами">
<span class="md-ellipsis">
      Установление связей между заявками на автомобили с затратами
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#настройка-таблицы-затрат">
<span class="md-ellipsis">
      Настройка таблицы затрат
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#результаты">
<span class="md-ellipsis">
      Результаты
    </span>
</a>
</li>
</ul>
</div>
</nav>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h2 id="введение">Введение</h2>
<p>В ходе этого урока вы научитесь использовать <strong>диаграмму «сущность-связь»</strong> для визуальной настройки <strong>модели данных</strong> приложения, создания шаблонов записей различных типов (для справочников, мастер-данных и транзакционных данных) и установления связей между ними.</p>
<p><strong>Предусловия:</strong> пройден <em><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4873">урок 2 «Мой первый реестр данных»</a></em>.</p>
<p><strong>Расчётная продолжительность:</strong> 70 мин.</p>
<div class="notice notice-info">
<p class="admonition-title">Примечание</p>
<p>В данном уроке представлен продукт <strong>Comindware Platform</strong> версии 5.0, внешний вид страниц и меню в других версиях продукта может отличаться.</p>
</div>
<div class="notice notice-success">
<h2 class="admonition-title" id="definitions">Определения</h2>
<ul>
<li>В <strong>Comindware Platform</strong> для визуализации и проектирования <strong>модели данных</strong> приложения используются <strong>диаграммы «сущность-связь»</strong> (ER-диаграммы).</li>
<li><strong>Диаграмма модели данных</strong> наглядно показывает шаблоны записей, их атрибуты и связи друг с другом.</li>
<li>Непосредственно в ходе создания и редактирования диаграммы можно создавать и настраивать новые шаблоны записей (реестры данных) и добавлять атрибуты.</li>
<li>Это позволяет настраивать приложение и при этом видеть его модель данных в целом.</li>
</ul>
</div>
<h2 id="создание-диаграммы-модели-данных">Создание диаграммы модели данных</h2>
<ol class="colored_numbers_list">
<li>На панели навигации слева выберите пункты «<strong>Настройки</strong>» — «<strong>Диаграммы</strong>».</li>
<li>
<p>Отобразится список диаграмм всех приложений.</p>
<div class="notice notice-info">
<p class="admonition-title">Примечание</p>
<ul>
<li>По умолчанию список диаграмм содержит <strong>диаграммы процессов</strong> и <strong>диаграммы классов</strong>:<ul>
<li><strong>диаграмма классов</strong> создается автоматически для каждого приложения;</li>
<li><strong>диаграмма процесса</strong> создается автоматически для каждого <strong>шаблона процесса</strong>.</li>
</ul>
</li>
</ul>
</div>
</li>
<li>
<p>Создайте диаграмму, нажав кнопку «<strong>Создать</strong>».</p>
</li>
<li>
<p>В отобразившемся окне настройте <strong>новую диаграмму</strong>:</p>
<ul>
<li><strong>Название:</strong> <em>Модель данных — заказ автотранспорта</em></li>
<li><strong>Тип:</strong> <strong>диаграмма модели данных</strong></li>
<li><strong>приложение</strong> <em>Управление автопарком</em></li>
</ul>
</li>
<li>
<p>Нажмите кнопку «<strong>Сохранить</strong>».</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Создание новой диаграммы модели данных" src="/platform/v5.0/tutorial/img/lesson_5_data_model_diagram_create.png"/><figcaption class="caption">Создание новой диаграммы модели данных</figcaption></figure></p>
</li>
<li>
<p>Отобразится конструктор диаграммы модели данных.</p>
<div class="notice notice-success">
<p class="admonition-title">Конструктор диаграммы модели данных</p>
<p><strong>Конструктор диаграммы модели данных</strong> содержит следующие области:</p>
<p>(1) <strong>Панель элементов</strong> — содержит имеющиеся шаблоны и кнопки для создания новых.</p>
<p>(2) <strong>Диаграмма</strong> — отображает шаблоны, атрибуты и связи между ними.</p>
<p>(3) <strong>Кнопки</strong></p>
<ul>
<li><strong>Выбрать версию</strong> — загрузить одну из ранее сохраненных версий диаграммы.</li>
<li><strong>Создать новую версию</strong> — сохранить текущую диаграмму как новую версию.</li>
<li><strong>Клонировать</strong> — создать новую диаграмму путем копирования текущей.</li>
<li><strong>Настройки</strong> — переименовать диаграмму.</li>
<li><strong>Обновить данные</strong> — вывести актуальную модель данных приложения на диаграмму.</li>
<li><strong>Экспортировать</strong> — сохранить диаграмму как файл в формате SVG.</li>
<li><strong>Отображать системные имена</strong> — показать для шаблонов и атрибутов системные имена вместо отображаемых названий.</li>
<li><strong>Очистить</strong> — скрыть все элементы диаграммы, при этом соответствующие сущности из приложения не удаляются.</li>
</ul>
</div>
<div class="notice notice-info">
<p class="admonition-title">Примечание</p>
<p>Изменения диаграммы модели данных автоматически сохраняются в текущей версии диаграммы.</p>
</div>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Конструктор диаграммы модели данных" src="/platform/v5.0/tutorial/img/lesson_5_data_model_diagram_designer.png"/><figcaption class="caption">Конструктор диаграммы модели данных</figcaption></figure></p>
</li>
<li>
<p>Перетащите на диаграмму шаблон записи <em>«Заявки на автомобили»</em> с панели элементов слева.</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Добавление шаблона на диаграмму модели данных" src="/platform/v5.0/tutorial/img/lesson_5_data_model_diagram_add_template.png"/><figcaption class="caption">Добавление шаблона на диаграмму модели данных</figcaption></figure></p>
</li>
</ol>
<h2 id="настройка-шаблона-для-справочных-данных">Настройка шаблона для справочных данных</h2>
<div class="notice notice-warning">
<p class="admonition-title">Бизнес-логика</p>
<p>Чтобы <em>Заказчик</em> мог указать тип автомобиля в заявке, добавим справочник типов автомобилей.</p>
<p>Для этого создадим <strong>шаблон записи</strong> <em>«Типы автомобилей»</em>, настроим форму типа автомобиля, список типов автомобилей и заполним справочник данными.</p>
<p>Создавать и настраивать справочник будем с помощью конструктора диаграммы модели данных.</p>
</div>
<h3 id="создание-шаблона-записи-типы-автомобилей">Создание шаблона записи «Типы автомобилей»</h3>
<ol class="colored_numbers_list">
<li>
<p>Перетащите на диаграмму модели данных элемент «<strong>Новый шаблон записи</strong>» с панели элементов.</p>
<p><em><a class="mkdocs_imported_link" href="img/lesson_5_data_model_diagram_create_template.png">Создание шаблона записи на диаграмме модели данных</a></em></p>
</li>
<li>
<p>В отобразившемся окне настройте и сохраните <strong>новый шаблон</strong>:</p>
<ul>
<li><strong>Название:</strong> <em>Типы автомобилей</em></li>
<li><strong>Системное имя:</strong> будет заполнено автоматически</li>
</ul>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Настройка шаблона записи с помощью диаграммы модели данных" src="/platform/v5.0/tutorial/img/lesson_5_template_create.png"/><figcaption class="caption">Настройка шаблона записи с помощью диаграммы модели данных</figcaption></figure></p>
</li>
</ol>
<h3 id="настройка-текстового-атрибута-в-качестве-заголовка-записи">Настройка текстового атрибута в качестве заголовка записи</h3>
<div class="notice notice-warning">
<p class="admonition-title">Бизнес-логика</p>
<p>По умолчанию в качестве заголовка записи используется её цифровой идентификатор. Этот идентификатор отображается при выборе типа автомобиля в раскрывающемся списке, но это неинформативно.</p>
<p>Дадим возможность пользователям выбирать тип автомобиля по названию. Для этого создадим текстовый атрибут в шаблоне записи <em>«Типы автомобилей»</em> и установим его в качестве заголовка записей.</p>
<p>Рекомендуем задать атрибут-заголовок записей в каждом шаблоне, чтобы повысить удобство пользования приложением.</p>
</div>
<div class="notice notice-success">
<p class="admonition-title">Атрибут-заголовок записей</p>
<p>Шаблон записи имеет заголовок, который отображается на формах и в таблицах. </p>
<p>По умолчанию в качестве заголовка используется системный атрибут <strong>ID</strong>, содержащий цифровой <strong>идентификатор</strong> записи.</p>
<p>Чтобы выводить наглядный заголовок записи, используйте подходящий атрибут: установите в его свойствах флажок «<strong>Использовать как заголовок записей</strong>». После этого в заголовках записей будет отображаться значение данного атрибута.</p>
<p>В качестве заголовка записи можно использовать атрибуты следующих типов: <strong>Аккаунт</strong>, <strong>Дата и время</strong>, <strong>Длительность</strong>, <strong>Текст</strong>, <strong>Число</strong>.</p>
<p>В качестве заголовка записи можно использовать только один атрибут шаблона.</p>
</div>
<ol class="colored_numbers_list">
<li>Выберите шаблон <em>«Типы автомобилей»</em> на диаграмме.</li>
<li>
<p>В меню элемента нажмите кнопку «<strong>Добавить новый атрибут</strong>» <i class="fa-light fa-circle-plus">‌<!--icon--></i>.</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Переход к созданию атрибута шаблона записи на диаграмме модели данных" src="/platform/v5.0/tutorial/img/lesson_5_data_model_diagram_template_attributes_open.png"/><figcaption class="caption">Переход к созданию атрибута шаблона записи на диаграмме модели данных</figcaption></figure></p>
</li>
<li>
<p>В отобразившемся окне настройте и сохраните <strong>новый атрибут</strong>:</p>
<ul>
<li><strong>Тип данных:</strong> <strong>текст</strong></li>
<li><strong>Название:</strong> <em>Тип автомобиля</em></li>
<li><strong>Использовать как заголовок записей</strong>: установите флажок</li>
</ul>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Настройка нового атрибута с помощью диаграммы модели данных" src="/platform/v5.0/tutorial/img/lesson_5_attribute_create.png"/><figcaption class="caption">Настройка нового атрибута с помощью диаграммы модели данных</figcaption></figure></p>
</li>
</ol>
<h3 id="настройка-формы-тип-автомобиля">Настройка формы «Тип автомобиля»</h3>
<p>Настроим форму для заполнения справочника типов автомобилей.</p>
<ol class="colored_numbers_list">
<li>Выберите шаблон <em>«Типы автомобилей»</em> на диаграмме модели данных.</li>
<li>В меню элемента выберите пункт «<strong>Перейти к шаблону</strong>» <i class="fa-light fa-arrow-up-right-from-square">‌<!--icon--></i> — «<strong>Формы</strong>» <i class="fa-light fa-newspaper">‌<!--icon--></i>.</li>
<li>В отобразившемся списке форм дважды нажмите форму <em>«Типы автомобилей — Основная форма»</em>, чтобы открыть её.</li>
<li>Перетащите на форму новую <strong>область</strong> и переименуйте её в <em>«Тип автомобиля».</em></li>
<li>Перетащите атрибут <em>«Тип автомобиля»</em> с панели элементов на область <em>«Тип автомобиля»</em>.</li>
<li>Нажмите кнопку «<strong>Сохранить</strong>».</li>
<li>Нажмите кнопку «<strong>Настроить шаблон</strong>» <i class="fa-light fa-pen-square">‌<!--icon--></i>.</li>
<li>Отобразится страница свойств шаблона записи <em>«Типы автомобилей»</em></li>
</ol>
<h3 id="настройка-таблицы-типы-автомобилей">Настройка таблицы «Типы автомобилей»</h3>
<p>Создадим таблицу со списком типов автомобилей.</p>
<ol class="colored_numbers_list">
<li>Перейдите на вкладку «<strong>Таблицы</strong>» шаблона записи <em>«Типы автомобилей»</em>.</li>
<li>Дважды нажмите строку «<strong>Все записи</strong>».</li>
<li>Отобразится конструктор таблицы.</li>
<li>В конструкторе таблицы нажмите кнопку «<strong>Очистить</strong>», чтобы удалить все атрибуты (столбцы) из макета таблицы. Подтвердите очистку.</li>
<li>Перетащите атрибут <em>«Тип автомобиля»</em> на макет таблицы. Этот атрибут станет столбцом таблицы.</li>
<li>Сохраните таблицу.</li>
<li>Нажмите кнопку «<strong>Настроить шаблон</strong>» <i class="fa-light fa-pen-square">‌<!--icon--></i>.</li>
<li>Отобразится страница свойств шаблона записи <em>«Типы автомобилей»</em></li>
</ol>
<h3 id="заполнение-справочника-типы-автомобилей">Заполнение справочника «Типы автомобилей»</h3>
<ol class="colored_numbers_list">
<li>На вкладке «<strong>Свойства</strong>» шаблона записи <em>«Типы автомобилей»</em> нажмите кнопку «<strong>Перейти к экземплярам</strong>».</li>
<li>В списке записей <em>«Типы автомобилей»</em> нажмите кнопку «<strong>Создать</strong>».</li>
<li>Отобразится форма нового типа автомобиля.</li>
<li>В поле <em>«Тип автомобиля»</em> укажите значение <em>«Легковой»</em></li>
<li>Сохраните запись.</li>
<li>Нажмите ссылку «<em>Типы автомобилей</em>» над формой, чтобы вернуться к списку записей <em>«Типы автомобилей».</em></li>
<li>
<p>Аналогичным образом создайте ещё два типа автомобилей — <em>«Представительский» и «Автобус».</em></p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Создание записи с типом автомобиля и переход к списку записей" src="/platform/v5.0/tutorial/img/lesson_5_vehicle_type_create.png"/><figcaption class="caption">Создание записи с типом автомобиля и переход к списку записей</figcaption></figure></p>
</li>
<li>
<p>Должен получиться показанный ниже справочник типов автомобилей.</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Справочник «Типы автомобилей»" src="/platform/v5.0/tutorial/img/lesson_5_vehicle_type_list.png"/><figcaption class="caption">Справочник «Типы автомобилей»</figcaption></figure></p>
</li>
</ol>
<h3 id="создание-атрибута-связывающего-два-шаблона-записей">Создание атрибута, связывающего два шаблона записей</h3>
<div class="notice notice-warning">
<p class="admonition-title">Бизнес-логика</p>
<p>Теперь следует добавить на форму заявки поле <em>«Тип автомобиля»</em>, в котором <em>Заказчик</em> будет выбирать вариант из справочника.</p>
<p>Для этого установим связь между шаблонами <em>«Заявки на автомобили»</em> и <em>«Типы автомобилей»</em> с помощью атрибута типа «<strong>Запись</strong>».</p>
</div>
<div class="notice notice-success">
<p class="admonition-title">Атрибут типа «Запись»</p>
<ul>
<li>Атрибут типа «<strong>Запись</strong>» используется для создания связи между шаблонами вида «один ко многим» (1:M), «один к одному» (1:1) или «многие ко многим» (N:M).</li>
<li>При установлении связи «один ко многим» несколько записей одного шаблона могут ссылаться на одну запись другого шаблона.</li>
<li>Такой шаблон называется <strong>связанным шаблоном</strong>.</li>
<li><strong>Связанный шаблон</strong> всегда указывается при создании атрибута типа «<strong>Запись</strong>».</li>
</ul>
</div>
<ol class="colored_numbers_list">
<li>На диаграмме модели данных заказа автотранспорта выберите шаблон <em>«Заявки на автомобили»</em>.</li>
<li>
<p>В меню элемента нажмите кнопку «<strong>Добавить новый атрибут</strong>» <i class="fa-light fa-circle-plus">‌<!--icon--></i>.</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Создание атрибута шаблона записи с помощью диаграммы модели данных" src="/platform/v5.0/tutorial/img/lesson_5_data_model_attribute_create.png"/><figcaption class="caption">Создание атрибута шаблона записи с помощью диаграммы модели данных</figcaption></figure></p>
</li>
<li>
<p>В отобразившемся окне настройте и сохраните <strong>новый атрибут</strong>:</p>
<ul>
<li><strong>Тип данных:</strong> <strong>запись</strong></li>
<li><strong>Название:</strong> <em>Тип автомобиля</em></li>
<li><strong>Связанный шаблон:</strong> <em>Типы автомобилей</em></li>
</ul>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Настройка атрибута «Тип автомобиля»" src="/platform/v5.0/tutorial/img/lesson_5_attribute_record_properties.png"/><figcaption class="caption">Настройка атрибута «Тип автомобиля»</figcaption></figure></p>
</li>
<li>
<p>На диаграмме отобразится связь между шаблонами в виде линии.</p>
</li>
</ol>
<div class="notice notice-success">
<p class="admonition-title">Линии связей на диаграмме модели данных</p>
<p>Соединительная линия показывает, что для одной заявки на автомобиль может быть указан только один тип автомобиля, и разные заявки могут ссылаться на один и тот же тип автомобиля.</p>
<p>Для связанных нами шаблонов соединительная линия показывает, что для одной заявки на автомобиль может быть указан только один тип автомобиля — символ <img alt="Символ «один» на ER-диаграмме" height="15px" src="/platform/v5.0/tutorial/img/lesson_5_one_to_one_symbol.png" width="15px"/>, а разные заявки могут ссылаться на один и тот же тип автомобиля — символ <img alt="Символ «многие» на ER-диаграмме" height="20px" src="/platform/v5.0/tutorial/img/lesson_5_one_to_many_symbol.png" width="20px"/>.</p>
</div>
<div class="notice notice-info">
<p class="admonition-title">Примечание</p>
<p>Если линия связи не отобразилась автоматически, выберите любой шаблон и в меню элементов нажмите кнопку «<strong>Показать связанные элементы</strong>» <i class="fa-light fa-link">‌<!--icon--></i>.</p>
</div>
<figure class="screenshot_with_caption">
<p><img alt="Отображение связи между шаблонами" src="/platform/v5.0/tutorial/img/lesson_5_data_model_relations_show_requests.png"/><figcaption class="caption">Отображение связи между шаблонами</figcaption></p>
</figure>
<h2 id="настройка-шаблона-для-мастер-данных">Настройка шаблона для мастер-данных</h2>
<div class="notice notice-warning">
<p class="admonition-title">Бизнес-логика</p>
<p><em>Диспетчеру гаража</em> необходимо вести учет автомобилей и видеть, какие автомобили на данный момент свободны. </p>
<p>Для этого создадим <strong>шаблон записи</strong> для хранения данных конкретного автомобиля — реестр мастер-данных.</p>
</div>
<div class="notice notice-success">
<p class="admonition-title">Мастер-данные</p>
<p><strong>Мастер-данные</strong> описывают объекты учёта, например автомобили, клиенты, товарная номенклатура. </p>
<p>Мастер данные обеспечивают контекст для бизнес-транзакций.</p>
</div>
<h3 id="создание-шаблона-записи-автомобили">Создание шаблона записи «Автомобили»</h3>
<ol class="colored_numbers_list">
<li>Перетащите на диаграмму модели данных заказа автотранспорта элемент «<strong>Новый шаблон записи</strong>».</li>
<li>В отобразившемся окне «<strong>Новый шаблон</strong>» введите <strong>название</strong> «<em>Автомобили</em>» и сохраните шаблон.</li>
<li>Выберите созданный шаблон и в меню элементов выберите пункт «<strong>Перейти к шаблону</strong>» <i class="fa-light fa-arrow-up-right-from-square">‌<!--icon--></i> — «<strong>Атрибуты</strong>» <i class="fa-light fa-dice-five">‌<!--icon--></i>.</li>
<li>
<p>Отобразится вкладка «<strong>Атрибуты</strong>» со списком атрибутов шаблона.</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Создание нового шаблона записи с помощью диаграммы модели данных и переход к его списку атрибутов" src="/platform/v5.0/tutorial/img/lesson_5_data_model_template_create.png"/><figcaption class="caption">Создание нового шаблона записи с помощью диаграммы модели данных и переход к его списку атрибутов</figcaption></figure></p>
</li>
<li>
<p>Создайте три атрибута <strong>типа «Текст»</strong> со следующими свойствами:</p>
<table style="width: 100%;">
<thead>
<tr>
<th>Название</th>
<th>Формат отображения</th>
<th>Использовать как заголовок записей</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>Марка</em></td>
<td><strong>Обычный текст</strong></td>
<td></td>
</tr>
<tr>
<td><em>Модель</em></td>
<td><strong>Обычный текст</strong></td>
<td></td>
</tr>
<tr>
<td><em>Регистрационный номер</em></td>
<td><strong>Регистрационный номер ТС (РФ)</strong></td>
<td>Флажок установлен</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Создайте атрибут:</p>
<ul>
<li><strong>Название:</strong> <em>«Тип»</em></li>
<li><strong>Тип данных:</strong> <strong>запись</strong></li>
<li><strong>Связанный шаблон:</strong> <em>Типы автомобилей</em></li>
</ul>
</li>
</ol>
<figure class="screenshot_with_caption">
<p><img alt="Атрибуты шаблона записи «Автомобили»" src="/platform/v5.0/tutorial/img/lesson_5_template_attibutes_vehicles.png"/><figcaption class="caption">Атрибуты шаблона записи «Автомобили»</figcaption></p>
</figure>
<h3 id="настройка-формы-автомобиль">Настройка формы «Автомобиль»</h3>
<ol class="colored_numbers_list">
<li>Перейдите на вкладку «<strong>Формы</strong>» шаблона записи <em>«Автомобили»</em>.</li>
<li>Откройте форму <em>«Автомобили — Основная форма»</em>.</li>
<li>Для <strong>новой области</strong> на макете формы укажите <strong>отображаемое название</strong> <em>«Автомобиль»</em>.</li>
<li>Перетащите на область <em>«Автомобиль»</em> атрибуты <em>«Марка»</em>, <em>«Модель»</em>, <em>«Регистрационный номер»</em> и <em>«Тип»</em>.</li>
<li>Сохраните форму.</li>
</ol>
<div class="admonition совет">
<p class="admonition-title">Примечание</p>
<p>Для удобства конечного пользователя можно упорядочить поля с помощью <strong>колонок</strong> и <strong>вкладок</strong>.</p>
<p>Вы можете поэкспериментировать с макетом формы, чтобы сделать её более наглядной и удобной.</p>
</div>
<figure class="screenshot_with_caption">
<p><img alt="Настройка формы «Автомобиль»" src="/platform/v5.0/tutorial/img/lesson_5_form_vehicle_configure.png"/><figcaption class="caption">Настройка формы «Автомобиль»</figcaption></p>
</figure>
<h3 id="настройка-таблицы-автомобили">Настройка таблицы «Автомобили»</h3>
<p>Настроим таблицу, чтобы в ней отображались требуемые данные об автомобилях — атрибуты, которые мы создали.</p>
<ol class="colored_numbers_list">
<li>В конструкторе формы нажмите кнопку «<strong>Настроить шаблон</strong>» <i class="fa-light fa-pen-square">‌<!--icon--></i>.</li>
<li>Перейдите на вкладку «<strong>Таблицы</strong>».</li>
<li>Откройте таблицу «<strong>Все записи</strong>».</li>
<li>Нажмите кнопку «<strong>Очистить</strong>».</li>
<li>Перетащите на макет таблицы атрибуты <em>«Марка», «Модель», «Регистрационный номер»</em> и <em>«Тип»</em>.</li>
<li>Сохраните таблицу.</li>
<li>Нажмите кнопку «<strong>Настроить шаблон</strong>» <i class="fa-light fa-pen-square">‌<!--icon--></i>, чтобы перейти к свойствам шаблона записи <em>«Автомобили».</em></li>
</ol>
<figure class="screenshot_with_caption">
<p><img alt="Настройка таблицы «Автомобили»" src="/platform/v5.0/tutorial/img/lesson_5_table_vehicles_configure.png"/><figcaption class="caption">Настройка таблицы «Автомобили»</figcaption></p>
</figure>
<h2 id="тестирование-справочники-и-мастер-данные">Тестирование: справочники и мастер-данные</h2>
<h3 id="создание-записи-с-данными-автомобиля">Создание записи с данными автомобиля</h3>
<p>Протестируем созданные справочники и мастер-данные.</p>
<ol class="colored_numbers_list">
<li>На вкладке «<strong>Свойства</strong>» шаблона записи <em>«Автомобиль»</em> нажмите кнопку «<strong>Перейти к экземплярам</strong>».</li>
<li>Нажмите кнопку «<strong>Создать</strong>».</li>
<li>Отобразится форма «Автомобиль».</li>
<li>Укажите произвольные <em>марку</em>, <em>модель</em>, <em>регистрационный номер ТС</em> и <em>тип</em> автомобиля.</li>
<li>Нажмите кнопку «<strong>Сохранить</strong>»</li>
<li>
<p>Нажмите ссылку «<em>Автомобили</em>» над формой, чтобы вернуться к списку записей.</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Создание новой записи в шаблоне «Автомобили»" src="/platform/v5.0/tutorial/img/lesson_5_vehicle_create.png"/><figcaption class="caption">Создание новой записи в шаблоне «Автомобили»</figcaption></figure></p>
</li>
<li>
<p>Создайте ещё несколько записей в шаблоне <em>«Автомобили»</em>, указав при этом разные данные и типы автомобилей, как показано на следующей иллюстрации.</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Список автомобилей" src="/platform/v5.0/tutorial/img/lesson_5_vehicles_list.png"/><figcaption class="caption">Список автомобилей</figcaption></figure></p>
</li>
</ol>
<h3 id="группировка-автомобилей-в-таблице">Группировка автомобилей в таблице</h3>
<ol class="colored_numbers_list">
<li>В таблице <em>«Автомобили»</em> нажмите значок <i class="fa-light fa-filter">‌<!--icon--></i> в столбце <em>«Тип».</em></li>
<li>Установите флажок «<strong>Группировать</strong>» в раскрывшемся меню.</li>
<li>Нажмите кнопку «<strong>Сохранить</strong>».</li>
<li>Пункты в таблице будут сгруппированы по значению атрибута <em>«Тип».</em></li>
</ol>
<figure class="screenshot_with_caption">
<p><img alt="Группировка записей по значению атрибута «Тип»" src="/platform/v5.0/tutorial/img/lesson_5_vehicle_list_group_type.png"/><figcaption class="caption">Группировка записей по значению атрибута «Тип»</figcaption></p>
</figure>
<h2 id="установление-связи-между-автомобилями-и-заявками-на-автомобили">Установление связи между автомобилями и заявками на автомобили</h2>
<div class="notice notice-warning">
<p class="admonition-title">Бизнес-логика</p>
<p>Добавим в реестр данных <em>«Автомобили»</em> информацию о выполненных заявках, в которых использовался этот автомобиль.</p>
<p>Для этого создадим атрибут, который свяжет шаблоны записей <em>«Автомобили»</em> и <em>«Заявки на автомобили»</em> связью «один ко многим» (1:M), то есть на один автомобиль может быть несколько заявок. Такую связь позволяет установить атрибут типа «<strong>Запись</strong>» с <strong>взаимной связью и несколькими значениями</strong>.</p>
</div>
<div class="notice notice-success">
<p class="admonition-title">Атрибут типа «Запись» с несколькими значениями</p>
<ul>
<li>Атрибут типа «<strong>Запись</strong>» позволяет хранить, отображать и изменять набор (коллекцию) связанных записей в <strong>связанном шаблоне</strong>.</li>
<li>Между шаблонами можно установить <strong>взаимную связь</strong> с помощью двух атрибутов типа «<strong>Запись</strong>», тогда при изменении значения в любом из взаимосвязанных атрибутов во второй атрибут будет автоматически записываться обратная ссылка на запись в <strong>связанном шаблоне</strong>.</li>
<li>При создании атрибута типа «<strong>Запись</strong>» можно настроить <strong>взаимную связь</strong> с имеющимся или новым атрибутом в связанном шаблоне.</li>
<li><strong>Пример работы взаимосвязанных атрибутов</strong><ul>
<li>В шаблоне <em>«Автомобили»</em> атрибут <em>«Заявки на автомобиль»</em> взаимосвязан с атрибутом <em>«Автомобили»</em> из шаблона <em>«Заявки на автомобили»</em>.</li>
<li>При указании автомобиля в заявке в соответствующей записи в шаблоне <em>«Автомобили»</em> будет автоматически установлена обратная ссылка на заявку.</li>
</ul>
</li>
</ul>
</div>
<h3 id="создание-взаимосвязанных-атрибутов-типа-запись">Создание взаимосвязанных атрибутов типа «Запись»</h3>
<ol class="colored_numbers_list">
<li>
<p>В шаблоне <em>«Автомобили»</em> создайте атрибут типа «<strong>Запись</strong>» со следующими свойствами:</p>
<ul>
<li><strong>Название:</strong> <em>Заявки на автомобиль</em></li>
<li><strong>Связанный шаблон</strong> <em>Заявки на автомобили</em></li>
<li><strong>Хранить несколько значений:</strong> установите флажок (только для атрибута <em>«Заявки на автомобиль»</em>)</li>
<li><strong>Взаимная связь с атрибутом:</strong> <strong>с новым</strong> — это атрибут в шаблоне <em>«Заявки на автомобили»</em><ul>
<li><strong>Название нового атрибута</strong> <em>Автомобиль</em></li>
<li><strong>Хранить несколько значений:</strong> не устанавливайте флажок</li>
</ul>
</li>
</ul>
</li>
</ol>
<figure class="screenshot_with_caption">
<p><img alt="Создание атрибута «Заявки на автомобиль», взаимосвязанного с атрибутом «Автомобили»" src="/platform/v5.0/tutorial/img/lesson_5_attribute_vehicle_requests_configure.png"/><figcaption class="caption">Создание атрибута «Заявки на автомобиль», взаимосвязанного с атрибутом «Автомобили»</figcaption></p>
</figure>
<h3 id="настройка-таблицы-на-форме-автомобиль-для-отображения-связанных-заявок">Настройка таблицы на форме «Автомобиль» для отображения связанных заявок</h3>
<div class="notice notice-success">
<p class="admonition-title">Таблица на форме</p>
<p>На форме атрибут типа «<strong>Запись</strong>» с несколькими значениями может отображаться в виде таблицы, в столбцах которой отображаются атрибуты <strong>связанного шаблона</strong>. </p>
<p>Для таблицы на форме можно настроить набор столбцов, режим доступа, отображение дочерних записей, фильтр записей и кнопки.</p>
</div>
<ol class="colored_numbers_list">
<li>Откройте конструктор формы <em>«Автомобили — Основная форма»</em>.</li>
<li>Перетащите атрибут <em>«Заявки на автомобиль»</em> на область <em>«Автомобиль»</em>.</li>
<li>
<p>Для поля <em>«Заявки на автомобиль»</em> выберите <strong>представление</strong> «<strong>Таблица</strong>» с помощью панели свойств.</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Добавление таблицы на форму" src="/platform/v5.0/tutorial/img/lesson_5_form_vehicle_table_add.png"/><figcaption class="caption">Добавление таблицы на форму</figcaption></figure></p>
</li>
<li>
<p>Раскройте атрибут <em>«Заявки на автомобиль»</em> на панели элементов.</p>
</li>
<li>
<p>Перетащите в таблицу на форме атрибуты <em>«Время подачи», «Маршрут»</em> и <em>«Создатель»</em>.</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Добавление столбцов в таблицу на форме" src="/platform/v5.0/tutorial/img/lesson_5_form_vehicle_table_columns_add.png"/><figcaption class="caption">Добавление столбцов в таблицу на форме</figcaption></figure></p>
</li>
<li>
<p>Выберите область кнопок таблицы.</p>
</li>
<li>В панели элементов отобразятся кнопки, доступные таблицы.</li>
<li>Перетащите на область кнопок таблицы кнопки «<strong>Добавить</strong>» и «<strong>Перейти</strong>». Эти кнопки позволят привязывать имеющиеся заявки к автомобилю и переходить к заявкам, связанным с автомобилем.</li>
<li>
<p>Сохраните форму.</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Настройка кнопок для работы с записями в связанном шаблоне" src="/platform/v5.0/tutorial/img/lesson_5_form_vehicle_table_buttons_add.png"/><figcaption class="caption">Настройка кнопок для работы с записями в связанном шаблоне</figcaption></figure></p>
</li>
</ol>
<h2 id="настройка-шаблонов-транзакционных-данных-для-учёта-затрат">Настройка шаблонов транзакционных данных для учёта затрат</h2>
<div class="notice notice-warning">
<p class="admonition-title">Бизнес-логика</p>
<p>Мы научились работать со справочниками и мастер-данными. Помимо этого для бизнес-процесса могут потребоваться транзакционные данные, дополняющие исходные данные процесса (заявку на автомобиль).</p>
<p>Например, мы можем хранить список пассажиров или точек маршрута в дополнение к пункту назначения. Кроме того, водитель может регистрировать расходы, понесённые во время поездки.</p>
<p>Для этого нам потребуются два новых шаблона записей: затраты на поездки (транзакционные данные) и типы затрат (справочник). Эти шаблоны мы свяжем с заявкой: заявки — с затратами, а затраты — с типами затрат.</p>
</div>
<h3 id="создание-шаблона-записи-типы-затрат">Создание шаблона записи «Типы затрат»</h3>
<p>Создадим справочник типов затрат. Для этого вернемся к диаграмме модели данных.</p>
<ol class="colored_numbers_list">
<li>Выберите на панели навигации слева раздел «<strong>Настройки</strong>» — «<strong>Приложения</strong>».</li>
<li>Перейдите в приложение — <em>«Управление автопарком»</em>.</li>
<li>Выберите раздел «<strong>Диаграммы</strong>» и перейдите к диаграмме <em>«Модель данных — Заказ автотранспорта».</em></li>
<li>Создайте новый шаблон записи <em>«Типы затрат».</em></li>
<li>Выберите созданный шаблон и в меню элемента нажмите кнопку «<strong>Добавить новый атрибут</strong>» <i class="fa-light fa-circle-plus">‌<!--icon--></i>.</li>
<li>
<p>Настройте и сохраните новый атрибут:</p>
<ul>
<li><strong>Название</strong><em>Название</em></li>
<li><strong>Тип данных: текст</strong></li>
<li><strong>Использовать как заголовок записей:</strong> установите флажок</li>
</ul>
</li>
</ol>
<h4 id="настройка-формы-тип-затрат">Настройка формы «Тип затрат»</h4>
<ol class="colored_numbers_list">
<li>На диаграмме модели данных выберите шаблон. записи «<strong>Типы затрат</strong>»</li>
<li>
<p>С помощью меню элемента перейдите на вкладку «<strong>Формы</strong>».</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Переход к списку формы шаблона записи с диаграммы модели данных" src="/platform/v5.0/tutorial/img/lesson_5_data_model_form_list_open.png"/><figcaption class="caption">Переход к списку формы шаблона записи с диаграммы модели данных</figcaption></figure></p>
</li>
<li>
<p>Откройте форму <em>«Типы затрат — Основная форма».</em></p>
</li>
<li>Создайте область <em>«Укажите тип затрат»</em> и перетащите на нее атрибут <em>«Название».</em></li>
<li>Сохраните форму.</li>
<li>
<p>Нажмите кнопку «<strong>Настроить шаблон</strong>» <i class="fa-light fa-pen-square">‌<!--icon--></i>, чтобы перейти к свойствам шаблона.</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Настройка формы «Типы затрат — Основная форма»" src="/platform/v5.0/tutorial/img/lesson_5_form_cost_type.png"/><figcaption class="caption">Настройка формы «Типы затрат — Основная форма»</figcaption></figure></p>
</li>
</ol>
<h4 id="настройка-таблицы-типы-затрат">Настройка таблицы «Типы затрат»</h4>
<ol class="colored_numbers_list">
<li>Перейдите на вкладку «<strong>Таблицы</strong>» шаблона <em>«Типы затрат»</em>.</li>
<li>Настройте таблицу <em>«Все записи»</em> так, чтобы в ней отображался только атрибут <em>«Название»</em>.</li>
<li>Сохраните таблицу.</li>
<li>
<p>Нажмите кнопку «<strong>Настроить шаблон</strong>» <i class="fa-light fa-pen-square">‌<!--icon--></i>, чтобы перейти к свойствам шаблона.</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Настройка таблицы «Типы затрат»" src="/platform/v5.0/tutorial/img/lesson_5_table_cost_type.png"/><figcaption class="caption">Настройка таблицы «Типы затрат»</figcaption></figure></p>
</li>
</ol>
<h4 id="заполнение-справочника-типы-затрат">Заполнение справочника «Типы затрат»</h4>
<ol class="colored_numbers_list">
<li>Перейдите к списку экземпляров шаблона записи <em>«Типы затрат»</em>.</li>
<li>
<p>Создайте следующие типы затрат:</p>
<ul>
<li><em>Топливо</em></li>
<li><em>Сервис</em></li>
<li><em>Прочее</em></li>
</ul>
</li>
</ol>
<figure class="screenshot_with_caption">
<p><img alt="Список типов затрат" src="/platform/v5.0/tutorial/img/lesson_5_cost_type_list.png"/><figcaption class="caption">Список типов затрат</figcaption></p>
</figure>
<h3 id="создание-шаблона-записи-затраты">Создание шаблона записи «Затраты»</h3>
<ol class="colored_numbers_list">
<li>Вернитесь к диаграмме модели данных и создайте шаблон записи <em>«Затраты».</em></li>
<li>
<p>Выберите созданный шаблон и создайте следующие атрибуты:</p>
<table style="width: 100%;">
<thead>
<tr>
<th>Название</th>
<th>Тип данных</th>
<th>Свойства</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>Сумма</em></td>
<td><strong>Число</strong></td>
<td><strong>Количество знаков после запятой: 2</strong></td>
</tr>
<tr>
<td><em>Тип затрат</em></td>
<td><strong>Запись</strong></td>
<td><strong>Связанный шаблон:</strong> <em>Типы затрат</em></td>
</tr>
</tbody>
</table>
</li>
</ol>
<h4 id="настройка-формы-затраты">Настройка формы «Затраты»</h4>
<ol class="colored_numbers_list">
<li>На диаграмме модели данных перейдите к вкладке «<strong>Формы</strong>» шаблона <em>«Затраты»</em> через меню элемента.</li>
<li>Откройте конструктор формы <em>«Затраты — Основная форма».</em></li>
<li>Создайте на форме <strong>область</strong> <em>«Затраты»</em>.</li>
<li>Перетащите на область <em>«Затраты»</em> атрибуты <em>«Сумма»</em> и <em>«Тип затрат»</em>.</li>
<li>
<p>Сохраните форму.</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Настройка формы «Затраты»" src="/platform/v5.0/tutorial/img/lesson_5_form_costs_configure.png"/><figcaption class="caption">Настройка формы «Затраты»</figcaption></figure></p>
</li>
<li>
<p>Вернитесь к диаграмме модели данных.</p>
</li>
<li>На диаграмме должна отображаться связь между шаблонами <em>«Типы затрат»</em> и <em>«Затраты»</em>.</li>
<li>
<p>Если связь не отображается, в меню элемента шаблона <em>«Типы затрат»</em> нажмите кнопку «<strong>Показать связанные элементы</strong>» <i class="fa-light fa-link">‌<!--icon--></i>.</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Отображение связей шаблона «Типы затрат» на диаграмме модели данных" src="/platform/v5.0/tutorial/img/lesson_5_data_model_template_cost_types_relations_show.png"/><figcaption class="caption">Отображение связей шаблона «Типы затрат» на диаграмме модели данных</figcaption></figure></p>
</li>
</ol>
<h3 id="установление-связей-между-заявками-на-автомобили-с-затратами">Установление связей между заявками на автомобили с затратами</h3>
<p>Теперь свяжем реестр данных <em>«Заявки на автомобили»</em> с <em>«Затратами»</em> с помощью <strong>взаимной связи</strong> атрибутов типа «<strong>Запись</strong>»…</p>
<ol class="colored_numbers_list">
<li>На диаграмме модели данных выберите шаблон <em>«Заявки на автомобили»</em>.</li>
<li>Нажмите кнопку «<strong>Добавить новый атрибут</strong>» <i class="fa-light fa-circle-plus">‌<!--icon--></i> в меню элемента.</li>
<li>
<p>Создайте атрибут со следующими свойствами:</p>
<ul>
<li><strong>Тип данных:</strong> <strong>запись</strong></li>
<li><strong>Название:</strong> <em>Затраты</em></li>
<li><strong>Хранить несколько значений:</strong> установите флажок (только для атрибута <em>«Затраты»</em>)</li>
<li><strong>Связанный шаблон:</strong> <em>Затраты</em></li>
<li><strong>Взаимная связь с атрибутом: с новым</strong><ul>
<li><strong>Название нового атрибута:</strong> <em>Заявка</em></li>
<li><strong>Хранить несколько значений:</strong> не устанавливайте флажок</li>
</ul>
</li>
</ul>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Настройка взаимосвязанных атрибутов «Затраты» и «Заявка»" src="/platform/v5.0/tutorial/img/lesson_5_costs_reqest_relation_configure.png"/><figcaption class="caption">Настройка взаимосвязанных атрибутов «Затраты» и «Заявка»</figcaption></figure></p>
</li>
<li>
<p>На диаграмме должна отображаться связь между шаблонами <em>«Заявки на автомобили»</em> и <em>«Затраты»</em>. Если связь не отображается, в меню элемента шаблона <em>«Заявки на автомобили»</em> нажмите кнопку «<strong>Показать связанные элементы</strong>»  <i class="fa-light fa-link">‌<!--icon--></i>.</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Отображение связей шаблона записи «Заявки на автомобили»" src="/platform/v5.0/tutorial/img/lesson_5_data_model_relations_show.png"/><figcaption class="caption">Отображение связей шаблона записи «Заявки на автомобили»</figcaption></figure></p>
</li>
</ol>
<h3 id="настройка-таблицы-затрат">Настройка таблицы затрат</h3>
<ol class="colored_numbers_list">
<li>Откройте диаграмму модели данных.</li>
<li>
<p>Перейдите к списку таблиц шаблона <em>«Затраты»</em>, выбрав в его меню элемента пункт «<strong>Перейти к шаблону</strong>» <i class="fa-light fa-arrow-up-right-from-square">‌<!--icon--></i> — «<strong>Таблицы</strong>» <i class="fa-light fa-boxes-stacked">‌<!--icon--></i>.</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Переход к таблицам шаблона записи «Затраты» с диаграммы модели данных" src="/platform/v5.0/tutorial/img/lesson_5_data_model_costs_table_edit.png"/><figcaption class="caption">Переход к таблицам шаблона записи «Затраты» с диаграммы модели данных</figcaption></figure></p>
</li>
<li>
<p>Настройте таблицу «<strong>Все записи</strong>» шаблона <em>«Затраты»</em> так, чтобы в ней отображались атрибуты <em>«Заявка»</em>, <em>«Тип затрат»</em> и <em>«Сумма»</em>.</p>
</li>
<li>
<p>Сохраните таблицу.</p>
<p><figure class="screenshot_with_caption" markdown=""><img alt="Настройка таблицы «Все записи» шаблона «Затраты»" src="/platform/v5.0/tutorial/img/lesson_5_costs_table_configure.png"/><figcaption class="caption">Настройка таблицы «Все записи» шаблона «Затраты»</figcaption></figure></p>
</li>
</ol>
<h2 id="результаты">Результаты</h2>
<p>В ходе этого урока вы познакомились с новым типом атрибутов — «<strong>Запись</strong>» и узнали, как с его помощью установить <strong>взаимную связь</strong> между шаблонами записей.</p>
<p>Мы улучшили наше приложение — добавили в него справочник <em>«Типы автомобилей»</em> и мастер-данные для учёта автомобилей.</p>
<p>В <a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4870">следующем уроке</a> мы усовершенствуем наш процесс — используем созданный справочник, мастер-данные и транзакционные данные.</p>
</article>
</div>
</div>
<a class="md-top md-icon mkdocs_imported_link" data-md-component="top" href="#">
<i class="fa-light fa-arrow-up">‌<!--icon--></i>
            К началу
          </a>
</main>
</div>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": true, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></div>
---
title: Урок 2. Мой первый реестр данных
kbId: 4873
---

# Урок 2. Мой первый реестр данных

    - [Настройка параметров фильтрации, сортировки и группировки записей списка для текущего пользователя](#настройка-параметров-фильтрации-сортировки-и-группировки-записей-списка-для-текущего-пользователя)
    
    
        - [Сортировка записи](#сортировка-записи)
        - [Фильтр записей](#фильтр-записей)
        - [Группировка записей](#группировка-записей)
        - [Скрытие столбца](#скрытие-столбца)
    - [Настройка параметров сортировки, группировки, подсчета итогов и фильтрации данных в таблице для всех пользователей](#настройка-параметров-сортировки-группировки-подсчета-итогов-и-фильтрации-данных-в-таблице-для-всех-пользователей)
- [Результаты](#результаты)

## Введение

В рамках обучения мы разработаем корпоративное приложение для заказа корпоративного транспорта.

В ходе этого урока вы создадите **приложение**, **шаблон записи** (реестр заявок), настроите **атрибуты** для хранения данных заявок, их отображение в виде **таблицы** и **формы**, а затем оформите несколько заявок.

Бизнес-логика

Мы реализуем следующий процесс бронирования автомобиля:

1. *Заказчик* подает заявку на автомобиль.
2. *Секретарь* рассматривает и одобряет либо отклоняет заявку.
3. Если запрос одобрен:

    - *Диспетчер гаража* назначает транспортное средство для поездки.
    - *Заказчик* получает уведомление о бронировании автомобиля.
    - *Водитель* выполняет поездку.
4. Если запрос отклонен, *Заказчик* получает уведомление об отказе.

Подробные сведения о приложениях в **{{ productName }}** см. в разделе «[Разработка приложений](https://kb.comindware.ru/category.php?id=832)».

**Предусловия:** выполнена авторизация, пройден *[урок 1 «Первое знакомство»][lesson_1]*.

**Расчётная продолжительность:** 60 мин.

Примечание

В данном уроке представлен продукт **{{ productName }}** версии 5.0, внешний вид страниц и меню в других версиях продукта может отличаться.

## Определения

- **Приложение** — настроенная в **{{ productName }}** совокупность бизнес-процессов, диаграмм, моделей данных, экранных форм, механизмов обработки данных и ролевой модели для решения определённых задач.
- **Шаблон записи** — модель бизнес-сущности (в виде атрибутов) и хранилище (реестр) данных в **{{ productName }}** (аналог таблицы реляционной базы данных или листа Excel). Записи из шаблона могут быть представлены в виде таблиц, карточек и форм. Подробные сведения о шаблонах представлены в статье *«[Шаблоны. Определения и настройка][record_templates]»*.
- **Запись** — набор данных (значений атрибутов) в шаблоне, описывающий экземпляр бизнес-сущности (элемент справочника, транзакцию и т. п.).
- **Атрибут** — простейший элемент данных, описывающий бизнес-сущность (аналог поля в реляционной БД или столбца в Excel), например: место подачи (строка), количество пассажиров (число), время подачи автомобиля (дата/время), автомобиль (ссылка) и т. п.
- **Форма** — страница с полями для отображения и ввода данных.
- **Таблица** — список, содержащий записи в строках со значениями атрибутов в столбцах. В таблице можно настроить фильтры для для отображения определённых записей.

## Создание приложения

Создадим приложение для автоматизации заявок на корпоративный автотранспорт.

Совет

Во всех последующих инструкциях и уроках, необходимость изменения любых параметров при настройке приложения указана явно. Если не указано изменение какого-либо параметра, это означает, что его состояние при настройте следует оставлять неизменным (исходным по умолчанию).

То есть при прохождении уроков во время настройки приложения и других элементов изменяйте только те поля, значения и флажки, которые указаны в инструкциях. Не изменяйте остальные параметры.

Соблюдение этой рекомендации поможет достичь ожидаемого поведения результирующего приложения.

При этом вы можете экспериментировать со значениями полей при заполнении форм во время тестирования приложения в роли конечного пользователя.

1. На панели навигации слева выберите пункт «**Настройки**» — «**Приложения**».
2. Нажмите кнопку «**Создать**».

_![Переход к созданию приложения](/platform/v5.0/tutorial/img/lesson_2_app_create.png)_
3. Введите наглядное название приложения, например *«Управление автопарком»*. После заполнения имени поле «**Системное имя**» заполнится автоматически, при желании вы можете ввести собственное системное имя.

Системное имя и отображаемое название

    - У сущностей в **{{ productName }}** предусмотрены **системное имя** и **название**.
    - **Системное имя** — это идентификатор сущности (атрибута, шаблона, поля и т. п.), используемый в сценариях, скриптах, правилах, формулах и выражениях.
    
     Не должно начинаться с цифры. Разрешены английские и русские буквы, цифры и символ «\_». Рекомендуется использовать английские буквы.
    
     Обычно заполняется автоматически по названию.
    - **Название** и **отображаемое название** — это наглядная подпись сущности (атрибута, шаблона, формы, поля, кнопки, таблицы и т. п.). Название может содержать любые символы и по возможности должно быть кратким и понятным.
4. Нажмите кнопку «**Сохранить**».

_![Настройка свойств нового приложения](/platform/v5.0/tutorial/img/lesson_2_app_configure.png)_
5. Дважды нажмите строку созданного приложения в списке.
6. Отобразится страница «**Администрирование**» приложения.

_![Открытие приложения из списка](/platform/v5.0/tutorial/img/lesson_2_app_list.png)_

## Создание шаблона записи

Определим данные заявки на автомобиль, которые необходимо хранить в **шаблоне записи**.

Создадим шаблон записи для заявки на автомобиль.

1. На странице «**Администрирование**» приложения *«Управление автопарком»* выберите пункт «**Шаблоны**» *‌*.
2. Отобразится список всех шаблонов приложения.
3. Выберите вкладку «**Шаблоны записей**».
4. Нажмите кнопку «**Создать**».

_![Переход к созданию шаблона записи](/platform/v5.0/tutorial/img/lesson_2_record_template_create.png)_
5. Отобразится окно «**Новый шаблон**».
6. В поле «**Название**» введите наглядное наименование шаблона — *«Заявки на автомобили»*.
7. **Системное имя** будет заполнено автоматически.
8. В поле «**Тип шаблона**» должно быть автоматически выбрано значение «**Шаблон записи**».
9. Остальные поля оставьте без изменений.
10. Нажмите кнопку «**Создать**».

_![Создание шаблона записи](/platform/v5.0/tutorial/img/lesson_2_record_template_configure.png)_

## Создание атрибутов шаблона записи

Добавим атрибуты заявки на автомобиль.

Мы создадим минимальный набор атрибутов, необходимый для оформления и обработки заявки на корпоративный автомобиль.

Примечание

Следуя гибкой методологии, на начальном этапе мы не зададим все атрибуты, а ограничимся минимально необходимыми.

Наша цель — как можно быстрее сделать работоспособное приложение и показать первым пользователям.

Затем, получив от обратную связь от пользователей, мы будем добавлять в нашу таблицу новые атрибуты и вносить другие доработки по их пожеланиям.

Типы атрибутов

В **{{ productName }}** предусмотрены атрибуты различных типов для хранения бизнес-данных.

- **Текст** — строковое значение. Можно выбрать **формат отображения** значения атрибута:
    - **Обычный текст** — без форматирования;
    - **Размеченный текст** — базовое форматирование (жирный, курсив, списки).
    - **HTML-текст** — расширенное форматирование с помощью тегов HTML.
    - **Телефон (РФ)**, **Адрес эл. почты**, **Паспорт (РФ)**, **Индекс (РФ)**, **ИНН юрлица**, **ИНН физлица**, **ОГРН (РФ)**, **Регистрационный номер ТС (РФ)**, **Особая маска** — значение атрибута форматируется с использованием маски в виде регулярного выражения.
- **Число** — числовое значение. Можно выбрать **количество знаков после запятой**:
    - **Не преобразовывать** — значение отображается в том же формате, что его ввёл пользователь;
    - **0** — значение отображается в виде целого числа;
    - **1–6** — значение отображается в виде десятичной дроби с указанным количеством знаков после запятой;
- **Дата и время** — значение даты и времени. Доступно несколько **форматов отображения**, позволяющих выводить либо только дату, либо дату и время.
- **Документ** — к атрибуту можно прикрепить любые файлы, например в формате Word, PDF или ZIP.
- **Изображение** — к атрибуту можно прикрепить изображения, например сканы документов или фотографии.

Кроме того, **{{ productName }}** поддерживает атрибуты следующих типов: **Аккаунт**, **Гиперссылка**, **Длительность**, **Запись**, **Логический**, **Организационная единица**, **Роль**, **Список значений**. С некоторыми из них мы познакомимся позже.

Подробные сведения об атрибутах см. в статье *«[Атрибуты. Определения и настройка][attributes]»*

1. Выберите вкладку «**Атрибуты**».
2. Нажмите кнопку «**Создать**».

_![Переход к созданию атрибута шаблона записи](/platform/v5.0/tutorial/img/lesson_2_attribute_create.png)_
3. Отобразится окно «**Новый шаблон**».
4. Выберите **тип данных** «**Текст**».
5. Введите **название** *«Место подачи»*.
6. **Системное имя** будет заполнено автоматически.
7. Остальные поля оставьте без изменений.
8. Нажмите кнопку «**Сохранить**».

_![Настройка свойств атрибута](/platform/v5.0/tutorial/img/lesson_2_attribute_configure.png)_
9. Аналогично создайте следующие атрибуты:

| Тип данных | Название |
| --- | --- |
| **Дата и время** | *Время подачи* |
| **Текст** | *Маршрут* |
| **Число** | *Пассажиры* |

## Создание формы для просмотра и ввода данных

Теперь настроим экранную форму для просмотра и ввода данных заявки на автомобиль.

1. На странице шаблона записи *«Заявки на автомобили»* выберите вкладку «**Формы**».

Основная форма шаблона

При создании шаблона записи автоматически создаётся пустая **основная форма**, в которой по умолчанию открываются записи шаблона.

Для шаблона записи *«Заявки на автомобили»* была создана форма *«Заявки на автомобили — Основная форма»*.
2. В списке форм дважды нажмите пункт *«Заявки на автомобили — Основная форма»*.

_![Переход к редактированию формы из списка](/platform/v5.0/tutorial/img/lesson_2_form_edit.png)_
3. Отобразится **конструктор формы**:

_![Конструктор формы](/platform/v5.0/tutorial/img/lesson_2_form_designer.png)_

Конструктор формы

**Конструктор формы** разбит на четыре области:

**(1)** **Панель элементов** — палитра элементов, которые можно перетащить на форму: атрибуты и вспомогательные визуальные элементы (**Область**, **Вкладки**, **Группа кнопок**, **Разделитель кнопок**, **Колонки**, **Статичный текст**).

**(2)** **Макет формы** — эскиз экранной формы.

**(3)** **Панель свойств** — позволяет просмотреть и изменить свойства выбранного элемента.

**(4)** **Кнопки** — **Сохранить**, **Очистить**, **Клонировать**, **Настроить шаблон** *‌*, **Связи** *‌*.

В **конструкторе форм** предусмотрен богатый набор элементов и функций, но в данном уроке мы рассмотрим только основные из них. Вы можете самостоятельно поэкспериментировать с элементами и настройками формы.

Подробные сведения о настройке форм см. в статье *«[Формы. Определения и настройка][forms]»*.
4. Перетащите на макет формы элемент «**Область**» с панели элементов.
5. Перетащите на макет формы атрибут *«Время подачи»* с панели элементов.

_![Перетаскивание атрибута на форму](/platform/v5.0/tutorial/img/lesson_2_form_add_field.png)_
6. Аналогичным образом перетащите на макет формы атрибуты *«Место подачи», «Маршрут», «Пассажиры»*.

Бизнес-логика

В поле *«Время подачи» Заказчик* должен вводить дату и время. Но по умолчанию для этого атрибута выбран **формат отображения** только даты. Изменим формат отображения атрибута.
7. На панели элементов щелкните значок «**Редактировать**» *‌* у атрибута *«Время подачи»*.

_![Переход к редактированию атрибута из панели элементов](/platform/v5.0/tutorial/img/lesson_2_form_edit_attribute.png)_
8. Отобразится окно свойств атрибута.
9. Выберите **формат отображения**, включающий время, например «**4 сент. 1986 г. 07:30**».
10. Нажмите кнопку «**Сохранить**».

_![Выбор формата отображения атрибута типа «Дата / время»](/platform/v5.0/tutorial/img/lesson_2_attribute_date_time_edit.png)_

### Назначение обязательных для заполнения полей

1. Выберите на форме поле *«Время подачи»*.
2. В поле «**Доступ**» на панели свойств поля выберите режим «**Требовать ввод**».

_![Выбор режима доступа к полю в форме](/platform/v5.0/tutorial/img/lesson_2_form_field_access_select.png)_
3. Аналогично сделайте обязательным поле *«Место подачи»*.

Визуальные элементы формы

Чтобы сделать форму более удобной для пользователя, используйте следующие элементы:

    - **Область** — визуально группирует поля, имеет заголовок и может содержать кнопки. На форме должна быть как минимум одна область.
    - **Статичный текст** — отображает текст, доступный только для чтения.
    - **Вкладки** — позволяет распределить поля по вкладкам, между которыми пользователь может переходить.
    - **Колонки** — позволяет расположить поля в несколько столбцов.
4. Перетащите на форму элемент «**Колонки**» с панели элементов.
5. Перетащите поля *«Время подачи»* и *«Место подачи»* с макета формы соответственно в левый и правый столбцы элемента «**Колонки**».

_![Упорядочивание элементов формы с помощью колонок](/platform/v5.0/tutorial/img/lesson_2_form_columns_arrange.png)_
6. Выберите заголовок **новой области** и с помощью панели свойств присвойте её наглядное **отображаемое название**: *Форма заявки на автомобиль*.
7. Сохраните форму, нажав кнопку «**Сохранить**» в конструкторе форм.

_![Переименование области формы и сохранение формы](/platform/v5.0/tutorial/img/lesson_2_form_rename.png)_

## Тестирование: ввод и редактирование заявок

Мы создали форму для заявки на автомобиль. Теперь мы протестируем её от лица *Заказчика*.

1. Нажмите кнопку «**Настроить шаблон**» *‌*.

_![Переход из конструктора формы к настройке шаблона записи](/platform/v5.0/tutorial/img/lesson_2_form_template_edit.png)_
2. Нажмите кнопку «**Перейти к экземплярам**».

_![Переход к списку записей шаблона](/platform/v5.0/tutorial/img/lesson_2_template_open_record_list.png)_
3. Отобразится список записей шаблона.
4. Нажмите кнопку «**Создать**», чтобы оформить новую заявку на автомобиль — запись в шаблоне.

_![Переход к созданию записи из списка записей шаблона](/platform/v5.0/tutorial/img/lesson_2_template_record_create.png)_
5. Откроется *форма заявки на автомобиль*.
6. Заполните все поля и нажмите кнопку «**Сохранить**».

_![Заполнение заявки на автомобиль](/platform/v5.0/tutorial/img/lesson_2_request_create.png)_
7. Нажмите ссылку «**Заявки на автомобили**» над формой, чтобы вернуться к списку заявок.

_![Переход с формы к списку записей шаблона](/platform/v5.0/tutorial/img/lesson_2_request_return_to_list.png)_
8. Создайте несколько заявок на автомобиль таким же образом.
9. Созданные записи будут отображаться в списке.
10. Двойным нажатием в списке записей откройте созданную запись, измените данные заявки и сохраните её.

_![Открытие записи из списка](/platform/v5.0/tutorial/img/lesson_2_template_record_open.png)_

## Доработка формы: добавление поля согласования заявки секретарем

Созданную заявку должен рассмотреть *Секретарь*, но в шаблоне записи *«Заявки на автомобили»* не хватает атрибута для результата рассмотрения заявки. Добавим этот атрибут.

1. Перейдите к настройке шаблона записи. Для этого нажмите кнопку «**Мои настройки**» *‌* на странице «**Все записи**» и выберите пункт «**Настроить шаблон**».

_![Переход к настройкам шаблона из списка записей](/platform/v5.0/tutorial/img/lesson_2_template_edit_from_list.png)_
2. На странице шаблона записи выберите вкладку «**Атрибуты**».
3. Нажмите кнопку «**Создать**».

_![Переход к созданию атрибута в шаблоне](/platform/v5.0/tutorial/img/lesson_2_template_attribute_create.png)_
4. Отобразится окно «**Новый атрибут**».
5. Введите **название** *«Заявка одобрена»* и выберите **тип данных** «**Логический**».
6. Нажмите кнопку «**Сохранить**».

_![Создание атрибута «Заявка одобрена» типа «Логический»](/platform/v5.0/tutorial/img/lesson_2_template_attribute_configure.png)_

## Настройка таблицы со списком записей

В шаблоне записи по умолчанию предусмотрена таблица «**Все записи**», которая показывает список заявок и системные атрибуты: **ID**, **Создатель**, **Дата создания**, **В архиве**, **Дата изменения**.

Список заявок на автомобили в таблице «**Все записи**» не информативен, так как не содержит необходимых данных о заявке. Доработаем этот список.

1. Перейдите на вкладку «**Таблицы**» шаблона записи и дважды нажмите строку «**Все записи**».

_![Переход к конструктору таблицы](/platform/v5.0/tutorial/img/lesson_2_template_table_edit.png)_
2. Отобразится конструктор таблицы, который позволяет настроить набор и порядок отображения столбцов.
3. Для начала удалим столбцы, которые пользователю не интересны.
4. Выберите элемент «**ID**» в макете таблицы и перетащите его за пределы макета, например на панель элементов.
5. Таким же образом уберите из таблицы столбцы «**Дата создания**», «**В архиве**» и «**Используется в процессе**».
6. Оставьте в таблице столбцы «**Создатель**» и «**Дата изменения**».

_![Конструктор таблицы — удаление столбцов](/platform/v5.0/tutorial/img/lesson_2_table_designer_column_delete.png)_
7. Теперь добавим в таблицу необходимые столбцы.
8. Перетащите следующие атрибуты с панели элементов на макет таблицы: *«Время подачи», «Место подачи», «Маршрут», «Пассажиры»*.

Примечание

Последовательность, в которой элементы расположены в конструкторе таблицы, определяет последовательность столбцов при её отображении. То есть элемент, который расположен вверху в конструкторе таблицы, отобразится первым (слева) в таблице.
9. Нажмите кнопку «**Сохранить**».
10. Будут сохранены параметры отображения таблицы по умолчанию для всех пользователей.
11. В меню *‌* выберите пункт «**Настроить шаблон**».

_![Конструктор таблицы — добавление столбцов и возврат к настройке шаблона](/platform/v5.0/tutorial/img/lesson_2_table_designer_column_add.png)_
12. Отобразится вкладка «**Свойства**» шаблона.
13. Нажмите кнопку «**Перейти к экземплярам**», чтобы открыть список заявок в виде таблицы с настроенными столбцами.

_![Таблица со список заявок на автомобили с настроенными столбцами](/platform/v5.0/tutorial/img/lesson_2_request_list.png)_

## Поиск и фильтрация записей в таблице

Используем дополнительные настройки отображения записей в таблице — отфильтруем и отсортируем записи в нужном нам порядке, затем настроим группировку и подсчет итогов.

### Настройка параметров фильтрации, сортировки и группировки записей списка для текущего пользователя

Примечание

- В этом параграфе представлены инструкции по настройке параметров отображения столбцов таблицы для **текущего пользователя**. Эти настройки хранятся в платформе индивидуально для каждого пользователя.
- Помимо этого, в конструкторе таблицы можно настроить параметры отображения столбцов, которые будут использоваться **для всех пользователей по умолчанию**. См. *«[Настройка и сохранение параметров сортировки, группировки, подсчета итогов и фильтрации данных в таблице для всех пользователей](#настройка-параметров-сортировки-группировки-подсчета-итогов-и-фильтрации-данных-в-таблице-для-всех-пользователей)»*.

#### Сортировка записи

Отсортируем заявки на автомобили по времени подачи.

1. Нажмите заголовок столбца *«Время подачи»*, чтобы отсортировать данные по этому столбцу: по возрастанию, по убыванию или по умолчанию. Порядок сортировки обозначается стрелкой вниз (по убыванию), стрелкой вверх (по возрастанию) или отсутствием стрелки (по умолчанию) в заголовке столбца.

_![Сортировка таблицы нажатием заголовка столбца](/platform/v5.0/tutorial/img/lesson_2_table_sort.png)_

#### Фильтр записей

Для отображения записей, содержащих определённое значение, можно использовать фильтр «**Равно**» или «**Содержит строку**».

1. Нажмите значок фильтра *‌* в столбце *«Маршрут»*.
2. В раскрывшемся меню установите флажок «**Фильтровать данные**» и выберите тип фильтра «**Содержит строку**».
3. Введите искомое значение для фильтра в поле «**Введите текст**».
4. Нажмите кнопку «**Сохранить**».

_![Применение фильтра записей по содержимому столбца](/platform/v5.0/tutorial/img/lesson_2_table_filter.png)_
5. В списке отобразятся записи, соответствующие указанному фильтру.
6. Чтобы сбросить фильтр записей, нажмите значок фильтра *‌* в столбце *«Маршрут»*, снимите флажок «**Фильтровать данные**» и нажмите кнопку «**Сохранить**».

_![Отключение фильтрации записей в таблице](/platform/v5.0/tutorial/img/lesson_2_table_filter_disable.png)_

#### Группировка записей

Сгруппируем заявки на автомобиль с одинаковым маршрутом.

1. Нажмите значок фильтра *‌* в столбце *«Маршрут»*.
2. В раскрывшемся меню установите флажок «**Группировать**» и нажмите кнопку «**Сохранить**».

_![Группировка записей в таблице](/platform/v5.0/tutorial/img/lesson_2_table_group.png)_

#### Скрытие столбца

Скроем столбец «**Дата изменения**».

1. Нажмите кнопку *‌* над таблицей
2. В раскрывшемся меню выберите пункт «**Настроить внешний вид**».

_![Переход к пользовательской настройке внешнего вида таблицы](/platform/v5.0/tutorial/img/lesson_2_table_go_to_personal_config.png)_
3. Отобразится страница настройки внешнего вида таблицы.
4. Снимите флажок «**Дата изменения**», чтобы скрыть из таблицы этот столбец.
5. Нажмите кнопку «**Сохранить**».
6. Чтобы восстановить исходную конфигурацию отображения таблицы, нажмите кнопку «**Сбросить**».

_![Настройка пользовательской конфигурации внешнего вида таблицы](/platform/v5.0/tutorial/img/lesson_2_table_personal_config.png)_

### Настройка параметров сортировки, группировки, подсчета итогов и фильтрации данных в таблице для всех пользователей

Примечание

- В этом параграфе представлены инструкции по настройке параметров отображения столбцов таблицы, которые будут использоваться **для всех пользователей по умолчанию**.
- Кроме того, каждый пользователь может настроить отображение столбцов индивидуально в соответствии со своими потребностями. См. параграф *«[Настройка параметров фильтрации, сортировки и группировки записей списка для текущего пользователя](#настройка-параметров-фильтрации-сортировки-и-группировки-записей-списка-для-текущего-пользователя)»*.

1. Нажмите кнопку *‌* и в раскрывшемся меню выберите пункт «**Настроить таблицу**».
2. Отобразится конструктор таблицы.

_![Переход к конструктору таблицы](/platform/v5.0/tutorial/img/lesson_2_table_go_to_designer.png)_
3. Выберите вкладку «**Дополнительные**» в панели «**Свойства таблицы**».
4. Перетащите атрибуты из макета таблицы в области «**Сортировка**», «**Группировка**» и «**Фильтрация**».
5. Настройте параметры сортировки, группировки и фильтрации данных в таблице для всех пользователей.
6. Нажмите кнопку «**Сохранить**».

_![Настройка параметров сортировки, группировки и фильтрации списка по умолчанию для всех пользователей](/platform/v5.0/tutorial/img/lesson_2_table_designer_advanced_properties.png)_

## Результаты

Вы создали свой первый шаблон записи (реестр данных), настроили форму, научились её заполнять и настроили таблицу со списком записей.

В [следующем уроке][lesson_3] вы узнаете, как спроектировать и запустить бизнес-процесс.

[*‌*
 К началу](#)

{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}

---
title: Урок 8. Аккаунты, группы и роли
kbId: 4867
---

# Урок 8. Аккаунты, группы и роли

## Введение

В ходе этого урока вы узнаете, как спроектировать оргструктуру, создать аккаунты для пользователей и управлять ими: назначать роли, выдавать и ограничивать права доступа, настраивать разделы навигации и назначать исполнителей задач:

- Создайте роли и определите их права доступа к шаблонам, используемым в процессе заказа автотранспорта.
- Создайте группы аккаунтов и привяжите их к ролям.
- Назначите в качестве исполнителей задач созданные группы.
- Создадите несколько аккаунтов и добавите их в группы.
- Настроите панель навигации для каждой роли.

**Предусловие:** пройдены *[урок 3 «Мой первый бизнес-процесс»][lesson_4]* и *[урок 4 «Мониторинг и аналитика»][lesson_4]*.

**Расчётная продолжительность:** 50 мин.

Примечание

В данном уроке представлен продукт **{{ productName }}** версии 5.0, внешний вид страниц и меню в других версиях продукта может отличаться.

## Настройка ролей

Роли

**Роли** в **{{ productName }}** задают разрешения на доступ к ресурсам приложения: шаблонам (реестрам), таблицам, кнопкам, формам, задачам процессов и др.

Для настройки **роли** необходимо:

- настроить разрешения на доступ к ресурсам приложения;
- назначить роль пользователям и (или) группам пользователей;
- выбрать раздел навигации, который будет отображаться для пользователей, относящихся к данной роли.

Бизнес-логика

Для приложения управления автопарком настроим следующие **роли** пользователей:

- *Заказчик* — должен иметь возможность создавать и просматривать обработанную заявку.
- *Секретарь* — согласует заявку, должен иметь возможность редактирования и просмотра заявок.
- *Диспетчер гаража* — принимает заявку и выделяет машину, должен иметь возможность редактировать заявку и формировать отчеты.
- *Водитель* — выполняет рейс, должен иметь возможность просмотра заявки, создания нового автомобиля и внесения затрат.
- Все пользователи должны иметь возможность завершать назначенные им задачи.

### Создание роли «Заказчик»

1. С помощью панели навигации слева прейдите в раздел «**Настройки**» — «**Приложения**».
2. Откройте приложение *«Управление автопарком»*.
3. Перейдите к странице «**Роли**» *‌*.
4. В списке ролей нажмите кнопку «**Создать**».
5. Отобразится страница свойств новой роли.
6. Укажите **название** роли — *«Заказчик»*.

_![Создание роли «Заказчик»](/platform/v5.0/tutorial/img/lesson_8_role_create_customer.png)_
7. Определим разрешения для роли *«Заказчик»*.

Бизнес-логика

Чтобы *Заказчик* мог возможность инициировать процесс заказа автотранспорта и завершать свои задачи, настроим разрешения на доступ к шаблону процесса *«Заказ автотранспорта»* и его кнопкам.
8. Перейдите на вкладку «**Разрешения**».
9. В списке слева разверните процесс *«Заказ автотранспорта»* и перетащите в таблицу разрешений справа кнопки «**Создать**» и «**Завершить задачу**».
10. Установите флажок (разрешение) в столбце «**Просмотр**» для приложения *«Управление автопарком»*.
11. Установите флажки (разрешения) в столбце «**Создание**» и «**Просмотр**» для шаблона процесса *«Заказ автотранспорта»*.
12. Для кнопок «**Создать**» и «**Завершить задачу**» установите разрешения «**Использование кнопки**», как показано на иллюстрации.

_![Настройка разрешений для приложения, шаблона процесса и кнопок «Создать» и «Завершить задачу»](/platform/v5.0/tutorial/img/lesson_8_role_permissions_customer_fleet_management.png)_

Бизнес-логика

Чтобы заказчик мог выбирать тип автомобиля при подаче заявки, настроим доступ для просмотра данных из справочника *«Типы автомобилей»*.
13. Перетащите на таблицу разрешений справочник *«Типы автомобилей»* и установите для него разрешение «**Просмотр**».

_![Назначение разрешения «Просмотр» для справочника «Типы автомобилей»](/platform/v5.0/tutorial/img/lesson_8_role_permissions_customer_vehicle_types.png)_

Бизнес-логика

Чтобы *Заказчик* мог создавать заявки на автомобиль, просматривать их список и форму заявки, настроим доступ к шаблону записи *«Заявки на автомобили»*.
14. Разверните элемент *«Заявки на автомобили»* на панели элементов слева и перетащите таблицу «**Все записи**» в таблицу разрешений.
15. Перетащите в таблицу разрешений форму *«Заявки на автомобили — Основная форма»*.
16. Установите разрешения «**Создание**» и «**Просмотр**» для шаблона записи *«Заявки на автомобили»*.
17. Установите разрешение «**Просмотр**» для основной формы и таблицы «**Все записи**» шаблона *«Заявки на автомобили»*.
18. Сохраните роль *«Заказчик»*.

_![Настройка разрешений роли «Заказчик» для создания и просмотра заявок на автомобиль](/platform/v5.0/tutorial/img/lesson_8_role_permissions_customer_requests.png)_

### Создание роли «Секретарь»

Бизнес-логика

Чтобы *Секретарь* мог рассматривать, отклонять и принимать заявки на автомобиль, настроим доступ к шаблону процесса *«Заказ автотранспорта»* и шаблонам записи *«Заявки на автомобили»*, *«Статусы заявок»* и *«Типы автомобилей»*.

1. Создайте роль *«Секретарь»*.
2. Перейдите на вкладку «**Разрешения**».
3. Перетащите в таблицу разрешений процесс *«Заказ автотранспорта»* и установите разрешения «**Просмотр**» и «**Ввод данных**».
4. Разверните процесс *«Заказ автотранспорта»* и перетащите в таблицу разрешений кнопки «**Завершить задачу**» и «**Сохранить**».
5. Установите для кнопок «**Завершить задачу**» и «**Сохранить**» разрешение «**Использование кнопки**».
6. Перетащите в таблицу разрешений шаблон *«Заявки на автомобили»* и установите для него разрешение «**Полный доступ**».
7. Перетащите в таблицу разрешений шаблоны *«Типы автомобилей»* и *«Статусы заявок»* и установите для них разрешение «**Просмотр**».
8. Сохраните роль *«Секретарь»*.

_![Настройка разрешений роли «Секретарь»](/platform/v5.0/tutorial/img/lesson_8_role_permissions_secretary.png)_

### Создание роли «Диспетчер гаража»

Бизнес-логика

Чтобы *Диспетчер гаража* мог рассматривать заявки, выделять автомобили и просматривать затраты на рейсы, настроим доступ к шаблону процесса *«Заказ автотранспорта»* и шаблонам записи *«Заявки на автомобили»*, *«Статусы заявок»*, *«Затраты»*, *«Типы затрат»*, *«Автомобили»*, *«Типы автомобилей»*.

1. Создайте роль *«Диспетчер гаража»*.
2. Перейдите на вкладку «**Разрешения**».
3. Перетащите в таблицу разрешений шаблоны *«Заказ автотранспорта», «Заявки на автомобили», «Затраты», «Типы затрат», «Автомобили», «Типы автомобилей», «Статусы заявок»* и установите для них разрешение «**Полный доступ**».
4. Сохраните роль *«Диспетчер гаража»*.

_![Настройка разрешений роли «Диспетчер гаража»](/platform/v5.0/tutorial/img/lesson_8_role_permissions_garage_manager.png)_

### Создание роли «Водитель»

Бизнес-логика

Чтобы *Водитель* мог просматривать заявки, выполнять рейс, добавлять автомобили и вносить затраты на рейсы, настроим доступ к шаблону процесса *«Заказ автотранспорта»* и шаблонам записи *«Заявки на автомобили»*, *«Статусы заявок»*, *«Затраты»*, *«Типы затрат»*, *«Автомобили»* и *«Типы автомобилей»*.

1. Создайте роль *«Водитель»*.
2. Перейдите на вкладку «**Разрешения**».
3. Перетащите в таблицу разрешений шаблоны *«Типы затрат», «Типы автомобилей» и «Статусы заявок»* и установите для них разрешение «**Просмотр**».
4. Для шаблона *«Автомобили»* установите разрешение «**Просмотр**».
5. Для шаблона *«Заявки на автомобили»* установите разрешения «**Просмотр**» и «**Ввод данных**».
6. Разверните процесс *«Заказ автотранспорта»* и перетащите в таблицу разрешений кнопки «**Сохранить**» и «**Завершить задачу**». Установите для них разрешение «**Использование кнопки**».
7. Для процесса *«Заказ автотранспорта»* установите разрешения «**Просмотр**» и «**Ввод данных**».
8. Для шаблона *«Затраты»* и установите разрешения «**Создание**», «**Просмотр**» и «**Ввод данных**».
9. Разверните шаблон *«Затраты»*, перетащите из него в таблицу разрешений таблицу «**Все записи**» и установите для неё разрешение «**Просмотр**»
10. Из шаблона *«Затраты»* перетащите в таблицу разрешений кнопку «**Создать**» и установите для нее разрешение «**Использование кнопки**».
11. Сохраните роль *«Водитель»*.

_![Настройка разрешений роли «Водитель»](/platform/v5.0/tutorial/img/lesson_8_role_permissions_driver.png)_

## Настройка групп аккаунтов

Бизнес-логика

Мы создали роли *«Заказчик», «Секретарь», «Водитель»* и *«Диспетчер гаража»* и определили для них разрешения на доступ к ресурсам приложения.

Чтобы применить заданные в ролях разрешения к аккаунтам, создадим группы аккаунтов и назначим им роли.

1. На панели навигации выберите пункты «**Настройки**» — «**Группы**».
2. В списке групп нажмите кнопку «**Создать**».
3. Укажите название группы *«Секретари»* и нажмите кнопку «**Создать**», чтобы сохранить группу.

_![Создание новой группы аккаунтов](/platform/v5.0/tutorial/img/lesson_8_group_create.png)_
4. Аналогичным образом создайте группы *«Диспетчеры»* и *«Водители»*.
5. Создайте группу *«Сотрудники»*, которая будет включать в себя всех сотрудников:

    - На вкладке «**Участники**» нажмите в левом столбце группы *«Диспетчеры», «Водители»* и *«Секретари»*.
    - Эти группы отобразятся в правом столбце будут добавлены в группу *«Сотрудники»*._![Участники группы «Сотрудники»](/platform/v5.0/tutorial/img/lesson_8_group_members_employees.png)_
6. Нажмите кнопку «**Создать**», чтобы сохранить группу *«Сотрудники»*.

_![Результирующий список групп](/platform/v5.0/tutorial/img/lesson_8_groups_resulting.png)_

## Назначение группам ролей

Бизнес-логика

Создать заявку на автомобиль может любой сотрудник. Поэтому мы назначим роль *«Заказчик»* группе *«Сотрудники»*.

Соответственно, роли *«Секретарь»*, *«Диспетчер гаража»* и *«Водитель»* назначим группам *«Секретари»*, *«Диспетчеры гаража»* и *«Водители»*.

1. На боковой панели выберите пункт «**Настройки**» — «**Роли**».
2. В отобразившемся списке ролей откройте роль *«Заказчик»*, дважды нажав её.

_![Переход к настройке роли](/platform/v5.0/tutorial/img/lesson_8_open_role.png)_
3. На вкладке «**Свойства роли**» в области «**Выберите участников роли**» нажмите группу *«Сотрудники»*, чтобы перенести ее в список «**Выбранные аккаунты и группы**».
4. Сохраните роль *«Заказчик»*.

_![Выбор группы аккаунтов для роли «Заказчик»](/platform/v5.0/tutorial/img/lesson_8_role_group_assign.png)_
5. Вернитесь к списку ролей и откройте роль *«Секретарь»*.
6. Укажите для роли *«Секретарь»* группу *«Секретари»* и сохраните роль.
7. В списке ролей откройте роль *«Диспетчер гаража»* и укажите для неё группу *«Диспетчеры»*.
8. Для роли *«Водитель»* укажите группу *«Водители»*.

## Назначение исполнителей задач

Бизнес-логика

До этого момента все пользовательские задачи процесса *«Заказ автотранспорта»* назначались текущему пользователю (то есть вашему аккаунту).

Мы создали роли, настроили их разрешения и назначили роли группам аккаунтов.

Теперь назначим роли *«Секретарь»*, *«Диспетчер гаража»* и *«Водитель»* в качестве исполнителей соответствующих задач.

Как и прежде, задачи *«Отменить поездку»* и *«Совершить поездку»* будут автоматически назначаться создателю заявки на автомобиль.

1. На панели навигации выберите пункт «**Настройки**» — «**Приложения**».
2. Перейдите к приложению *«Управление автопарком»*.
3. Откройте раздел «**Шаблоны**» *‌*.
4. Перейдите к шаблону процесса *«Заказ автотранспорта»*.
5. Перейдите на вкладку «**Диаграмма**» и нажмите кнопку «**Редактировать**».
6. Выберите пользовательскую задачу *«Рассмотреть заявку»*.
7. В меню элемента нажмите кнопку «**Свойства**» *‌*.

_![Переход к настройке свойств задачи с диаграммы процесса](/platform/v5.0/tutorial/img/lesson_8_diagram_task_properties_open.png)_
8. Перейдите на вкладку «**Дополнительные**».
9. В поле «**Исполнители**» снимите флажок со своего аккаунта и установите флажок *«Секретарь»*.
10. Нажмите кнопку «**Сохранить**».

_![Назначение исполнителей задачи](/platform/v5.0/tutorial/img/lesson_8_diagram_task_assignees_select.png)_
11. Для задачи *«Принять заявку»* назначьте исполнителем роль *«Диспетчер гаража»*.
12. Для задачи *«Выполнить рейс»* назначьте исполнителем роль *«Водитель»*.
13. Опубликуйте диаграмму процесса.

## Создание аккаунтов

Бизнес-логика

Чтобы протестировать использование приложения в разных ролях, создадим аккаунты сотрудников с соответствующими должностями (*Секретарь*, *Диспетчер*, *Водитель*).

1. На панели навигации выберите пункт «**Настройки**» — «**Аккаунты**» *‌*.
2. В списке аккаунтов нажмите кнопку «**Создать**».

_![Переход к созданию аккаунта](/platform/v5.0/tutorial/img/lesson_8_account_list_create.png)_
3. В поле «**Язык**» укажите «**Русский**».
4. В поле «**Ф. И. О.**» укажите полное имя сотрудника.
5. В поле «**Имя пользователя**» укажите логин, под которым сотрудник будет входить в свой аккаунт.
6. Укажите **пароль** и адрес **эл. почты**.
7. Укажите **должность** *«Диспетчер»* и **отдел** *«Гараж»*.
8. Нажмите кнопку «**Создать**», чтобы сохранить аккаунт.

_![Создание аккаунта Диспетчера](/platform/v5.0/tutorial/img/lesson_8_account_create_garage_manager.png)_
9. Вернитесь к списку аккаунтов и создайте ещё один аккаунт, укажите для него **должность** *«Водитель»* и **отдел** *«Гараж»*.
10. Создайте **два** аккаунта с **должностью** *«Секретарь»*.
11. Создайте аккаунт *Заказчика* с любой должностью. Пользователь этого аккаунта будет создавать заявки.

_![Результирующий список аккаунтов](/platform/v5.0/tutorial/img/lesson_8_accounts_resulting.png)_

## Назначение аккаунтам групп

Бизнес-логика

Чтобы применить настроенные в ролях разрешения к аккаунтам, назначим им группы в соответствии с должностями сотрудников.

1. На панели навигации выберите пункт «**Настройки**» — «**Группы**».
2. Откройте группу *«Водители»*
3. Перейдите на вкладку «**Участники**».
4. Укажите участника группы — аккаунт водителя.
5. Сохраните группу.

_![Выбор участников группы «Водители»](/platform/v5.0/tutorial/img/lesson_8_group_drivers_account_select.png)_
6. Аналогичным образом добавьте аккаунт диспетчера в группу *«Диспетчеры»*, а аккаунты секретарей — в группу *«Секретари»*.
7. Выберите группу *«Сотрудники»* и добавьте в неё аккаунт любого из *Заказчиков*.

_![Добавление аккаунта Заказчика в группу «Сотрудники»](/platform/v5.0/tutorial/img/lesson_8_group_employees_customer_add.png)_

## Настройка панели навигации

Определения

Панель навигации слева состоит из разделов навигации, которые позволяют быстро переходить к различным страницам **{{ productName }}**.

Бизнес-логика

До этого момента мы использовали системный раздел навигации, теперь настроим раздел навигации для каждой роли согласно должностным обязанностям сотрудников.

### Настройка раздела навигации для Заказчика

1. На боковой панели навигации выберите пункт «**Настройки**» — «**Приложения**».
2. В списке приложений выберите *«Управление автопарком»*.
3. Перейдите к странице «**Разделы навигации**» *‌*.
4. В списке разделов навигации нажмите кнопку «**Создать**».
5. Откроется конструктор раздела навигации.
6. С помощью панели свойств справа укажите **отображаемое название** раздела навигации *«Заказчик»*.
7. Удостоверьтесь, что в панели свойств выбрано **приложение** *«Управление автопарком»*.
8. Назначьте разделу навигации выбрать роль, для пользователей которой он будет отображаться:

    - На панели свойств раздела навигации нажмите пункт «**0 ролей**».
    - В окне *«Роли»* укажите роль *«Заказчик»*.
    - Нажмите кнопку «**Применить**»._![Выбор роли для раздела навигации](/platform/v5.0/tutorial/img/lesson_8_navigation_section_role_select.png)_
9. Настройте пункты, которые будут отображаться в разделе навигации для *Заказчика*:

    - Перетащите элемент «**Мои задачи**» с левой панели на макет раздела навигации.
    - Разверните пункты «**Шаблоны процессов**» — *«Заказ автотранспорта»* — «**Кнопки**».
    - Перетащите кнопку «**Создать**» на макет раздела навигации.
10. Сохраните раздел навигации.

_![Настройка раздела навигации для роли «Заказчик»](/platform/v5.0/tutorial/img/lesson_8_navigation_section_configure_customer.png)_

### Настройка раздела навигации для Секретаря

1. Откройте список разделов навигации приложения *«Управление автопарком»*.
2. Нажмите кнопку «**Создать**».
3. Укажите **отображаемое название** раздела навигации *«Секретарь»*.
4. Назначьте разделу навигации роль *«Секретарь»*.
5. Перетащите пункт «**Мои задачи**» на макет раздела навигации.
6. Разверните пункты «**Шаблоны записей**» — *«Заявки на автомобили»* — «**Таблицы**».
7. Перетащите таблицу «**Все записи**» на макет раздела навигации.
8. С помощью панели свойств переименуйте пункт «**Все записи**» в *«Заявки на автомобили»*.
9. Сохраните раздел навигации.

_![Настройка раздела навигации для роли «Секретарь»](/platform/v5.0/tutorial/img/lesson_8_navigation_section_configure_secretary.png)_

### Настройка раздела навигации для водителей и диспетчеров гаража

Бизнес-логика

Настроим навигацию для сотрудников гаража, чтобы они могли обрабатывать заявки и просматривать сводку заявок по месяцам.

1. Откройте список разделов навигации приложения *«Управление автопарком»*.
2. Откройте раздел навигации *«Сводки»*, созданный в ходе [Урока 4][lesson_4].
3. Измените **отображаемое название** раздела навигации на *«Сотрудник гаража»*.
4. Назначьте разделу навигации две роли: *«Диспетчер гаража»* и *«Водитель»*.
5. Перетащите на макет раздела навигации элемент «**Мои задачи**».
6. Разверните пункты «**Шаблоны записей**» — *«Заявки на автомобили»*.
7. Перетащите на макет раздела навигации таблицу «**Все записи**» из шаблона *«Заявки на автомобили»*.
8. Переименуйте пункт «**Все записи**» в *«Заявки на автомобили»*.
9. Разверните пункты «**Шаблоны записей**» — *«Затраты»*.
10. Перетащите на макет раздела навигации таблицу «**Все записи**» из шаблона *«Затраты»*.
11. Переименуйте пункт «**Все записи**» в *«Затраты»*.
12. Сохраните раздел навигации.

_![Настройка раздела навигации для сотрудников гаража](/platform/v5.0/tutorial/img/lesson_8_navigation_section_configure_garage_employees.png)_

_![Результирующий список разделов навигации приложения «Управление автопарком»](/platform/v5.0/tutorial/img/lesson_8_navigation_sections_resulting.png)_

## Тестирование

Примечание

Для тестирования настроенных ролей и исполнителей вам понадобится несколько раз войти в созданные аккаунты с различными ролями — *«Заказчик», «Секретарь», «Диспетчер гаража»* и *«Водитель»*.

Посмотреть имена пользователей аккаунта можно на странице «**Настройки**» — «**Аккаунты**».

Для удобства проводите тестирование новом окне браузера в режиме *«Инкогнито»* или разных браузерах.

### Оформление заявки — Заказчик

1. Войдите в аккаунт *Заказчика*.
2. Выберите пункт «**Создать**» на панели навигации.
3. Заполните поля стартовой формы, чтобы создать заявку на автомобиль и запустить бизнес-процесс.

_![Панель навигации Заказчика и стартовая форма заявки на автомобиль](/platform/v5.0/tutorial/img/lesson_8_request_create.png)_
4. Выйдите из системы: для этого нажмите значок пользователя в правом верхнем углу страницы и выберите пункт «**Выход**».

_![Выход из системы](/platform/v5.0/tutorial/img/lesson_8_logout.png)_

### Рассмотрение заявки — Секретарь

1. Войдите в аккаунт *Секретаря*.
2. Перейдите к странице «**Мои задачи**» с помощью панели навигации.
3. Откройте задачу *«Рассмотреть заявку»*, дважды нажав её.

_![Страница «Мои задачи» для Секретаря](/platform/v5.0/tutorial/img/lesson_8_my_tasks_secretary.png)_
4. Установите флажок *«Заявка одобрена»*
5. Завершите задачу.
6. Выйдите из системы.

### Выделение машины заявки — Диспетчер гаража

1. Войдите в аккаунт *Диспетчера гаража*.
2. На странице «**Мои задачи**» откройте задачу *«Принять заявку»*.
3. Выберите автомобиль и установите флажок *«Принято»*.
4. Завершите задачу.
5. Выйдите из системы.

_![Панель навигации и форма заявки на автомобиль для Диспетчера гаража](/platform/v5.0/tutorial/img/lesson_8_task_accept_request.png)_

### Выполнение рейса — Водитель

1. Войдите в аккаунт *Водителя*.
2. Откройте задачу *«Выполнить рейс»*
3. Заполните данные по затратам.
4. Завершите задачу.

_![Панель навигации и форма заявки на автомобиль для Водителя](/platform/v5.0/tutorial/img/lesson_8_task_perform_ride.png)_
5. Выйдите из системы.

### Совершение поездки — Заказчик

1. Снова войдите в аккаунт *Заказчика*.
2. Завершите задачу *«Совершить поездку»*.

## Результаты

Вы научились настраивать роли и определять права доступа, создавать аккаунты и группы, а также настраивать разделы навигации.

Вы улучшили процесс: теперь выполнением задач процесса занимаются пользователи с ролями, соответствующими их должностям. В целях безопасности и удобства работы пользователи имеют доступ только к тем ресурсам приложения, которые им предназначены.

В ходе [следующего урока][lesson_9] вы научитесь формировать документы с данными из приложения.


{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}

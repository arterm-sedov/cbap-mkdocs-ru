---
title: Сервер каталогов. Настройка подключения
kbId: 2206
---

# Сервер каталогов. Настройка подключения

### Определения

Подключение типа «**Сервер каталогов**» используется для синхронизации аккаунтов со службой Active Directory (AD), OpenLDAP, FreeIPA или аналогичной службой каталогов.

## Настройка подключения

1. Откройте [список подключений][connections].
2. Создайте подключение типа «**Аутентификация**» — «**Сервер каталогов**» или дважды нажмите строку подключения типа «**ActiveDirectory**».
3. Отобразится окно свойств подключения.
4. Настройте свойства подключения на следующих вкладках:
    - [Основные свойства](#mcetoc_1gjrlqgbf3)
    - [Группы на сервере каталогов](#mcetoc_1gjrlqgbf5)
    - [Сопоставление атрибутов](#mcetoc_1gjrlqgbf6)
    - [Дополнительные свойства](#mcetoc_1gjrlqgbf7)
5. Проверьте соединение, нажав кнопку «**Проверить соединение**» на вкладке «**Основные**».
6. Сохраните подключение.

### Основные свойства

- **Тип сервера каталогов** — выберите:
    - **Active Directory**
    - **OpenLDAP**
    - **FreeIPA**
- **Название** — введите наглядное наименование подключения.
- **Использовать по умолчанию** — установите этот флажок, чтобы данное подключение использовалось как основное для синхронизации аккаунтов.
- **Отключить синхронизацию** — установите этот флажок, чтобы прекратить синхронизацию аккаунтов посредством данного подключения.
- **Адрес сервера** — укажите адрес сервера каталогов.
- **Базовое DN** — укажите уникальное имя для доступа к базовой записи сервера каталогов;
- **Имя пользователя** — логин для входа на сервер каталогов:
    - если выбран **тип привязки** « **Простая**», введите *отличительное имя пользователя* на сервере каталогов, например:
    
    ```
    CN=Ivan Ivanov,CN=Users,DC=corp,DC=example,DC=com
    ```
    - если выбран **тип привязки** « **По учётным данным**», введите *отличительное имя пользователя* или *логин* для входа на сервер каталогов.
- **Пароль** — пароль для входа на сервер каталогов.
- Тип привязки — выберите режим привязки пользователей:
    - **Простая**
    - **По учётным данным**
- **Аутентификация пользователей** — выберите протокол проверки подлинности:
    - **LDAP**
    - **Kerberos**
- **Режим синхронизации**
    - **Синхронизировать все аккаунты (без групп)** — выберите этот пункт, чтобы синхронизировать аккаунты без учёта их вхождения в группы и без синхронизации групп.
    - **Выбрать группы для синхронизации** — выберите этот пункт, чтобы синхронизировать аккаунты в выбранных группах. См. вкладку «**[Группы на сервере каталогов](#mcetoc_1gjrlqgbf5)**».
- **Проверить соединение** — нажмите эту кнопку, чтобы протестировать подключение к серверу каталогов.
- **Синхронизировать** — нажмите эту кнопку, чтобы принудительно синхронизировать аккаунты с сервером каталогов.

Внимание!

При SSO-аутентификации, если экземпляр ПО **{{ productName }}** работает под управлением ОС Linux, то для обеспечения возможности аутентификации новых пользователей, добавленных при синхронизации с сервером каталогов необходимо заново создать keytab-файл на сервере с экземпляром ПО.

Эту операцию необходимо выполнять каждый раз после добавления новых пользователей с сервера каталогов на уже настроенной машине с экземпляром ПО.

Если не создать новый keytab-файл, пользователи, добавленные с сервера каталогов после создания имеющегося keytab-файла, не смогут войти в систему.

См. параграф *«[Обновление keytab-файла аутентификации][sso_authenticatation_configure]».*

_![Настройка основных свойств подключения к серверу каталогов](https://kb.comindware.ru/assets/img_660ea08b4cb22.png)_

### Группы на сервере каталогов

- **Исключить все** — нажмите эту кнопку, чтобы прекратить синхронизацию всех групп, перечисленных в таблице ниже.
- **Включить все** — нажмите эту кнопку, чтобы включить синхронизацию всех групп, перечисленных в таблице ниже.
- **Синхронизируется** — в этом столбце отображается флажок, если соответствующая группа на сервере каталогов синхронизируется с **{{ productName }}**.
- **Название** — в этом столбце отображается название группы на сервере каталогов.
- **Уникальное имя** — в этом столбце отображается уникальное имя группы на сервере каталогов.

_![Настройка групп на сервере каталогов](https://kb.comindware.ru/assets/img_660e9d880a16c.png)_

### Сопоставление атрибутов

- **Изменить** — нажмите эту кнопку, чтобы отредактировать сопоставление атрибутов между **{{ productName }}** и сервером каталогов.
- **Восстановить** — нажмите эту кнопку, вернуть стандартное сопоставление атрибутов между **{{ productName }}** и сервером каталогов.
- **Атрибут аккаунта** — в этом столбце укажите атрибуты аккаунта на стороне **{{ productName }}**.
- **Атрибут сервера каталогов** — в этом столбце указаны атрибуты аккаунтов на стороне сервера каталогов.

_![Сопоставление атрибутов для подключения к серверу каталогов](https://kb.comindware.ru/assets/img_660e9c2e22cd2.png)_

### Дополнительные свойства

- **Запретить вход** — установите этот флажок, чтобы использовать подключение только для синхронизации аккаунтов, но не для входа в систему.
- **Домен** — укажите домен сервера каталогов, используемый для аутентификации.
- **Интервал опроса** — укажите периодичность синхронизации, чтобы включить автоматическую периодическую синхронизацию аккаунтов с сервером каталогов. Если оставить это поле пустым, то синхронизация будет выполняться только при нажатии кнопки «**Синхронизировать**» на вкладке «**[Основные](#mcetoc_1gjrlqgbf4)**».
- **Загружать данные аккаунтов**
    - **Только обновленные** — выберите этот пункт, чтобы при синхронизации загружались только данные аккаунтов, изменённых на стороне сервера каталогов (при первой синхронизации загружаются все аккаунты).
    - **Все** — выберите этот пункт, чтобы при синхронизации загружались данные всех аккаунтов.
- **Действия при исключении аккаунтов с сервера каталогов**— доступно при выборе «**Синхронизировать все аккаунты (без групп)**» в поле «**Режим синхронизации**» на вкладке «**[Основные](#mcetoc_1gjrlqgbf4)**»:
    - **Отключение или включение** — укажите действие с аккаунтами в **{{ productName }}** в зависимости от их статуса на сервере каталогов:
        - **Не изменять аккаунты**
        - **Отключить исключённые аккаунты**
        - **Включить все несинхронизированные**
    - **Архивирование или разархивирование**— укажите действие с аккаунтами в **{{ productName }}** в зависимости от их статуса на сервере каталогов:
        - **Не изменять аккаунты**
        - **Архивировать исключённые**
        - **Разархивировать все несинхронизированные**

_![Настройка дополнительных свойств подключения к серверу каталогов](https://kb.comindware.ru/assets/img_660e9d677d04d.png)_

--8<-- "related_topics_heading.md"

**[Аутентификация через Active Directory. Настройка контроллера домена и экземпляра ПО][ad_authentication_configure_dc_instance]**

**[Настройка единого входа (SSO-аутентификации) в ОС Windows][sso_authentication_configure_windows]**

**[Аутентификация через единый вход (SSO). Настройка контроллера домена, экземпляра ПО и компьютера конечного пользователя][sso_authenticatation_configure]**

**[Синхронизация с сервером каталогов (Active Directory)][accounts_dc_sync]**

**[Проверка соединения][connections]**

**[Удаление подключения][connections]**



 
{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}

<h1>Отправка эл. почты из процесса. Настройка подключения, пути передачи данных и события на диаграмме процесса_CLONE</h1><div class="md-container">
<div class="md-main__inner md-grid">
<div class="mce-toc">
<h2 class="toc-heading">Содержание</h2>
<ul>
<li><a href="#mcetoc_1hiji0aaj1">Введение</a></li>
<li><a href="#mcetoc_1h2t519lb0">Порядок настройки отправки эл. почты</a></li>
<li><a href="#mcetoc_1h2t519lb1">Настройка подключения типа «Отправка эл. почты из процесса»</a></li>
<li><a href="#mcetoc_1h2t519lb2">Настройка пути передачи данных типа «Отправка эл. почты из процесса»</a></li>
<li><a href="#mcetoc_1h2t519lb3">Настройка события-отправки сообщения</a></li>
<li><a href="#mcetoc_1hijhvuv00">Связанные статьи</a></li>
</ul>
</div>
<div class="md-content">
<h2 id="mcetoc_1hiji0aaj1">Введение</h2>
<p>На диаграмме процесса можно использовать <a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2381">промежуточные</a> и <a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2385">конечные</a> события для отправки электронных писем с данными бизнес-процесса. Эти письма могут содержать произвольные бизнес-данные, в отличие от системных уведомлений о задачах.</p>
<h2 id="mcetoc_1h2t519lb0">Порядок настройки отправки эл. почты</h2>
<ol class="colored_numbers_list">
<li>
<p><a class="mkdocs_imported_link" href="#mcetoc_1h2t519lb1">Настройте подключение</a> типа «<strong>Отправка эл. почты из процесса</strong>».</p>
</li>
<li>
<p><a class="mkdocs_imported_link" href="#mcetoc_1h2t519lb2">Настройте путь передачи данных</a> типа «<strong>Отправка эл. почты из процесса</strong>».</p>
</li>
<li>
<p><a class="mkdocs_imported_link" href="#mcetoc_1h2t519lb3">Настройте событие-отправку сообщения</a> на диаграмме процесса.</p>
</li>
</ol>
<h2 id="mcetoc_1h2t519lb1">Настройка подключения типа «Отправка эл. почты из процесса»</h2>
<ol class="colored_numbers_list">
<li>На странице «<strong>Администрирование</strong>» — «<strong><a class="autorefs autorefs-internal mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2205">Подключения</a></strong>» создайте или откройте подключение типа «<strong>Отправка эл. почты из процесса</strong>».</li>
<li>
<p>Настройте свойства подключения:</p>
<ul>
<li><strong>Отключить</strong> — установите этот флажок, чтобы временно деактивировать подключение.</li>
<li><strong>Использовать по умолчанию</strong> — установите этот флажок, чтобы использовать подключение для отправки системных уведомлений о задачах.</li>
<li><strong>Название</strong> — введите наименование подключения.</li>
<li><strong>Протокол</strong> — выберите протокол и параметры соединения с почтовым сервером:
<ul>
<li><strong>SMTP</strong>
<ul>
<li><strong>Порт</strong> — введите номер порта.</li>
<li><strong>Защита данных</strong> — выберите протокол шифрования, который поддерживает почтовый сервер:
<ul>
<li><strong>Нет</strong> — не использовать шифрование;</li>
<li><strong>SSL</strong>;</li>
<li><strong>TLS</strong>.</li>
</ul>
</li>
</ul>
</li>
<li><strong>Microsoft Exchange</strong>
<ul>
<li><strong>Домен</strong> — укажите домен для доступа к серверу Exchange.</li>
<li><strong>Версия</strong> — выберите версию сервера Exchange.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Адрес почтового сервера</strong> — введите адрес почтового сервера.</p>
<div class="notice notice-info">
<p class="admonition-title">Примечание</p>
<p>Не указывайте протокол (<code>SMTP</code>, <code>HTTPS</code>, <code>HTTP</code>) в адресе почтового сервера.</p>
</div>
</li>
<li>
<p><strong>Имя пользователя</strong> — укажите учётную запись для подключения к почтовому серверу.</p>
</li>
<li>
<p><strong>Пароль</strong> — введите пароль для подключения к почтовому серверу.</p>
</li>
<li>
<p><strong>Адрес отправителя</strong> — введите адрес, от которого будут отправляться письма.</p>
</li>
<li>
<p><strong style="letter-spacing: 0.2px;">Имя отправителя</strong><span style="letter-spacing: 0.2px;"> — введите имя, от которого будут отправляться письма.</span></p>
<div class="notice notice-info">
<p class="admonition-title">Примечание</p>
<p>Если <strong>адрес</strong> или <strong>имя отправителя</strong> не совпадает с адресом и именем, указанным в учётной записи, используемой для подключения к почтовому серверу, сервер должен поддерживать замену данных отправителя. В противном случае, почта не будет отправляться.</p>
</div>
</li>
<li>
<p><strong>Подтверждать адрес эл. почты</strong> — установите этот флажок, чтобы почтовый сервер проверял существование адресов получателей эл. писем перед их отправкой. Сервер должен поддерживать эту функцию, в противном случае подключение не будет работать, если установлен данный флажок.</p>
</li>
</ul>
</li>
<li>
<p>При необходимости проверьте соединение с сервером.</p>
<ul>
<li>В разделе «<strong>Тестовое соединение</strong>» в поле «<strong>Получатели</strong>» введите адреса эл. почты через запятую.</li>
<li>Нажмите кнопку «<strong>Отправить тестовое сообщение</strong>».</li>
<li>Удостоверьтесь, что получателям пришло тестовое сообщение от настроенного отправителя.</li>
</ul>
</li>
<li>
<p>Сохраните подключение.</p>
<div class="screenshot_with_caption"><img alt="Свойства подключения для отправки эл. почты" src="https://kb.comindware.ru/assets/outgoing_email_configure_connection.png"/>
<p class="caption">Свойства подключения для отправки эл. почты</p>
</div>
</li>
</ol>
<h2 id="mcetoc_1h2t519lb2">Настройка пути передачи данных типа «Отправка эл. почты из процесса»</h2>
<ol class="colored_numbers_list">
<li>На странице «<strong>Администрирование</strong>» — «<strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2201">Пути передачи данных</a></strong>» создайте или откройте путь передачи данных типа «<strong>Отправка эл. почты из процесса</strong>».</li>
<li>
<p>Настройте свойства пути передачи данных.</p>
<ul>
<li>
<p><strong>Основные свойства</strong> — настройте параметры использования пути передачи данных.</p>
<ul>
<li><strong>Отключить</strong> — установите этот флажок, чтобы временно деактивировать путь передачи данных.</li>
<li><strong>Название</strong> — введите наименование пути передачи данных.</li>
<li><strong>Подключение</strong> — выберите подключение для отправки почты.</li>
<li><strong>Имя сообщения</strong> — введите <em>уникальное</em> наименование сообщения, проходящего по данному пути передачи данных.</li>
<li><strong>Приложение</strong> — выберите приложение, в котором будет использоваться данный путь передачи данных.</li>
</ul>
</li>
</ul>
<div class="screenshot_with_caption"><img alt="Основные свойства — путь передачи данных для отправки эл. почты из процесса" src="https://kb.comindware.ru/assets/outgoing_email_configure.png"/>
<p class="caption">Основные свойства — путь передачи данных для отправки эл. почты из процесса</p>
</div>
<ul>
<li><strong><a id="message-attributes"></a>Атрибуты сообщения</strong> — настройте атрибуты, которые будут использоваться для передачи данных из процесса в эл.  письмо. Эти атрибуты необходимо будет указать на вкладке «<strong><a class="mkdocs_imported_link" href="#message-properties">Свойства сообщения</a></strong>» пути передачи данных, а также настроить на вкладке «<strong>Данные сообщения</strong>» в свойствах <a class="mkdocs_imported_link" href="#mcetoc_1h2t519lb3">события-отправки сообщения</a>.
<ul>
<li>Нажмите кнопку «<strong>Создать</strong>», чтобы добавить атрибут.</li>
<li>Введите наглядное <strong>название</strong> атрибута.</li>
<li>Введите <strong>системное имя</strong> атрибута, оно будет использоваться в шаблоне эл. письма на вкладке «<strong>Свойства сообщения</strong>».</li>
<li>Укажите <strong>тип данных</strong> атрибута в соответствии с данными, которые в него будут передаваться из процесса.</li>
<li>Чтобы удалить атрибут, установите рядом с ним флажок, и нажмите кнопку «<strong>Удалить</strong>».</li>
</ul>
</li>
</ul>
<div class="screenshot_with_caption"><img alt="Атрибуты сообщения — путь передачи данных для отправки эл. почты из процесса" src="https://kb.comindware.ru/assets/outgoing_email_configure_message_attributes.png"/>
<p class="caption">Атрибуты сообщения — путь передачи данных для отправки эл. почты из процесса</p>
</div>
<ul>
<li>
<p><strong><a id="message-properties"></a>Свойства сообщения</strong> — настройте шаблон эл. письма с использованием атрибутов с вкладки «<strong>Атрибуты сообщения</strong>».</p>
<ul>
<li>
<p><strong>Список атрибутов, которые можно использовать при написании эл. письма</strong>, содержит атрибуты с вкладки «<strong><a class="mkdocs_imported_link" href="#message-attributes">Атрибуты сообщения</a></strong>».</p>
<div class="notice notice-success">
<p class="admonition-title">Совет</p>
<ul>
<li>Чтобы поместить значение атрибута сообщения в эл. письмо, введите его системное имя в фигурных скобках <code>{ }</code> в соответствующее поле письма.</li>
<li>В текстовые поля письма (адреса и имена отправителей и получателей, тема, текст сообщения, место встречи) можно вводить произвольный текст и несколько <strong>атрибутов сообщений</strong>.</li>
<li>Например, в поле «<strong>Тема</strong>» можно ввести строку:
<div class="highlight">
<pre class="source_code_container"><code>Уведомление «{Title}» от {Date} </code></pre>
</div>
Здесь: <code>{Title}</code> — атрибут сообщения, содержащий название уведомления, а <code>{Date}</code> — дата формирования уведомления.</li>
</ul>
</div>
</li>
<li>
<p><strong>Электронное письмо</strong> содержит шаблон, в полях которого можно ввести статические значения и системные имена <strong>атрибутов сообщения</strong>. В шаблоне эл. письма предусмотрены перечисленные ниже поля.</p>
<ul>
<li><strong>Адрес отправителя</strong> — в этом поле можно указать адрес эл. почты отправителя, отличный от адреса отправителя, указанного в <a class="mkdocs_imported_link" href="#mcetoc_1h2t519lb1">свойствах подключения</a>. Если оставить это поле пустым, то будет использоваться адрес отправителя, указанный в свойствах подключения.</li>
<li>
<p><strong>Имя отправителя</strong> — в этом поле можно указать имя отправителя, отличный от адреса отправителя, указанного в <a class="mkdocs_imported_link" href="#mcetoc_1h2t519lb1">свойствах подключения</a>.</p>
<div class="notice notice-info">
<p class="admonition-title">Примечание</p>
<p>Если <strong>адрес</strong> или <strong>имя отправителя</strong> не совпадает с адресом и именем, указанным в учётной записи, используемой на <a class="mkdocs_imported_link" href="#mcetoc_1h2t519lb1">почтовом сервере для отправки почты</a>, сервер должен поддерживать замену данных отправителя. В противном случае, почта не будет отправляться.</p>
</div>
</li>
<li>
<p><strong>Кому</strong> — нажмите кнопку «<strong>Создать</strong>», чтобы добавить получателя письма.</p>
<ul>
<li><strong>Для пользователя</strong> — выберите <strong>атрибут сообщения</strong> типа «<strong>Аккаунт</strong>» или аккаунт получателя письма. Если заполнено поле «<strong>Для пользователя</strong>», <strong>адрес получателя</strong> и <strong>имя получателя</strong> заполняются автоматически.</li>
<li><strong>Адрес получателя</strong> — введите адрес электронной почты или укажите <strong>атрибут сообщения</strong> типа «<strong>Текст</strong>», содержащий адрес эл. почты.</li>
<li><strong>Имя получателя</strong> — введите имя получателя или укажите <strong>атрибут сообщения</strong> типа «<strong>Текст</strong>», содержащий имя получателя.</li>
<li><strong>Адрес для отправки копии</strong>, <strong>Адрес для отправки скрытой копии</strong> — введите через точку с запятой адреса эл. почты получателей или укажите <strong>атрибуты сообщения</strong> типа «<strong>Текст</strong>», содержащие адреса эл. почты.</li>
<li><strong>Имя для отправки копии</strong>, <strong>Имя для отправки скрытой копии</strong> — введите через точку с запятой имена получателей или укажите <strong>атрибуты сообщения</strong> типа «<strong>Текст</strong>», содержащие имена получателей.</li>
<li><strong>Тема</strong> — введите тему письма или укажите <strong>атрибут сообщения</strong> типа «<strong>Текст</strong>», содержащий тему письма.</li>
<li><strong>Формат сообщения</strong> — выберите формат тела эл. письма:
<ul>
<li><strong>Простой</strong> — текст без форматирования (<code>Content-Type: text/plain</code>);</li>
<li><strong>Размеченный</strong> — текст с HTML-разметкой (<code>Content-Type: text/html</code>);</li>
<li><strong>Простой и размеченный</strong> — в тело письма будут включены и простой, и размеченный текст (<code>Content-Type: multipart/alternative</code>).</li>
</ul>
</li>
<li><strong>Сообщение</strong> — введите текст письма или укажите <strong>атрибут сообщения</strong> типа «<strong>Текст</strong>», содержащий текст письма.</li>
<li><strong>Прикрепленные файлы</strong> — выберите <strong>атрибут сообщения</strong> типа «<strong>Документ</strong>», содержащий вложения в эл. письмо.</li>
<li><strong>Отправлять встречу</strong> — установите этот флажок, чтобы отправлять вместе с эл. письмом встречу Outlook.
<ul>
<li><strong>Начало встречи</strong> — выберите <strong>атрибут сообщения</strong> типа «<strong>Дата и время</strong>», содержащий дату и время начала встречи.</li>
<li><strong>Окончание встречи</strong> — выберите <strong>атрибут сообщения</strong> типа «<strong>Дата и время</strong>», содержащий дату и время окончания встречи.</li>
<li><strong>Место встречи</strong> — введите текст или укажите <strong>атрибут сообщения</strong> типа «<strong>Текст</strong>», содержащий название или, например, адрес места встречи.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="screenshot_with_caption"><img alt="Свойства сообщения — путь передачи данных для отправки эл. почты из процесса" src="https://kb.comindware.ru/assets/outgoing_email_configure_message_properties.png"/>
<p class="caption">Свойства сообщения — путь передачи данных для отправки эл. почты из процесса</p>
</div>
</li>
<li>
<p>Сохраните путь передачи данных.</p>
</li>
</ol>
<h2 id="mcetoc_1h2t519lb3">Настройка события-отправки сообщения</h2>
<ol class="colored_numbers_list">
<li>
<p>Поместите на диаграмму процесса <a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2381">промежуточное</a> или <a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2385">конечное</a> событие-отправку сообщения.</p>
<div class="screenshot_with_caption"><img alt="События отправки сообщения на диаграмме процесса" src="https://kb.comindware.ru/assets/outgoing_email_configure_send_message_event.png"/>
<p class="caption">События отправки сообщения на диаграмме процесса</p>
</div>
</li>
<li>
<p>В <a class="autorefs autorefs-internal mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2360#mcetoc_1h28cr6421">меню элемента</a> события нажмите кнопку «<strong>Свойства</strong>» <em class="fa-light fa-gear">‌</em>.</p>
</li>
<li>На вкладке «<strong>Основные</strong>» настройте <a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2364">общие свойства элемента</a>.</li>
<li>
<p>На вкладке «<strong>Дополнительные</strong>» выберите путь передачи данных.</p>
<ul>
<li>В разделе «<strong>Место назначения</strong>» выберите пункт «<strong>Внешний сокет</strong>».</li>
<li>С помощью раскрывающегося списка «<strong>Использовать путь передачи данных</strong>» выберите или создайте <strong><a class="mkdocs_imported_link" href="#mcetoc_1h2t519lb2">путь передачи данных</a></strong> типа «<strong>Отправка эл. почты из процесса</strong>».</li>
</ul>
<div class="screenshot_with_caption"><img alt="Выбор пути передачи данных для события-отправки сообщения" src="https://kb.comindware.ru/assets/outgoing_email_configure_send_message_event_advanced_properties.png"/>
<p class="caption">Выбор пути передачи данных для события-отправки сообщения</p>
</div>
</li>
<li>
<p>На вкладке «<strong>Данные сообщения</strong>» сопоставьте <strong><a class="mkdocs_imported_link" href="#message-attributes">атрибуты сообщения</a></strong> с атрибутами <strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2221">шаблона записи</a></strong>, связанного с шаблоном процесса, к которому относится диаграмма.</p>
<ul>
<li>В столбце <strong>Значение</strong> укажите атрибут такого же типа, как <strong>атрибут сообщения</strong>, либо формулу, возвращающую значение соответствующего типа.</li>
<li>Значения указанных атрибутов <strong>шаблона записи</strong> будут присвоены <strong>атрибутам сообщения</strong> и переданы в <a class="mkdocs_imported_link" href="#message-properties">эл. письмо</a>.
<div class="screenshot_with_caption"><img alt="Сопоставление атрибутов сообщения из пути передачи данных с данными процесса" src="https://kb.comindware.ru/assets/outgoing_email_configure_send_message_event_message_data.png"/>
<p class="caption">Сопоставление атрибутов сообщения из пути передачи данных с данными процесса</p>
</div>
</li>
</ul>
</li>
<li>Опубликуйте процесс.</li>
</ol>
<h2 id="mcetoc_1hijhvuv00">Связанные статьи</h2>
<p><strong><samp data-name="aid" data-title="" data-value="2557"><span style="color: #0066bc; font-family: Tahoma;"><img src="https://kb.comindware.ru/images/marker.png" style="vertical-align: middle;"/>Отправка эл. почты из процесса. Настройка подключения {Article-ID:2557}</span></samp> </strong></p>
<p><strong><a class="autorefs autorefs-internal mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2205"><samp data-name="aid" data-title="" data-value="2205"><span style="color: #0066bc; font-family: Tahoma;"><img src="https://kb.comindware.ru/images/marker.png" style="vertical-align: middle;"/>Подключения. Типы, создание, настройка, удаление {Article-ID:2205}</span></samp> </a></strong></p>
<p><strong><samp data-name="aid" data-title="" data-value="2201"><span style="color: #0066bc; font-family: Tahoma;"><img src="https://kb.comindware.ru/images/marker.png" style="vertical-align: middle;"/>Пути передачи данных. Типы, создание, настройка, удаление {Article-ID:2201}</span></samp> </strong></p>
<p><strong><a class="autorefs autorefs-internal mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2362">Диаграмма процесса</a></strong></p>
<p><strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2381">Промежуточное событие-отправка сообщения</a></strong></p>
<p><strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2385">Конечное событие-отправка сообщения</a></strong></p>
</div>
</div>
<a class="md-top md-icon mkdocs_imported_link" href="#"> <em class="fa-light fa-arrow-up">‌</em> К началу </a></div>
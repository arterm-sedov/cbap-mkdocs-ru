<h1>Факторы, влияющие на производительность. Рекомендации по оптимизации</h1><div class="mce-toc">
<h2 class="toc-heading">Содержание</h2>
<ul>
<li><a href="#mcetoc_1i0bhm3ip0">Введение</a></li>
<li><a href="#mcetoc_1i0bh1jcr1">Оптимизация времени отклика</a></li>
<li><a href="#2-оптимизация-интеграций">Оптимизация интеграций с внешними службами</a></li>
<li><a href="#3-оптимизация-выполнения-процессов-и-токенов">Оптимизация выполнения процессов и токенов</a></li>
<li><a href="#4-оптимизация-публикации-процессов-и-токенов">Оптимизация публикации процессов и токенов</a></li>
<li><a href="#6-мониторинг-и-диагностика">Мониторинг и диагностика</a></li>
</ul>
</div>
<h4 data-source-line="3" id="mcetoc_1i0bhm3ip0">Введение</h4>
<p>Производительность Comindware Business Application Platform зависит от сложности настроенных приложений, объёма обрабатываемых данных и интеграций с внешними системами.</p>
<p>Приблизительно оценить снижение производительности в зависимости от наиболее важных факторов можно по следующей формуле</p>
<pre><code>Снижение производительности = {кол-во правил для форм} × {сложность правил для форм} × {правила контекстных ролей} × {кол-во элементов на формах и вложенных форм} × {объем данных}</code></pre>
<p>Ниже представлены типовые рекомендации по повышению производительности.</p>
<div class="notice notice-info">
<p class="admonition-title">Примечание</p>
<ul>
<li>Представленные рекомендации являются общими и подходят не для всех случаев.</li>
<li>Всегда тщательно анализируйте свои системы, сетевое окружение, программное и техническое обеспечение, бизнес-процессы, сценарии, скрипты и алгоритмы, чтобы определить, какие методы оптимизации будут наиболее эффективными в вашем конкретном случае.</li>
<li>Эффективность предложенных мер зависит от конкретной конфигурации сервера и окружения, с которым он взаимодействует. </li>
</ul>
</div>
<h4 data-source-line="3" id="mcetoc_1i0bh1jcr1">Оптимизация времени отклика</h4>
<ol data-source-line="5" style="list-style-type: decimal;">
<li data-source-line="5"><strong>Вход в систему</strong>
<ul>
<li data-source-line="5">Проверьте и сведите к минимуму сетевые задержки. Используйте инструменты мониторинга сети, например <code>traceroute</code> и <code>ping</code>.</li>
<li data-source-line="5">Проверьте и повысьте скорость ответа сервера. Этого можно достичь путем оптимизации серверного оборудования, использования более производительных процессоров, увеличения пропускной способности сети и увеличения объема оперативной памяти.</li>
</ul>
</li>
<li data-source-line="5"><strong>Открытие разделов навигации</strong>
<ul>
<li data-source-line="8">Сократите количество пунктов и подразделов в разделах навигации.</li>
<li data-source-line="8">Разделите большие разделы навигации на меньшие разделы и назначьте их тем ролям, которым они необходимы.</li>
<li data-source-line="8">Назначьте ролям только разделы навигации, которые действительно необходимы пользователям этих ролей.</li>
</ul>
</li>
<li data-source-line="8"><strong>Открытие таблицы</strong>
<ul>
<li>Сократите количество столбцов с вычисляемыми атрибутами.</li>
<li>Упростите выражения для вычисляемых атрибутов.</li>
<li>Упростите выражения для фильтра данных таблицы. Для повышения производительности можно переписать формулу в выражение на языке N3.</li>
</ul>
</li>
<li data-source-line="12"><strong>Открытие формы</strong>
<ul>
<li>Сократите количество полей с вычисляемыми атрибутами.</li>
<li>Упростите выражения для вычисляемых атрибутов. Также можно переписать формулы в выражения на языке N3, который обеспечивает более высокую производительность.</li>
<li data-source-line="16">Уменьшите сложность правил для формы.
<ul>
<li data-source-line="16">Сократите количество правил.</li>
<li>Задайте условия выполнения правил, чтобы вложенные в них действия не выполнялись без необходимости.</li>
<li>Упростите выражения в правилах. Для повышения производительности можно переписать формулы в выражения на языке N3.</li>
</ul>
</li>
<li data-source-line="16">Проверьте и упростите иерархию вложенных форм.</li>
</ul>
</li>
<li data-source-line="16"><strong>Сохранение формы</strong>
<ul>
<li data-source-line="16">Уменьшите сложность правил для формы.
<ul>
<li data-source-line="16">Сократите количество правил.</li>
<li data-source-line="16">Задайте условия выполнения правил, чтобы вложенные в них действия не выполнялись без необходимости.</li>
<li>Упростите выражения в правилах.</li>
</ul>
</li>
<li data-source-line="21">Оптимизируйте сценарии, выполняющиеся при сохранении формы.
<ul>
<li data-source-line="21">Упростите алгоритмы работы сценариев.</li>
<li>Сократите количество действий.</li>
<li>Сократите количество условий и вложенных циклов.</li>
<li data-source-line="21">Упростите выражения в сценариях. Также можно переписать формулы в выражения на языке N3, который обеспечивает более высокую производительность.</li>
<li>Сократите количество выражений.</li>
</ul>
</li>
<li data-source-line="21">Сократите количество фиктивных и реальных изменений в данных формы.</li>
<li data-source-line="21">Оптимизируйте скрипты, выполняющиеся при сохранении формы.
<ul>
<li data-source-line="21">Упростите алгоритмы работы скриптов.</li>
<li>Проверьте и оптимизируйте взаимодействие с API, например используйте более эффективные методы.</li>
</ul>
</li>
</ul>
</li>
<li data-source-line="92"><strong>Контекстные правила ролей</strong>
<ul>
<li>Сравните производительность для аккаунта администратора и аккаунтами других пользователей для выявления проблем в конфигурации ролей.</li>
<li>Оптимизируйте фильтры аккаунтов и условия применения разрешений в конфигурациях ролей. Для повышения производительности можно переписать формулы в выражения на языке N3.</li>
</ul>
</li>
</ol>
<h4 data-source-line="27" id="2-оптимизация-интеграций">Оптимизация интеграций с внешними службами</h4>
<ol data-source-line="29" style="list-style-type: decimal;">
<li data-source-line="29"><strong>Прием сообщений</strong>
<ul>
<li data-source-line="29">Оптимизируйте параметры подключений и путей передачи данных.</li>
<li data-source-line="29">Оптимизируйте интервал опроса сервера входящих сообщений.</li>
</ul>
</li>
<li data-source-line="29"><strong>Отправка сообщений</strong>
<ul>
<li>Оптимизируйте параметры подключений и путей передачи данных.</li>
<li data-source-line="32">Оптимизируйте частоту отправки сообщений.</li>
</ul>
</li>
<li data-source-line="32"><strong>Обработка сообщений сценарием</strong>
<ul>
<li data-source-line="35">Упростите выражения в сценарии. Для повышения производительности можно переписать формулы в выражения на языке N3.</li>
<li>Сократите количество выражений.</li>
<li data-source-line="35">Упростите алгоритм работы сценария.</li>
<li>Сократите количество действий.</li>
<li>Сократите количество условий и вложенных циклов.</li>
</ul>
</li>
<li data-source-line="35"><strong>Обработка сообщений скриптом</strong>
<ul>
<li data-source-line="21">Упростите алгоритмы работы скрипта.</li>
<li>Проверьте и оптимизируйте взаимодействие с API, например используйте более эффективные методы.</li>
</ul>
</li>
<li data-source-line="38"><strong>Сохранение данных</strong>
<ul>
<li>Сократите количество фиктивных и реальных изменений в данных.</li>
</ul>
</li>
<li><strong>Интеграция с сервером каталогов</strong>
<ul>
<li>Оптимизируйте подключения и запросы к серверу каталогов.</li>
</ul>
</li>
<li><strong>Службы Kafka, Ignite и Elasticsearch</strong>
<ul>
<li>Оптимизируйте конфигурацию служб Apache Kafka, Apache Ignite и Elasticsearch:
<ul>
<li>выделение памяти;</li>
<li>размер кучи Java;</li>
<li>параметры кластера.</li>
</ul>
</li>
<li>Проверьте и настройте конфигурации репликации и шардирования данных для Elasticsearch.</li>
<li>Настройте параметры устойчивости и производительности кластера Apache Ignite, такие как количество узлов и сетевые параметры.</li>
<li>Настройте параметры устойчивости и производительности кластера Apache Kafka, такие как период хранения сообщений и сегментация журналов.</li>
<li>Регулярно дефрагментируйте базу данных Apache Ignite для ускорения доступа и освобождения места.</li>
</ul>
</li>
<li data-source-line="76"><strong>Антивирус</strong>
<ul>
<li data-source-line="76">Проверьте, не снижается ли производительность из-за работы антивируса на сервере.</li>
<li data-source-line="76">Рассмотрите возможность настройки исключений для служб Kafka, Ignite и Elasticsearch в антивирусном программном обеспечении.</li>
</ul>
</li>
<li><strong>Ненужные внешние службы</strong>
<ul>
<li>Отключите ненужные внешние службы для повышения производительности.</li>
</ul>
</li>
</ol>
<h4 data-source-line="44" id="3-оптимизация-выполнения-процессов-и-токенов">Оптимизация выполнения процессов и токенов</h4>
<ol>
<li><strong style="letter-spacing: 0.2px;">Рекурсия в настройках</strong>
<ul>
<li>Избегайте рекурсивных настроек в процессах.</li>
</ul>
</li>
<li data-source-line="46"><strong>Обработка сообщений сценарием</strong>
<ul>
<li data-source-line="35">Упростите выражения в сценарии.</li>
<li>Сократите количество выражений.</li>
<li data-source-line="35">Сократите количество действий.</li>
<li>Сократите количество условий и вложенных циклов.</li>
<li data-source-line="35">Упростите алгоритм работы сценария.</li>
</ul>
</li>
<li data-source-line="49"><strong>Сохранение данных</strong>
<ul>
<li>Сократите количество фиктивных и реальных изменений в данных.</li>
</ul>
</li>
<li><strong>Оптимизация алгоритмов</strong>
<ul>
<li data-source-line="92">Декомпозируйте и оптимизируйте процессы.
<ul>
<li data-source-line="92">Разделите сложные бизнес-процессы на более мелкие, управляемые части. Это поможет упростить управление процессами, быстрее вносить изменения и снизить вероятность ошибок.</li>
<li data-source-line="92">Создайте подпроцессы для выполнения определенных задач или логических блоков. Вызывайте эти подпроцессы из основного процесса. Это поможет структурировать процессы, сделать их более понятными и упростит управление ими.</li>
<li data-source-line="92">Используйте понятные и простые логические структуры, избегая избыточных условий и ветвлений.</li>
<li data-source-line="92">Упростите логику алгоритмов, используемых в бизнес-процессах:
<ul>
<li data-source-line="92">уменьшите количество операций;</li>
<li data-source-line="92">оптимизируйте структуры данных.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 data-source-line="55" id="4-оптимизация-публикации-процессов-и-токенов">Оптимизация публикации процессов и токенов</h4>
<ol data-source-line="57" style="list-style-type: decimal;">
<li data-source-line="57"><strong>Количество версий процессов</strong>
<ul>
<li data-source-line="57">Сократите количество версий диаграмм процессов, оставив только необходимые.</li>
</ul>
</li>
</ol>
<h4 data-source-line="68" id="6-мониторинг-и-диагностика">Мониторинг и диагностика</h4>
<ol data-source-line="70" style="list-style-type: decimal;">
<li data-source-line="70"><strong>Мониторинг и трассировка</strong>
<ul>
<li data-source-line="70">Используйте инструменты трассировки мониторинга работы <strong>Comindware Business Application Platform </strong>для выявления узких мест:
<ul>
<li data-source-line="70">страницу «<a href="https://kb.comindware.ru/article.php?id=2184">Производительность</a>»;</li>
<li>страницу «<a href="https://kb.comindware.ru/article.php?id=2180">Журналы событий</a>»;</li>
<li>страницу «<a href="https://kb.comindware.ru/article.php?id=2187">Мониторинг</a>»;</li>
<li><a href="https://kb.comindware.ru/article.php?id=2501">файловые журналы</a>;</li>
<li data-source-line="70">тайминги запросов браузера;</li>
</ul>
</li>
<li>Используйте инструменты профилирования производительности вебсайта, например Webpagetest, профайлер JavaScript в Chrome;</li>
<li data-source-line="70">Используйте инструменты мониторинга производительности сервера, например Zabbix, Prometheus, Grafana, VmStat (<code>sysstat</code>), <code>top</code>, <code>htop</code>, <code>perf</code> и <code>flamegraph.pl</code>, .</li>
<li data-source-line="70">Используйте инструменты мониторинга:
<ul>
<li data-source-line="70">Elasticsearch — Kibana.</li>
<li data-source-line="70">Apache Kafka — AKHQ, Kowl, Kafdrop, UI for Apache Kafka, Lenses, CMAK, Confluent CC, Conduktor.</li>
<li data-source-line="70">Apache Ignite — JMX и MBeans, системные представления в SQL, Yardstick Framework.</li>
</ul>
</li>
<li>В журналах обращайте внимание на разницу во времени между началом и завершением событий, потенциально вызывающих снижение производительности.</li>
</ul>
</li>
<li><strong>Резервное копирование и индексация</strong>
<ul>
<li data-source-line="73">Настройте регулярное резервное копирование.</li>
<li data-source-line="73">Проверьте индексацию данных.</li>
</ul>
</li>
<li><strong>Системные службы</strong>
<ul>
<li>Для отладки отключите системные службы, вызывающие подозрения.</li>
<li>В случае неудачной настройки:
<ul>
<li>остановите соответствующие системные службы;</li>
<li>удалите неудачно настроенные сущности или исправьте настройку;</li>
<li>снова включите системные службы.</li>
</ul>
</li>
</ul>
</li>
</ol>
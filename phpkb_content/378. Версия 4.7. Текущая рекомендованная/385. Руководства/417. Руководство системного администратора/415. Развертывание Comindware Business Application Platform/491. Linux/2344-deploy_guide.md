---
title: Развертывание Comindware Business Application Platform. Краткое руководство
kbId: 2344
---

# Развертывание {{ productName }}. Краткое руководство

## Введение

Для работы **{{ productName }}** требуются операционная система, сервер базы данных, веб-сервер, обратный прокси-сервер и сервер журналов.

Для быстрого развертывания **{{ productName }}** в среде Linux компания **Comindware** предоставляет дистрибутив с установщиком, настраивающим необходимое программное обеспечение. См. статью «[{{ productName }} 4.7. Перечень стороннего программного обеспечения для Linux][auxiliary_software_list]».

В настоящем документе представлены инструкции по развертыванию и инициализации **{{ productName }}** из дистрибутива в операционных системах Linux.

## Установка {{ productName }}

1. Перейдите в режим суперпользователя:

```
sudo -i
```

или

```
su -
```
2. Скачайте и распакуйте дистрибутив **{{ productName }}** по ссылке, предоставленной компанией **Comindware** (`X.X.XXXX.X` — номер версии ПО, `<osname>` — название операционной системы):

```
tar -xf X.X-release-ru-X.X.XXXX.X.<osname>.tar.gz
```
3. Перейдите в распакованную папку:

```
cd CMW_<osname>/
```
4. Установите ПО из дистрибутива:

```
sh install.sh -p -k [-i=<instanceName>] [-e] [-d=demo] [-u=www-data] [-g=www-data]
```

Скрипт `install.sh` поддерживает следующие ключи:

    - `k` — установить ПО Kafka;
    - `e` — установить ПО Elasticsearch;
    - `p` — установить ПО {{ productName }};
    - `d=demo` — создать экземпляр ПО {{ productName }} c демонстрационной базой данных (необязательный ключ по умолчанию);
    - `d=clear` — создать экземпляр ПО {{ productName }} без демонстрационной базы данных;
    - `u` — пользователь (необязательный ключ);
    - `g` — группа (необязательный ключ);
    - `h` — вызов краткой справки по использованию скрипта (этот ключ следует указывать только без остальных ключей);
    - `kh=hostname` — использовать указанный хост для подключения к ПО Kafka (необязательный ключ);
    - `kp=portnumber` — использовать указанный порт для подключения к ПО Kafka (необязательный ключ);
    - `i=<instanceName>` — создать экземпляр ПО с указанным именем (необязательный ключ). Имя экземпляра по умолчанию: `cmwdata`.
Внимание!

Если при установке ПО вы не создадите экземпляр (то есть опустите ключ `i=<instanceName>`), то впоследствии невозможно будет создать экземпляр с помощью скрипта `install.sh`.

Для создания экземпляра ПО при наличии установленной версии используйте скрипт `create.sh`, выполните следующие команды:

```
cd CMW_<osname>/scripts/instance

sh create.sh -n=<instanceName> [-p=<portNumber>] -v=<versionNumber>
```

    - `-n=<instanceName>` — создать экземпляр ПО с указанным именем (**обязательный** ключ);
    - `-p=<portNumber>` — создать экземпляр ПО с указанным именем (необязательный ключ). Порт по умолчанию: 80;
    - `-v=<versionNumber>` — номер установленной версии ПО вида: `X.X.XXXX.X` (например: 4.7.2222.0);
    - `-h` — вызов краткой справки по использованию скрипта (этот ключ следует указывать только без остальных ключей).
5. Если отобразится запрос на перезагрузку ОС, выполните перезагрузку:

```
reboot
```

После перезагрузки ОС заново запустите [установку ПО из дистрибутива (шаг 4)](#install.sh).
6. Дождитесь завершения установки ПО.
7. После успешного завершения установки подождите 3–5 минут. Этого времени обычно достаточно для автоматического запуска и инициализации установленных служб (в зависимости от конфигурации машины).

## Запуск экземпляра ПО

1. Перейдите в режим суперпользователя:

```
sudo -i
```

или

```
su -
```
2. Удостоверьтесь, что основные сервисы установлены, запущены и имеют статус `Active (running)`:

```
systemctl status comindware<instanceName>
systemctl status kafka
systemctl status nginx
systemctl status elasticsearch
```

Здесь `<instanceName>` — имя экземпляра ПО.
3. Если какой-либо сервис не работает, запустите его:

```
systemctl start comindware<instanceName>
systemctl start kafka
systemctl start nginx
systemctl start elasticsearch
```

## Остановка экземпляра ПО

1. Перейдите в режим суперпользователя:

```
sudo -i
```

или

```
su -
```
2. Перед тем как выполнять любые действия с файлами ПО и базы данных, остановите службы, поддерживающие работу ПО:

```
systemctl stop comindware<instanceName>
systemctl stop kafka
systemctl stop nginx
systemctl stop elasticsearch
```
3. Удостоверьтесь, что службы остановлены:

```
systemctl status comindware<instanceName>
systemctl status kafka
systemctl status nginx
systemctl status elasticsearch
```

## Инициализация {{ productName }}

1. Запустите веб-браузер и в адресной строке введите: `localhost`
2. Дождитесь запуска и отображения веб-сайта **{{ productName }}**, что может занять примерно 5 минут.
3. Откроется страница создания аккаунта администратора **{{ productName }}**.

_![Страница создания аккаунта администратора](https://kb.comindware.ru/assets/deploy_guide_admin_account_create.png)_
4. Введите учётные данные аккаунта администратора и нажмите кнопку «**Создать аккаунт**».

Внимание!

    - В экземпляре ПО всегда должен оставаться хотя бы один аккаунт администратора. Он может потребоваться для восстановления системы.
    - Аккаунт администратора, созданный при инициализации экземпляра ПО, не следует удалять, даже если впоследствии аккаунты будут синхронизироваться с Active Directory.
5. Если при установке продукта был указан ключ `-d=demo`, откроется страница инициализации системы.

_![Страница инициализации системы](https://kb.comindware.ru/assets/deploy_guide_system_initialize.png)_
6. Если при установке продукта был указан ключ `-d=clear` или этот ключ был опущен, откроется страница активации ПО.

_![Страница активации продукта](https://kb.comindware.ru/assets/deploy_guide_product_activate.png)_
7. Для первоначального ознакомления с ПО этап активации можно пропустить, нажав кнопку «**Пропустить**».
8. При необходимости откроется страница настройки подключения к службе Elasticsearch.

_![Настройка подключения к Elasticsearch](https://kb.comindware.ru/assets/deploy_guide_elasicsearch_connect.png)_
9. В поле «**URI**» введите адрес сервера Elasticsearch, например: `http://localhost:9200`
10. Оставьте **имя пользователя** и **пароль** Elasticsearch пустыми. Или введите их, если в конфигурации Elasticsearch включена аутентификация.
11. Установите уникальный **префикс индекса**. Он служит для идентификации в Elasticsearch данных экземпляра ПО. Поэтому во избежание конфликтов данных для каждого экземпляра ПО следует указывать собственный префикс индекса.
12. Нажмите кнопку «**Далее**».
13. При необходимости откроется страница инициализации данных в Elasticsearch.

_![Страница инициализации данных в Elasticsearch](https://kb.comindware.ru/assets/deploy_guide_elasticsearch_initialize.png)_
14. Нажмите кнопку «**Обновить**».
15. Дождитесь открытия начальной страницы **{{ productName }}**.

_![Начальная страница {{ productName }}](https://kb.comindware.ru/assets/deploy_guide_desktop.png)_
16. На этом этапе развертывание экземпляра **{{ productName }}** завершено и можно приступать к созданию и использованию бизнес-приложений.

{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}

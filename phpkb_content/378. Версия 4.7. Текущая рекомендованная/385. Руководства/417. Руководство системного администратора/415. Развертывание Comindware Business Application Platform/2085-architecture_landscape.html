<h1>Развертывание Comindware Business Application Platform. Архитектура, ландшафт, программное и техническое обеспечение</h1><div class="md-container" data-md-component="container">
<div class="md-main__inner md-grid"><nav aria-label="Содержание" class="md-nav md-nav--secondary">
<div class="mce-toc">
<h2 class="toc-heading">Содержание</h2>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#введение"> <span class="md-ellipsis"> Введение </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#архитектура-системы"> <span class="md-ellipsis"> Архитектура Системы </span> </a><nav aria-label="Архитектура Системы" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#безопасность-и-отказоустойчивость-системы"> <span class="md-ellipsis"> Безопасность и отказоустойчивость Системы </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#интеграция-с-внешними-системами"> <span class="md-ellipsis"> Интеграция с внешними системами </span> </a></li>
</ul>
</nav></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#ландшафт-развертывания-системы"> <span class="md-ellipsis"> Ландшафт развертывания Системы </span> </a><nav aria-label="Ландшафт развертывания Системы" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#рекомендуемые-варианты-развертывания-системы"> <span class="md-ellipsis"> Рекомендуемые варианты развертывания Системы </span> </a><nav aria-label="Рекомендуемые варианты развертывания Системы" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#минимальная-конфигурация"> <span class="md-ellipsis"> Минимальная конфигурация </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#продуктовая-конфигурация"> <span class="md-ellipsis"> Продуктовая конфигурация </span> </a></li>
</ul>
</nav></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#рекомендуемый-набор-серверов-приложений"> <span class="md-ellipsis"> Рекомендуемый набор серверов приложений </span> </a></li>
</ul>
</nav></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#техническое-обеспечение-системы"> <span class="md-ellipsis"> Техническое обеспечение Системы </span> </a><nav aria-label="Техническое обеспечение Системы" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#конфигурация-серверов-приложений"> <span class="md-ellipsis"> Конфигурация серверов приложений </span> </a><nav aria-label="Конфигурация серверов приложений" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#примеры-расчёта-системных-ресурсов-отказоустойчивой-системы"> <span class="md-ellipsis"> Примеры расчёта системных ресурсов отказоустойчивой системы </span> </a><nav aria-label="Примеры расчёта системных ресурсов отказоустойчивой системы" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#инфраструктурные-сервисы"> <span class="md-ellipsis"> Инфраструктурные сервисы </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#продуктовый-ландшафт"> <span class="md-ellipsis"> Продуктовый ландшафт </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#ландшафт-тестирования-и-разработки"> <span class="md-ellipsis"> Ландшафт тестирования и разработки </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#минимальная-конфигурация-основного-сервера-приложений"> <span class="md-ellipsis"> Минимальная конфигурация основного сервера приложений </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#минимальная-конфигурация-резервного-сервера-приложений"> <span class="md-ellipsis"> Минимальная конфигурация резервного сервера приложений </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#минимальная-конфигурация-серверов-разработки-и-тестирования"> <span class="md-ellipsis"> Минимальная конфигурация серверов разработки и тестирования </span> </a></li>
</ul>
</nav></li>
</ul>
</nav></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#конфигурация-системы-хранения-данных"> <span class="md-ellipsis"> Конфигурация системы хранения данных </span> </a></li>
</ul>
</nav></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#конфигурация-подсистем"> <span class="md-ellipsis"> Конфигурация подсистем </span> </a><nav aria-label="Конфигурация подсистем" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#конфигурация-сервера-apache-ignite"> <span class="md-ellipsis"> Конфигурация сервера Apache Ignite </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#конфигурация-сервера-elasticsearch"> <span class="md-ellipsis"> Конфигурация сервера Elasticsearch </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#конфигурация-обратного-прокси-сервера"> <span class="md-ellipsis"> Конфигурация обратного прокси-сервера </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#конфигурация-сервера-zabbix"> <span class="md-ellipsis"> Конфигурация сервера Zabbix </span> </a></li>
</ul>
</nav></li>
</ul>
</div>
</nav>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h2 id="введение">Введение</h2>
<p>Продукт <strong>Comindware Business Application Platform</strong> представляет собой целостный программный комплекс на базе стека современных технологий.</p>
<p>В настоящем руководстве представлено краткое описание архитектуры <strong>Comindware Business Application Platform</strong>, а также даны рекомендации по выбору ландшафта и конфигурации программного и аппаратного обеспечения для развертывания системы на основе <strong>Comindware Business Application Platform</strong>.</p>
<div class="notice notice-success">
<p class="admonition-title">Определения</p>
<ul>
<li><strong>Сервер приложений</strong> — установленный экземпляр ПО <strong>Comindware Business Application Platform</strong>.</li>
<li><strong>Приложение</strong> — обособленное бизнес-решение, реализованное на сервере приложений.</li>
<li><strong>Активные пользователи</strong> — пользователи, регулярно генерирующие данные на сервере приложений.</li>
<li><strong>DAS</strong> — запоминающее устройство, непосредственно подключенное к серверу приложений.</li>
<li><strong>SAN</strong> — сетевая система хранения (СХД, сеть хранения данных).</li>
<li><strong>IOPS</strong> — количество операций ввода-вывода в секунду.</li>
</ul>
</div>
<h2 id="архитектура-системы">Архитектура Системы</h2>
<p>В основе Системы лежит клиент-серверная компонентно-многослойная сервисно-ориентированная архитектура, расширяемая плагинами и адаптерами.</p>
<p>В состав Системы входят перечисленные ниже подсистемы.</p>
<ul>
<li><em>Веб-приложение</em>: одностраничное приложение (SPA) на основе Marionette, Backbone, React, Redux.</li>
<li><em>Мобильное приложение</em>: React Native on Expo.</li>
<li><em>Бэкенд</em>: компоненты-сервисы на основе .NET 6.0, .NET Framework 4.8 (Windows), Mono 6.12 (Linux), JDK 17.</li>
<li><em>СУБД</em>: фирменная патентованная СУБД Comindware Elastic Data, с хранением данных в Apache Ignite.</li>
<li><em>Подсистема полнотекстового поиска</em>: Lucene.Net.</li>
<li><em>Подсистема сбора и анализа журналов транзакционных данных и данных мониторинга Системы</em>: Elasticsearch, Kibana.</li>
<li><em>Подсистема файловых журналов</em>: NLog.</li>
<li><em>Модули для интеграции</em>: см. параграф «<a class="mkdocs_imported_link" href="#интеграция-с-внешними-системами">Интеграция с внешними системами</a>».</li>
</ul>
<p>Полный перечень стороннего ПО, входящего в состав и необходимого для работы Системы, см. в статьях: <a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2398">Comindware Business Application Platform 4.7 Перечень стороннего программного обеспечения для Linux</a>.</p>
<figure class="screenshot_with_caption">
<p><img alt="Диаграмма архитектуры Comindware Business Application Platform" src="https://kb.comindware.ru/assets/Picture1.png"/></p>
<figcaption class="caption">Диаграмма архитектуры Comindware Business Application Platform</figcaption>
</figure>
<h3 id="безопасность-и-отказоустойчивость-системы">Безопасность и отказоустойчивость Системы</h3>
<p>В Системе предусмотрены перечисленные ниже механизмы обеспечения безопасности и отказоустойчивости.</p>
<ul>
<li>Внешняя безопасность — реализуется посредством:
<ul>
<li>механизма аутентификации пользователей Kerberos и OpenID;</li>
<li>сетевого экрана;</li>
<li>обратного прокси-сервера.</li>
</ul>
</li>
<li>Внутренняя безопасность — реализуется посредством ролевой модели безопасности.</li>
<li>Отказоустойчивость — реализуется посредством использованием резервных серверов и дополнительных узлов хранения и обработки данных.</li>
<li>Масштабируемость — реализуется посредством увеличения количества серверов, обрабатывающих запросы.</li>
</ul>
<p>См. <em>«<a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2312">Безопасность</a>»</em>.</p>
<h3 id="интеграция-с-внешними-системами">Интеграция с внешними системами</h3>
<p>В Системе предусмотрены перечисленные ниже механизмы интеграции с внешними системами.</p>
<ul>
<li>Git —контроль версий приложений, создаваемых с помощью Системы.</li>
<li>OData — обмен данными с внешними системами посредством REST API.</li>
<li>OpenLDAP (Active Directory) — аутентификация, управление аккаунтами и единый вход.</li>
<li>SMTP/IMAP/Exchange — получение и отправка электронных писем.</li>
<li>ESB (RabbitMQ / MSMQ) — обмен сообщениями с внешними системами в распределенных и федеративных конфигурациях.</li>
</ul>
<p>См. <em>«<a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2205">Подключения</a>»</em>.</p>
<h2 id="ландшафт-развертывания-системы">Ландшафт развертывания Системы</h2>
<p>Для обеспечения бесперебойной работы Систему необходимо развернуть в окружении, обеспечивающем достаточную производительность и отказоустойчивость.</p>
<p>Систему можно развернуть для доступа через интернет и интранет:</p>
<ul>
<li><em>в минимальной конфигурации</em> — на одной виртуальной или физической машине заказчика.</li>
<li><em>в продуктовой конфигурации</em>— на мощностях заказчика в отказоустойчивой конфигурации в соответствии с требованиями заказчика.</li>
</ul>
<h3 id="рекомендуемые-варианты-развертывания-системы">Рекомендуемые варианты развертывания Системы</h3>
<h4 id="минимальная-конфигурация">Минимальная конфигурация</h4>
<p>Ниже перечислены компоненты типовой минимальной конфигурации Системы, предназначенной для демонстраций и реализации пилотных проектов.</p>
<ul>
<li><strong><em>Comindware Business Application Platform</em></strong>: установленный экземпляр ПО.</li>
<li><em>СУБД</em> <em>Comindware Elastic Data</em>.</li>
<li><em>Сервер Elasticsearch</em> — в конфигурации с одним узлом.</li>
</ul>
<figure class="screenshot_with_caption">
<p><img alt="Минимальная конфигурация Системы" src="https://kb.comindware.ru/assets/Picture2_2.png"/></p>
<figcaption class="caption">Минимальная конфигурация Системы</figcaption>
</figure>
<h4 id="продуктовая-конфигурация">Продуктовая конфигурация</h4>
<p>Ниже перечислены компоненты типовой продуктовой конфигурации, обеспечивающей дублирование и резервирование ресурсов, а также отказоустойчивость Системы.</p>
<ul>
<li><strong><em>Comindware Business Application Platform</em></strong>: установленный экземпляр ПО.</li>
<li><em>СУБД Comindware Elastic Data</em>.</li>
<li><em>Сервер Elasticsearch</em>.</li>
<li><em>Обратный прокси-сервер NGINX</em> для фильтрации нежелательных запросов и ретрансляции допустимых запросов во внутреннюю сеть.</li>
<li><em>Сервер Zabbix</em> для мониторинга доступности служб и свободного пространства на дисках.</li>
<li><em>Почтовый сервер (SMTP/IMAP)</em> (необязательно) для передачи уведомлений.</li>
<li><em>Сервер LDAP</em> (необязательно) для централизованного управления инфраструктурой сети.</li>
<li><em>Сервер Git</em> (необязательно) для контроля версий приложений, создаваемых с помощью <strong>Comindware Business Application Platform</strong>.</li>
</ul>
<figure class="screenshot_with_caption">
<p><img alt="Продуктовая конфигурация: ландшафт подсистем" src="https://kb.comindware.ru/assets/Picture3_3.png"/></p>
<figcaption class="caption">Продуктовая конфигурация: ландшафт подсистем</figcaption>
</figure>
<p>Продуктовое использование накладывает требования на следующие характеристики Системы:</p>
<ul>
<li><em>безопасность</em> — реализуется за счет настройки сетевого экрана и обратного прокси-сервера;</li>
<li><em>отказоустойчивость</em> — реализуется за счет использования резервных серверов и дополнительных узлов на серверах, хранящих данные;</li>
<li><em>масштабируемость</em> — реализуется за счет добавления дополнительных серверов, обрабатывающих запросы.</li>
</ul>
<figure class="screenshot_with_caption">
<p><img alt="Типовой ландшафт сервисом в составе Системы" src="https://kb.comindware.ru/assets/Picture4_4.png"/></p>
<figcaption class="caption">Типовой ландшафт сервисом в составе Системы</figcaption>
</figure>
<h3 id="рекомендуемый-набор-серверов-приложений">Рекомендуемый набор серверов приложений</h3>
<p>Для повышения эффективности разработки и тестирования приложений, а также отказоустойчивости и безопасности эксплуатации приложений рекомендуется развернуть несколько серверов приложений (необходимость использования каждого из этих серверов определяется при составлении технических требований):</p>
<ul>
<li><em>сервер разработки</em> (development), на котором осуществляется разработка приложений;</li>
<li><em>сервер тестирования</em> (pre-production), на котором осуществляется тестирование приложений;</li>
<li><em>основной сервер</em> (production), на котором осуществляется эксплуатация приложений;</li>
<li><em>резервный сервер</em> (standby), который используется в случае перегрузки или выхода из строя основного сервера.</li>
</ul>
<h2 id="техническое-обеспечение-системы">Техническое обеспечение Системы</h2>
<p>В данной статье представлены рекомендуемые характеристики технического обеспечения для развёртывания Системы на мощностях заказчика под управлением операционной системы Windows или Linux.</p>
<h3 id="конфигурация-серверов-приложений">Конфигурация серверов приложений</h3>
<p>Сервер приложений размещается на физической или виртуальной машине, обеспечивая взаимодействие с пользователями, сторонними системами, ввод, обработку и хранение таких данных, как файлы базы данных, файлы конфигурации, загружаемые пользователями файлы, файлы журналов,  файлы резервных копий.</p>
<p>Следующие рекомендации позволят определить необходимую конфигурацию технического обеспечения для работы серверов приложений.</p>
<p>В минимальной конфигурации достаточно развернуть один сервер приложений для разработки, тестирования и эксплуатации приложений.</p>
<p>Приведенные ниже требования носят рекомендательный характер и позволяют обеспечить комфортную работу конечных пользователей, гражданских разработчиков и тестировщиков приложений <strong>Comindware Business Application Platform</strong>.</p>
<p>Фактические требования к техническому обеспечению могут значительно отличаться и зависят от следующих факторов:</p>
<ul>
<li>количества активных пользователей в Системе;</li>
<li>количества приложений в Системе;</li>
<li>количества запускаемых процессов;</li>
<li>количества настроенных вычислений, правил, условий и зависимостей данных;</li>
<li>объема хранимой информации и документов.</li>
</ul>
<p>Подсистемы (см. параграф <em>«<a class="mkdocs_imported_link" href="#конфигурация-подсистем">Конфигурация подсистем</a>»</em>) и виртуальные машины с ПО рекомендуется размещать на нескольких физических машинах.</p>
<p>Каналы связи между узлами Системы должны обеспечивать пропускную способность не менее 10 Гбит/с.</p>
<h4 id="примеры-расчёта-системных-ресурсов-отказоустойчивой-системы">Примеры расчёта системных ресурсов отказоустойчивой системы</h4>
<p>В следующих таблицах представлена конфигурация системы для следующего количества пользователей:</p>
<ul>
<li>500 зарегистрированных;</li>
<li>200 активных;</li>
<li>25 постоянных.</li>
</ul>
<h5 id="инфраструктурные-сервисы">Инфраструктурные сервисы</h5>
<ul>
<li>Виртуальные серверы одного сервиса должны быть размещены на разных физических серверах.</li>
<li>Скорость соединения между серверами должна быть не менее 10 Гб/с.</li>
<li>SSD-накопитель для базы данных должен быть высокоскоростным и высоконадёжным.</li>
</ul>
<table style="width: 100%;">
<thead>
<tr>
<th>Логич. ядер ЦП от 3,0 ГГц</th>
<th>ОЗУ, ГБ</th>
<th>Раздел с ПО, ГБ, SSD</th>
<th>БД, ГБ, SSD</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="4"><strong>Обратные прокси (VPS): <code>NGINX reverse proxy1</code>, <code>NGINX reverse proxy2</code></strong></td>
</tr>
<tr>
<td>2</td>
<td>2</td>
<td>24</td>
<td> </td>
</tr>
<tr>
<td colspan="7"><strong>Система мониторинга и отслеживания (VPS): <code>Zabbix1</code>, <code>Zabbix2</code></strong></td>
</tr>
<tr>
<td>2</td>
<td>4</td>
<td>24</td>
<td>128</td>
</tr>
</tbody>
</table>
<h5 id="продуктовый-ландшафт">Продуктовый ландшафт</h5>
<ul>
<li>Виртуальные серверы одного сервиса должны быть размещены на разных физических серверах.</li>
<li>Скорость соединения между серверами должна быть не менее 10 Гб/с.</li>
<li>SSD-накопитель для базы данных должен быть высокоскоростным и высоконадёжным.</li>
</ul>
<table style="width: 100%;">
<thead>
<tr>
<th>Логич. ядер ЦП от 3,0 ГГц</th>
<th>ОЗУ, ГБ</th>
<th>Раздел с ПО, ГБ, SSD</th>
<th>БД, ГБ, SSD</th>
<th>Загру­­­жаемые файлы, ГБ, СХД HDD</th>
<th>Жур­налы, HDD</th>
<th>Резерв­­ные копии, ГБ, СХД HDD</th>
</tr>
<tr>
<td colspan="8"><strong>Серверы приложений (VPS): <code>CBAP-node1</code>, <code>CBAP-node2</code>, <code>CBAP-node3</code></strong></td>
</tr>
</thead>
<tbody>
<tr>
<td>8</td>
<td>32</td>
<td>64</td>
<td>128</td>
<td>1024</td>
<td>16</td>
<td>512</td>
</tr>
<tr>
<td colspan="7"><strong>Сервер журналов Elasticsearch (VPS): <code>Elasticsearch-node1</code>, <code>Elasticsearch-node2</code>, <code>Elasticsearch-node3</code></strong></td>
</tr>
<tr>
<td>4</td>
<td>16</td>
<td>24</td>
<td>128</td>
<td> </td>
<td>16</td>
<td>512</td>
</tr>
</tbody>
</table>
<h5 id="ландшафт-тестирования-и-разработки">Ландшафт тестирования и разработки</h5>
<ul>
<li>SSD-накопитель для базы данных должен быть высокоскоростным и высоконадёжным.</li>
</ul>
<table style="width: 100%;">
<thead>
<tr>
<th>Логич. ядер ЦП от 3,0 ГГц</th>
<th>ОЗУ, ГБ</th>
<th>Раздел с ПО, ГБ, SSD</th>
<th>БД, ГБ, SSD</th>
<th>Загру­­­жаемые файлы, ГБ, СХД HDD</th>
<th>Жур­налы, HDD</th>
<th>Резерв­­ные копии, ГБ, СХД HDD</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="7"><strong>GitLab: <code>git-server</code></strong></td>
</tr>
<tr>
<td>2</td>
<td>4</td>
<td>24</td>
<td>128</td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td colspan="7"><strong>Сервер приложений (VPS): <code>CBAP-test</code></strong></td>
</tr>
<tr>
<td>8</td>
<td>24</td>
<td>64</td>
<td>128</td>
<td>32</td>
<td>16</td>
<td>128</td>
</tr>
<tr>
<td colspan="7"><strong>Сервер приложений (VPS): <code>CBAP-dev</code></strong></td>
</tr>
<tr>
<td>8</td>
<td>24</td>
<td>64</td>
<td>128</td>
<td>32</td>
<td>16</td>
<td>128</td>
</tr>
<tr>
<td colspan="7"><strong>Сервер журналов Elasticsearch (VPS): <code>Elasticsearch</code></strong></td>
</tr>
<tr>
<td>4</td>
<td>16</td>
<td>24</td>
<td>128</td>
<td> </td>
<td>16</td>
<td>128</td>
</tr>
</tbody>
</table>
<h5 id="минимальная-конфигурация-основного-сервера-приложений">Минимальная конфигурация основного сервера приложений</h5>
<table style="width: 100%;">
<thead>
<tr>
<th><strong>Кол-во польз.</strong></th>
<th><strong>ЦП</strong></th>
<th><strong>ОЗУ</strong></th>
<th><strong>HDD</strong></th>
<th><strong>SSD</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>1–200 активных</td>
<td>4 ядра от 3,7 ГГц + <br/>(1 ядро × 100 акт. польз. × кол-во прил.)</td>
<td>16 ГБ + <br/>(4 ГБ × 100 акт. польз. × кол-во прил.)</td>
<td>16 ГБ</td>
<td>16 ГБ</td>
</tr>
<tr>
<td>200 активных</td>
<td>4 ядра + <br/>(2 ядра × кол-во прил.)</td>
<td>16 ГБ + <br/>(8 ГБ × кол-во прил.)</td>
<td>16 ГБ × кол-во прил.</td>
<td>16 ГБ × кол-во прил.</td>
</tr>
<tr>
<td>300 активных</td>
<td>4 ядра + <br/>(3 ядра × кол-во прил.)</td>
<td>16 ГБ + <br/>(12 ГБ × кол-во прил.)</td>
<td>16 ГБ × кол-во прил.</td>
<td>16 ГБ × кол-во прил.</td>
</tr>
<tr>
<td>400 активных</td>
<td>4 ядра + <br/>(4 ядра × кол-во прил.)</td>
<td>16 ГБ + <br/>(16 ГБ × кол-во прил.)</td>
<td>16 ГБ × кол-во прил.</td>
<td>16 ГБ × кол-во прил.</td>
</tr>
</tbody>
</table>
<h5 id="минимальная-конфигурация-резервного-сервера-приложений">Минимальная конфигурация резервного сервера приложений</h5>
<table style="width: 100%;">
<thead>
<tr>
<th><strong>Кол-во польз.</strong></th>
<th><strong>ЦП</strong></th>
<th><strong>ОЗУ</strong></th>
<th><strong>HDD</strong></th>
<th><strong>SSD</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>1­–200</td>
<td>4 ядра от 3,7 ГГц + <br/>(1 ядро × 100 польз. × кол-во прил.)</td>
<td>16 ГБ + <br/>(4 ГБ × 100 польз. × кол-во прил.)</td>
<td>16 ГБ × кол-во прил.</td>
<td>8 ГБ × кол-во прил.</td>
</tr>
<tr>
<td>200</td>
<td>4 ядра + <br/>(2 ядра × кол-во прил.)</td>
<td>16 ГБ + <br/>(8 ГБ × кол-во прил.)</td>
<td>16 ГБ × кол-во прил.</td>
<td>8 ГБ × кол-во прил.</td>
</tr>
<tr>
<td>300</td>
<td>4 ядра + <br/>(3 ядра × кол-во прил.)</td>
<td>16 ГБ + <br/>(12 ГБ × кол-во прил.)</td>
<td>16 ГБ × кол-во прил.</td>
<td>8 ГБ × кол-во прил.</td>
</tr>
<tr>
<td>400</td>
<td>4 ядра + <br/>(4 ядра × кол-во прил.)</td>
<td>16 ГБ + <br/>(16 ГБ × кол-во прил.)</td>
<td>16 ГБ × кол-во прил.</td>
<td>16 ГБ × кол-во прил.</td>
</tr>
</tbody>
</table>
<h5 id="минимальная-конфигурация-серверов-разработки-и-тестирования">Минимальная конфигурация серверов разработки и тестирования</h5>
<table style="width: 100%;">
<thead>
<tr>
<th><strong>Кол-во польз.</strong></th>
<th><strong>ЦП</strong></th>
<th><strong>ОЗУ</strong></th>
<th><strong>HDD</strong></th>
<th><strong>SSD</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>1–100</td>
<td>4 ядра от 3,7 ГГц</td>
<td>16 ГБ</td>
<td>16 ГБ</td>
<td>16 ГБ</td>
</tr>
</tbody>
</table>
<h3 id="конфигурация-системы-хранения-данных">Конфигурация системы хранения данных</h3>
<p>В минимальной конфигурации все папки данных сервера приложений могут храниться в одном разделе на высокопроизводительном SSD-накопителе.</p>
<p>Высокопроизводительные системы хранения (SSD DAS/SAN) должны обеспечивать производительность не меньше 100 000 IOPS на 1 сервер приложений.</p>
<p>Объем выделяемого пространства на высокопроизводительных (SSD DAS/SAN) и низкопроизводительных системах хранения (HDD DAS/SAN) следует определить в ходе составления технических требований.</p>
<p>Для оптимизации обработки, хранения и резервного копирования папки данных сервера приложений можно разместить в отдельных хранилищах:</p>
<ul>
<li><em>файлы базы данных и конфигурации</em> — SSD DAS/SAN (эти данные сервер приложений обрабатывает постоянно в оперативном режиме, что создает высокую нагрузку на подсистему хранения);</li>
<li><em>загруженные пользователями файлы</em> — HDD DAS/SAN (такие файлы хранятся долговременно, не в базе данных и запрашиваются по ссылке, поэтому для их обработки и хранения высокопроизводительная подсистема хранения не требуется);</li>
<li><em>журнал Системы</em> — HDD DAS/SAN (запись файлов журнала создает минимальную нагрузку на подсистему хранения);</li>
<li><em>резервные копии</em> — HDD DAS/SAN (резервные копии формируются периодически, используются редко, для их хранения важнее объем, а не производительность хранилища; тем не менее, скорость резервного копирования может снижаться в случае наличия большого количества мелких файлов, загруженных пользователями, в таком случае можно разместить папку резервных копий на высокопроизводительном накопителе);</li>
<li><em>временная папка</em> — SSD DAS/SAN (нагрузка при хранении и обработке временных файлов может возрастать при большом количестве активных пользователей и транзакций, загрузке пользователями множества файлов и под влиянием прочих факторов).</li>
</ul>
<h2 id="конфигурация-подсистем">Конфигурация подсистем</h2>
<h3 id="конфигурация-сервера-apache-ignite">Конфигурация сервера Apache Ignite</h3>
<p>Apache Ignite в минимально необходимой конфигурации устанавливается автоматически при развертывании <strong>Comindware Business Application Platform</strong>.</p>
<p><strong>Требования к конфигурации</strong></p>
<p>См. статью <a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2093">Apache Ignite. Установка и настройка. Краткое руководство</a>.</p>
<p><strong>Примеры конфигураций</strong></p>
<p>См. статью <a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2093">Apache Ignite. Установка и настройка. Краткое руководство</a>.</p>
<h3 id="конфигурация-сервера-elasticsearch">Конфигурация сервера Elasticsearch</h3>
<p>Elasticsearch в минимально необходимой конфигурации устанавливается автоматически при развертывании <strong>Comindware Business Application Platform</strong>.</p>
<p><strong>Требования к конфигурации</strong></p>
<ul>
<li>Должна быть включена аутентификация.</li>
<li>Должна быть разрешена работа под любым аккаунтом, кроме стандартного: <code>elastic</code>.</li>
<li>Номер порта должен отличаться от стандартного 9200.</li>
<li>В конфигурации должно быть задано достаточное количество шардов: минимум 3000.</li>
</ul>
<p><strong>Примеры конфигураций</strong></p>
<ul>
<li>Развертывание одного узла в Windows: см. <em><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2094">Установка Elasticsearch. Краткое руководство для Windows</a></em>.</li>
<li>Развертывание кластера в Linux: см. <em><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2095">Установка Elasticsearch и настройка кластера Elasticsearch без сертификатов подлинности</a></em>.</li>
</ul>
<h3 id="конфигурация-обратного-прокси-сервера">Конфигурация обратного прокси-сервера</h3>
<p>NGINX в минимально необходимой конфигурации устанавливается автоматически при развертывании <strong>Comindware Business Application Platform</strong>.</p>
<p><strong>Требования к конфигурации</strong></p>
<ul>
<li>Сервер NGINX;</li>
<li>Модуль ModSecurity;</li>
<li>Модуль GeoIP.</li>
</ul>
<p><strong>Примеры конфигураций</strong></p>
<ul>
<li>Развертывание сервера NGINX: cм. <em>«<a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2096">NGINX. Установка и настройка</a>»</em>.</li>
<li>Развертывание модуля GeoIP: см. <em>«<a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2097">Модуль GeoIP для NGINX. Установка и настройка</a>»</em>.</li>
</ul>
<h3 id="конфигурация-сервера-zabbix">Конфигурация сервера Zabbix</h3>
<p><strong>Требования к конфигурации</strong></p>
<p>Конфигурация сервера Zabbix должна обеспечивать мониторинг работоспособности Системы, как указано ниже.</p>
<ul>
<li>Мониторинг доступности сервера Apache Ignite
<ul>
<li>Сервер может быть недоступен из-за проблем с сетью.</li>
<li>На сервере может закончиться свободное место на диске.</li>
<li>Конфигурация сервера может не позволять обработать запросы, например, ввиду невозможности создания нового индекса или соответствующего ему шарду.</li>
</ul>
</li>
<li>Мониторинг доступности сервера Elasticsearch
<ul>
<li>Сервер может быть недоступен из-за проблем с сетью.</li>
<li>На сервере может закончиться свободное место на диске.</li>
<li>Конфигурация сервера может не позволять обработать запросы, например, ввиду невозможности создания нового индекса или соответствующего ему шарда.</li>
</ul>
</li>
<li>Мониторинг места на дисках с базой данных, журналами, резервными копиями и т. п.</li>
<li>Мониторинг ошибок в процессе работы Системы
<ul>
<li>Ошибки конфигурации Системы.</li>
<li>Ошибки в процессе эксплуатации Системы.</li>
<li>Ошибки, связанные с обновлением окружения, в котором работает Система, или компонентов самой Системы.</li>
</ul>
</li>
</ul>
<p><strong>Примеры конфигураций</strong></p>
<p>См. статью «<a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=2098">Zabbix. Установка и настройка. Краткое руководство</a>».</p>
</article>
</div>
</div>
<a class="md-top md-icon mkdocs_imported_link" data-md-component="top" href="#"> <em class="fa-light fa-arrow-up">‌<!--icon--></em> К началу </a></div>
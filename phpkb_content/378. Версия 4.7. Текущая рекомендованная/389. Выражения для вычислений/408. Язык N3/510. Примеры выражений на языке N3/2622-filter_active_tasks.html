<h1>Фильтр списка по активным задачам текущего пользователя: по всем процессам, по конкретному процессу</h1><div class="mce-toc">
<h2 class="toc-heading">Содержание</h2>
<ul>
<li><a href="#mcetoc_1i3iddoan1">Фильтр списка по активным задачам текущего пользователя</a></li>
<li><a href="#mcetoc_1i3iddfdi0">Фильтр списка по активным задачам текущего пользователя в рамках конкретного процесса</a></li>
</ul>
</div>
<h2 id="mcetoc_1i3iddoan1">Фильтр списка по активным задачам текущего пользователя</h2>
<p><span style="color: #545764; font-family: ’Open Sans’, sans-serif; font-size: 15px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 300; letter-spacing: 0.2px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">Чтобы получить в таблице список всех активных задач, где текущий пользователь является исполнителем (и возможным исполнителем, если задача назначена на нескольких пользователей), используйте следующее выражение в <a href="https://kb.comindware.ru/article.php?id=2550#list100"><strong>системном фильтре таблицы</strong></a>:</span></p>
<div>
<pre><code>@prefix cmw: &lt;http://comindware.com/logics#&gt;.</code><br/><code>@prefix taskStatus: &lt;http://comindware.com/ontology/taskStatus#&gt;.</code><br/><code>{</code><br/><code> # Помещаем аккаунт текущего пользователя в переменную ?currentUser </code><br/><code>    cmw:securityContext cmw:currentUser ?currentUser. </code><br/><code>    # Помещаем массив всех задач в переменную ?item</code><br/><code>    ?item a cmw:UserTask.<br/>    # Если выражение используется в таблице задач процесса, <br/>    # то эта строка не требуется, т. к. контекст уже будет задачей</code><br/><code>    # Начинаем цикл по массиву задач</code><br/><code>        # Проверяем, является ли текущий пользователь</code><br/><code>        # фактическим или возможным исполнителем задачи</code><br/><code>        or</code><br/><code>            {</code><br/><code>            ?item cmw:assignee ?currentUser. </code><br/><code>            }</code><br/><code>        or</code><br/><code>            {</code><br/><code>            ?item cmw:possibleAssignee ?currentUser. </code><br/><code>            }.<br/></code><code>        # Проверяем, является ли задача активной<br/>        # Если, завершенных задач, например, в 1000 раз больше активных,<br/>        # то эту строку можно перенести к выбору задач процесса<br/>        # для повышения производительности.<br/>        ?item cmw:taskStatus taskStatus:inProgress. </code><br/><code>}</code></pre>
</div>
<h2 id="mcetoc_1i3iddfdi0">Фильтр списка по активным задачам текущего пользователя в рамках конкретного процесса</h2>
<p><span style="color: #545764; font-family: ’Open Sans’, sans-serif; font-size: 15px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 300; letter-spacing: 0.2px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">Чтобы получить в таблице список всех активных задач, где текущий пользователь является исполнителем (и возможным исполнителем, если задача назначена на нескольких пользователей) по конкретному процессу, используйте в фильтре таблицы следующее выражение в <a href="https://kb.comindware.ru/article.php?id=2550#list100"><strong>системном фильтре таблицы</strong></a>:</span></p>
<pre><code>@prefix cmw: &lt;http://comindware.com/logics#&gt;. </code><br/><code>@prefix taskStatus: &lt;http://comindware.com/ontology/taskStatus#&gt;. </code><br/><code>@prefix object: &lt;http://comindware.com/ontology/object#&gt;. </code><br/><code>{ </code><br/><code>    # Помещаем шаблон процесса в переменную ?process</code><br/><code>    ?process object:alias "system_name_of_the_process_template". </code><br/><code>    # Помещаем аккаунт текущего пользователя в переменную ?currentUser </code><br/><code>    cmw:securityContext cmw:currentUser ?currentUser. </code><br/><code>    # Помещаем массив всех задач в переменную ?item<br/>    # Если выражение используется в таблице задач процесса, <br/>    # то эта строка не требуется, т. к. контекст уже будет задачей</code><br/><code>    ?item a cmw:UserTask.</code><br/><code>        # Начинаем цикл по массиву задач<br/>        # Собираем задачи выбранного процесса<br/></code><code>        ?item cmw:container ?process. <br/>        # Проверяем, является ли текущий пользователь<br/>        # фактическим или возможным исполнителем задачи</code><br/><code>        or</code><br/><code>            {</code><br/><code>            ?item cmw:assignee ?currentUser. </code><br/><code>            }</code><br/><code>        or</code><br/><code>            {</code><br/><code>            ?item cmw:possibleAssignee ?currentUser. </code><br/><code>            }.<br/>        # Проверяем, является ли задача активной<br/>        # Если, завершенных задач, например, в 1000 раз больше активных,</code><br/><code>        #</code><code> то эту строку можно перенести к выбору задач процесса<br/>        # для повышения производительности.<br/>        ?item cmw:taskStatus taskStatus:inProgress.</code><br/><code>}</code></pre>
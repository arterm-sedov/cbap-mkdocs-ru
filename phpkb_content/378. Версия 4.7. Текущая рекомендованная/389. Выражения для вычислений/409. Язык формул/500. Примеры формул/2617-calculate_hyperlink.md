---
title: Вычисление гиперссылки на запись, задачу или экземпляр процесса с помощью формул
kbId: 2617
---

# Вычисление гиперссылки на запись, задачу или экземпляр процесса с помощью формул

## Введение

Каждой записи, пользовательской задаче, форме и каждому экземпляру процесса присваивается уникальный ID. ID не повторяются в рамках сервера **Comindware Business Application Platform**.

По ID можно формировать гиперссылки на соответствующие объекты. Такие гиперссылки можно использовать на формах, в таблицах, уведомлениях и эл. письмах.

В этой статье представлены инструкции по вычислению (с помощью языка формул) гиперссылок для быстрого перехода к ресурсам приложения:

- к основной форме любой записи (см. *[Настройка свойств формы][forms]*);
- к определённой форме конкретной записи;
- к форме пользовательской задачи (см. [Пользовательская задача][process_diagram_elements_user_task], *[Редактирование формы пользовательской задачи][process_diagram_forms]**)*;
- к диаграмме экземпляра бизнес-процесса (см.*[Использование диаграммы экземпляра процесса][process_diagram_view_instance]).*

Абсолютные и относительные ссылки

При формировании ссылок на ресурсы в рамках сервера **Comindware Business Application Platform**можно использовать ссылки двух видов:

- `/resource` — относительная ссылка на ресурс.
    - Относительная ссылка будет работать только в рамках сервера **Comindware Business Application Platform** и не будет работать, например, если её отправить в эл. письме или сообщении.
    - Относительная ссылка будет работать при любом доменном имени сервера, что позволит перенести приложение на другой домен без перенастройки выражений и скриптов, вычисляющих гиперссылки.
- `http://your-host/resource` — абсолютная ссылка на ресурс.
    - Абсолютная ссылка будет работать не только в рамках сервера **Comindware Business Application Platform**, но и в любых других внешних системах, например, в эл. письмах и на сторонних веб-сайтах.
    - Абсолютная ссылка будет работать только на конкретном доменном имени, что потребует перенастройки выражений и скриптов, вычисляющих гиперссылки при переносе приложения на другой домен.

## Универсальная гиперссылка на запись, задачу или экземпляр процесса

Для перехода к любой записи, задаче или экземпляру процесса используйте универсальную ссылку следующего формата:

```
http://your-host/#Resolver/<ID>
```

**Здесь:**

- `http://your-host/` — адрес сервера **Comindware Business Application Platform**.
- `<ID>` — ID записи, пользовательской задачи или экземпляра процесса.

Примечание

Для записи универсальная ссылка всегда ведёт на основную форму шаблона, то есть форму, в свойствах которой установлен флажок «**По умолчанию**». См. *[Настройка свойств формы][forms].*

Для пользовательской задачи универсальная ссылка ведёт на форму задачи.

Для экземпляра процесса универсальная ссылка ведёт на диаграмму экземпляра процесса. 

## Гиперссылка на определённую форму конкретной записи

Для перехода к определённой форме конкретной записи используйте ссылку следующего формата:

```
http://your-host/#form/<oa.XX>/<form.XX>/<RecordID>
```

**Здесь:**

- `http://your-host/` — адрес сервера **Comindware Business Application Platform**;
- `<oa.XX>` — ID шаблона;
- `<form.XX>` — ID формы;
- `<RecordID>` — ID записи.

## Гиперссылка на экземпляр процесса

Для перехода к [диаграмме экземпляра процесса][process_diagram_view_instance] используется ссылка следующего вида:

```
http://your-host/#process/<ProcessID>/map
```

**Здесь:**

- `http://your-host/` — адрес сервера **Comindware Business Application Platform**;
- `<ProcessID>` — ID экземпляра процесса.

## Гиперссылка на пользовательскую задачу

Для перехода к [пользовательской задаче][process_diagram_elements_user_task] используется ссылка следующего вида:

```
http://your-host/#task/<TaskID>
```

**Здесь:**

- `http://your-host/` — адрес сервера **Comindware Business Application Platform**;
- `<TaskID>` — ID пользовательской задачи.

## Пример: формирование гиперссылок на записи и экземпляры процесса

В данном примере показано, как можно применять ссылки на формы записи внутри приложения и как можно отправить ссылку на экземпляр процесса электронной почтой.

1. Создайте **шаблон записи** «*Карточка товара*».
2. Создайте следующие атрибуты:

| **Название атрибута** | **Тип данных** | **Свойства** |
| --- | --- | --- |
| *Наименование* | **Текст** |  |
| *Артикул* | **Текст** |  |
| *Год выпуска* | **Дата и время** |  |
| *Количество экземпляров* | **Число** |  |
| *Изображение* | **Изображение** |  |
| *ProcessID* | **Текст** |  |
| *Перейти к готовой карточке* | **Текст** | **Формат отображения: HTML-текст** **Вычислять автоматически:** флажок установлен **Вычисляемое выражение: формула**   ``` FORMAT("<a href=/#Resolver/{0}>Перейти к готовой карточке</a>",LIST($id)) ```  **Здесь:**     - `FORMAT()` — эта функция принимает строку заменителями вида `{0}`…`{N}` и список значений. Функция подставляет значения из списка в соответствующие заменители и возвращает результирующую строку.     - `LIST()` — эта функция принимает перечень значений и возвращает список, состоящий из этих значений.     - `/#Resolver/` — префикс относительной универсальной ссылки на любую запись.     - `{0}` — заменитель, в который будет подставлен ID записи.     - `Перейти к готовой карточке` — текст, который будет отображаться в виде гиперссылки.     - `$id` — системное имя системного атрибута **ID** шаблона записи *«Карточка товара»*. |
| *Перейти к экземпляру процесса* | **Текст** | **Формат отображения: HTML-текст** **Вычислять автоматически:**флажок установлен **Вычисляемое выражение: формула**   ``` FORMAT("<a href=https://your-host/#process/{0}/map>Перейти к процессу</a>",LIST($ProcessID)) ```  **Здесь:**     - `http://your-host/` — адрес сервера **Comindware Business Application Platform**.     - `$ProcessID` — системное имя атрибута *«ProcessID»*. |
3. Создайте новую форму *«Редактирование карточки товара»* и поместите на неё атрибуты:
    - *Наименование*
    - *Артикул*
    - *Год выпуска*
    - *Изображение*
    - *Количество экземпляров*
    - *Перейти к готовой карточке*
4. Создайте атрибут **«Перейти к форме редактирования»:**

| **Название атрибута** | **Тип данных** | **Свойства** |
| --- | --- | --- |
| *Перейти к форме редактирования* | **Текст** | **Формат отображения: HTML-текст** **Вычислять автоматически:** флажок установлен **Вычисляемое выражение: формула**  ``` FORMAT("<a href=http://your-host/#form/oa.6/form.333/{0}>Перейти к форме редактирования</a>",LIST($id)) ```  **Здесь:**     - `http://your-host/` — адрес сервера **Comindware Business Application Platform**.     - `oa.6` — ID шаблона записи «*Карточка товара*» (подставьте фактическое значение).     - `form.333` — ID формы *«Редактирование карточки товара»* (подставьте фактическое значение).     - `Перейти к форме редактирования` — текст, который будет отображаться в виде гиперссылки.     - `$id` — системное имя системного атрибута **ID** шаблона записи *«Карточка товара»*. |
5. Настройте основную форму:
    - Установите для неё **доступ** **только для чтения**.
    - Поместите на ней атрибуты:
        - *Наименование*
        - *Артикул*
        - *Год выпуска*
        - *Изображение*
        - *Количество экземпляров*
        - *Перейти к форме редактирования*
6. Создайте бизнес-процесс *«Добавление нового товара со склада»*, связанный с шаблоном записи «*Карточка товара*»:
    - **Простое начальное событие** — соединено с промежуточным событием-отправкой сообщения *«Уведомление о создании карточки»*.
    - **Промежуточное событие-отправка сообщения** *«Уведомление о создании карточки»* — соединено с пользовательской задачей *«Отредактировать карточку»*.
    - **Пользовательская задача** *«Отредактировать карточку»* — соединена с конечным событием.
    - **Конечное событие** — завершает бизнес-процесс.
    
    ![Добавление нового товара со склада](https://kb.comindware.ru/assets/img_6682d359298b9.png)
    
    
    
    
    Диаграмма бизнес-процесса «*Добавление нового товара со склада*»
7. В начальном событии создайте и настройте сценарий «**Изменить значения атрибутов**»:

| Атрибут | Операция со значениями | Значение |
| --- | --- | --- |
| *ProcessID* | **Заменить** | **Формула**:   ``` FORMAT("{0}", LIST($$ProcessObject)) ```  **Здесь:** `$$ProcessObject` — системная переменная, хранящая ID экземпляра процесса. См. *`Использование переменных в сценарии {Article-ID:2399}`*   *.* Данная формула преобразует ID экземпляра процесса в строку. |
8. На **стартовую форму** начального события поместите (как вложенную) форму *«Редактирование карточки товара»*.
9. На форму задачи *«Отредактировать карточку»* поместите (как вложенную) основную форму шаблона записи «*Карточка товара*».
10. Назначьте себя исполнителем задачи *«Отредактировать карточку»*.
11. Настройте [подключение к SMTP-серверу][scenario_send_email] с названием *«Системное уведомление»*.
12. Настройте [путь передачи данных для отправки эл. почты из процесса][process_sending_connection]:
    - **Основные свойства**
        - **Название:** *Уведомление «Создана карточка товара»*
        - **Подключение:** *Системное уведомление*
        - **Имя сообщения:** *MessageNewCard*
    - **Атрибуты сообщения**
        - **Название:** *Ссылка на экземпляр процесса*
        - **Системное имя:** *ProcessLink*
        - **Тип данных:** **Текст**
    - **Свойства сообщения**
        - **Кому:** укажите свой адрес эл. почты
        - **Формат сообщения: Размеченный**
        - **Сообщение**:
        
        
        ```
        Добрый день!
        Добавлен новый товар со склада. {ProcessLink}
        ```
13. Вернитесь к диаграмме бизнес-процесса и настройте **промежуточное событие-отправку сообщения***«Уведомление о создании карточки»*:
    - **Дополнительные**
        - **Место назначения:** **внешний сокет**
        - **Использовать путь передачи данных:** *Уведомление «Создана карточка товара»*
    - **Данные сообщения**
        - **Название:** *Ссылка на экземпляр процесса*
        - **Системное имя:** *ProcessLink*
        - **Тип данных:** **текст**
        - **Значение:** **атрибут** «*Перейти к экземпляру процесса»*
14. Опубликуйте диаграмму.

### Тестирование приложения

1. Создайте экземпляр процесса *«Добавление нового товара со склада»*.
2. Заполните карточку товара.
3. На вашу почту придёт письмо со ссылкой на экземпляр процесса.
4. Перейдите по ссылке, просмотрите диаграмму, попробуйте остановить процесс или перезапустить его. См. *[Использование диаграммы экземпляра процесса][process_diagram_view_instance]***.**

_![Письмо со гиперссылкой на экземпляр процесса](https://kb.comindware.ru/assets/img_6682d880afdef.png)_
5. Откройте задачу *«Отредактировать карточку»*.

![Основная форма с гиперссылкой на форму редактирования карточки товара](https://kb.comindware.ru/assets/img_6682d6567b303.png)

Основная форма просмотра карточки товара с гиперссылкой на форму редактирования карточки
6. Просмотрите карточку товара и переключитесь между формами просмотра и редактирования по гиперссылкам *«Перейти к форме редактирования»* и *«Перейти к готовой карточке»*.

_![](https://kb.comindware.ru/assets/img_6682d69263666.png)_Форма редактирования карточки товара с гиперссылкой на форму просмотра карточки

--8<-- "related_topics_heading.md"

**[Использование диаграммы экземпляра процесса][process_diagram_view_instance]**

**[Формы. Определения, редактирование, удаление][forms]**

**[Пользовательская задача][process_diagram_elements_user_task]**

**[Атрибут типа  «Гиперссылка»][attribute_hyperlink]**

**[Отправка эл. почты из сценариев через SMTP и Exchange. Настройка подключения, пути передачи данных и сценария][scenario_send_email]**

[**Настройка пути передачи данных типа «Отправка эл. почты из процесса»**][process_sending_connection]

**[Переменные в сценарии. Определения, настройка и использование][scenario_variables]**

**[Редактирование формы пользовательской задачи][process_diagram_forms]**

**[Настройка свойств формы][forms]**



{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}

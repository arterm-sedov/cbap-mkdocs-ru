<h1>Урок 6. Усовершенствованный процесс</h1><div class="mce-toc">
<h2 class="toc-heading">Содержание</h2>
<ul>
<li><a href="#mcetoc_1hv70nlno0">Введение</a></li>
<li><a href="#l61">Выбор типа автомобиля при создании заявки</a></li>
<li><a href="#l62">Выбор автомобиля для выполнения рейса</a></li>
<li><a href="#l63">Учет затрат во время выполнения рейса</a></li>
<li><a href="#l64">Тестирование  </a></li>
<li><a href="#l65">Добавление мастер-данных на лету</a></li>
<li><a href="#mcetoc_1gbl769r00">Результаты</a></li>
</ul>
</div>
<h2 id="mcetoc_1hv70nlno0">Введение</h2>
<p>В этом уроке вы усовершенствуете процесс заказа автомобиля, использовав реестры (шаблоны записей) типов автомобилей, автомобилей, затрат и типов затрат, созданные в предыдущей главе, — настроите учёт машин в гараже, а также добавите возможность выбора типа машины из справочника.</p>
<p><strong>Предусловия:</strong> пройдены <samp data-name="aid" data-title="" data-value="2055"><span style="color: #0066bc; font-family: Tahoma;"><img src="https://kb.comindware.ru/images/marker.png" style="vertical-align: middle;"/>{Article-ID:2055}</span></samp> и <samp data-name="aid" data-title="" data-value="2058"> <span style="color: #0066bc; font-family: Tahoma;"><img src="https://kb.comindware.ru/images/marker.png" style="vertical-align: middle;"/>{Article-ID:2058}</span></samp>.</p>
<p><strong>Расчетная продолжительность:</strong> 20 мин.</p>
<p><strong>Примечание:</strong> в данном уроке представлен продукт <strong>Comindware Business Application Platform</strong> версии <span style="color: #545764; font-family: 'Open Sans', sans-serif; font-size: 15px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 300; letter-spacing: 0.2px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">4.2.219.0</span>, внешний вид страниц и меню в других версиях продукта может отличаться.</p>
<h2 id="l61">Выбор типа автомобиля при создании заявки</h2>
<p>Добавим возможность выбора типа автомобиля для Заказчика при создании заявки.</p>
<p>Для этого настроим основную экранную форму заявки…</p>
<p><strong> 1. </strong> Перейдите к шаблону <em>«Заявка на автомобиль»</em> и выберите вкладку «<strong>Формы</strong>».</p>
<p><strong> 2. </strong> Откройте конструктор формы <em>«Заявка на автомобиль — Основная форма»</em>.</p>
<p><strong>3. </strong>Перетащите на макет формы атрибут <em>«Тип автомобиля»</em>.</p>
<p><strong>4. </strong>Нажмите кнопку «<strong>Сохранить</strong>».</p>
<div class="screenshot_with_caption">
<p><img alt="Добавление атрибута «Тип автомобиля» на форму заявки на автомобиль" class="img-responsive" height="566" src="https://kb.comindware.ru/assets/img_6243638b64bb5.png" width="1070"/></p>
<p class="caption" style="font-size: 11pt !important;">Добавление атрибута «Тип автомобиля» на форму заявки на автомобиль</p>
</div>
<h2 id="l62">Выбор автомобиля для выполнения рейса</h2>
<p>Настроим форму для задачи <em>«Принять заявку»</em>, чтобы сотрудник гаража мог выбрать машину для выполнения рейса…</p>
<p><strong> 1. </strong> Перейдите к диаграмме бизнес-процесса <em>«Заказ автотранспорта»</em> и нажмите кнопку «<strong>Редактировать</strong>».</p>
<p><strong> 2. </strong> Выберите задачу <em>«Принять заявку»</em> и в меню элемента нажмите кнопку «<strong>Форма</strong>».</p>
<div class="screenshot_with_caption">
<p><img alt="Переход к настройке формы задачи «Принять заявку» на диаграмме бизнес-процесса" class="img-responsive" height="443" src="https://kb.comindware.ru/assets/img_6311c2bd7100c.png" width="1264"/></p>
<p class="caption" style="font-size: 11pt !important;">Переход к настройке формы задачи «Принять заявку» на диаграмме бизнес-процесса</p>
</div>
<p><strong> 3. </strong> Разверните атрибут <em>«Заявка на автомобиль»</em> на панели элементов и перетащите ссылку <em>«Автомобиль»</em> на область <em>«Принятие заявки»</em>.</p>
<p><strong> 4. </strong> Укажите для поля <em>«Автомобиль»</em> <strong>режим доступа </strong>«<strong>Требовать ввод</strong>» и сохраните форму.</p>
<div class="screenshot_with_caption">
<p><img alt="Добавление атрибута-записи «Автомобиль» на форму задачи «Принять заявку»" class="img-responsive" height="532" src="https://kb.comindware.ru/assets/img_6243655bcc67c.png" width="1070"/></p>
<p class="caption" style="font-size: 11pt !important;">Добавление атрибута-записи «Автомобиль» на форму задачи «Принять заявку»</p>
</div>
<h2 id="l63">Учет затрат во время выполнения рейса</h2>
<p>Добавим на форму задачи <em>«Выполнить рейс»</em> раскрывающийся список <em>«Автомобиль»</em> и таблицу <em>«Затраты»</em>, чтобы сотрудник гаража видел номерной знак заказанного автомобиля, а также мог добавить новый автомобиль в список и вести учет затрат…</p>
<p><strong> 1. </strong> На диаграмме процесса выберите задачу<em> «Выполнить рейс»</em> и с помощью меню элемента перейдите к ее форме.</p>
<p><strong> 2. </strong>Разверните элемент <em>«Заявка на автомобиль»</em></p>
<p><strong>3. </strong>Перетащите атрибут <em>«Автомобиль»</em> на область <em>«Выполнить рейс».</em></p>
<p><strong>4. </strong>Перетащите атрибут <em>«Затраты»</em> на область <em>«Выполнить рейс».</em></p>
<p><strong>5. </strong>В панели свойств для поля <em>«Затраты»</em> выберите <strong>представление </strong>«<strong>Таблица</strong>».</p>
<div class="screenshot_with_caption">
<p><img alt="Добавление на форму задачи «Выполнить рейс» раскрывающегося списка «Автомобиль» и таблицы «Затраты»" class="img-responsive" height="718" src="https://kb.comindware.ru/assets/img_62436844c3a8e.png" width="1070"/></p>
<p class="caption" style="font-size: 11pt !important;">Добавление на форму задачи «Выполнить рейс» раскрывающегося списка «Автомобиль» и таблицы «Затраты»</p>
</div>
<p><strong>6. </strong> Разверните атрибут <em>«Затраты»</em> на панели элементов и перетащите атрибуты: <em>«Тип затрат»</em> и <em>«Сумма»</em> в таблицу <em>«Затраты» на форме.</em></p>
<p><strong>7. </strong> Выберите <strong>область кнопок</strong> таблицы<em> «Затраты»</em> и перетащите на нее из панели элементов кнопки «<strong>Создать</strong>», «<strong>Редактировать</strong>» и «<strong>Перейти</strong>». Это позволит создавать, редактировать и просматривать записи о затратах из таблицы <em>«Затраты»</em> на форме.</p>
<div class="screenshot_with_caption">
<p><img alt="Добавление в таблицу на форме задачи «Выполнить рейс» атрибутов записи «Затраты»" class="img-responsive" height="600" src="https://kb.comindware.ru/assets/img_62436a3154517.png" width="1070"/></p>
<p class="caption" style="font-size: 11pt !important;">Добавление в таблицу на форме задачи «Выполнить рейс» атрибутов записи «Затраты»</p>
</div>
<p>Добавим в реестр <em>«Заявка на автомобиль»</em> атрибут с итоговой суммой затрат…</p>
<p><strong> 8. </strong> Нажмите кнопку «<strong>Добавить атрибут</strong>» у атрибута<em> «Заявка на автомобиль»</em> в панели элементов.</p>
<p><strong>9.</strong> Создайте атрибут<em> «Итоговая сумма затрат»</em> числового типа, с отображением 2<strong> знаков после запятой</strong>.</p>
<div class="screenshot_with_caption">
<p><img alt="Добавление числового атрибута в шаблон «Заявка на автомобиль»" class="img-responsive" height="376" src="https://kb.comindware.ru/assets/img_6311c609a66c7.png" width="1264"/></p>
<p class="caption" style="font-size: 11pt !important;">Добавление числового атрибута в шаблон «Заявка на автомобиль»</p>
</div>
<p><strong> 10. </strong> Перетащите атрибут <em>«Итоговая сумма затрат»</em> на область <em>«Выполнить рейс»</em> под таблицу <em>«Затраты»</em>.</p>
<p><strong>11. </strong> Сохраните форму задачи <em>«Выполнить рейс»</em>.</p>
<p><strong>12. </strong> Вернитесь к диаграмме бизнес-процесса и опубликуйте ее.</p>
<div class="notice notice-info">
<p><strong>Примечание</strong></p>
Изменения, внесенные в диаграмму бизнес-процесса, вступят в силу только после ее публикации. 
<div>При публикации можно выбрать замену текущей версии или создание новой версии диаграммы.</div>
<div>Если создать новую версию диаграммы, то экземпляр процесса, запущенный по старой версии диаграммы процесса, дорабатывает до конца по этой версии.</div>
<div>Новые экземпляры запускаются по новой версии. </div>
</div>
<h2 id="l64">Тестирование  </h2>
<p><strong>1. </strong> Перейдите на вкладку «<strong>Свойства</strong>» шаблона процесса и нажмите кнопку «<strong>Перейти к экземплярам</strong>».</p>
<p><strong> 2. </strong>В списке экземпляров процесса запустите новый процесс, нажав кнопку «<strong>Создать</strong>».</p>
<p><strong> 3. </strong> Заполните поля стартовой формы и укажите тип автомобиля. Нажмите кнопку «<strong>Создать</strong>».</p>
<p><strong> 4. </strong> Перейдите в раздел «<strong>Мои задачи</strong>» с помощью панели навигации слева.</p>
<p><strong> 5. </strong> Откройте задачу<em> «Заказ автотранспорта — Согласовать заявку»</em> и установите флажок<em> «Одобрено».</em></p>
<p><strong> 6. </strong> Завершите задачу.</p>
<p><strong> 7. </strong> Вернитесь в раздел «<strong>Мои задачи</strong>» и откройте задачу <em>«Заказ автотранспорта — Принять заявку».</em></p>
<p><strong> 8. </strong> В поле <em>«Автомобиль»</em> выберите автомобиль из раскрывающегося списка.</p>
<p><strong> 9. </strong> Укажите <em>«Принято» — «Да»</em> и завершите задачу.</p>
<p><strong> 10. </strong> Вернитесь в раздел «<strong>Мои задачи</strong>» и откройте задачу <em>«Выполнить рейс».</em></p>
<p><strong> 11. </strong> Нажмите кнопку «<strong>Создать</strong>» в таблице <em>«Затраты»</em>. Укажите сумму и тип затрат в таблице и нажмите кнопку «<strong>Сохранить</strong>».</p>
<p><strong> 12. </strong> Добавьте еще несколько записей в коллекцию затрат.</p>
<p><strong> 13. </strong> Завершите задачу.</p>
<h2 id="l65">Добавление мастер-данных на лету</h2>
<p>Настроим возможность ввода данных нового автомобиля сотрудником гаража при выполнении рейса…</p>
<p><strong> 1. </strong> Вернитесь к диаграмме бизнес-процесса и нажмите кнопку «<strong>Редактировать</strong>».</p>
<p><strong>2. </strong>Перейдите к форме задачи <em>«Выполнить рейс».</em></p>
<p><strong> 3. </strong> Выберите поле <em>«Автомобиль»</em> на форме и в ее свойствах установите флажок «<strong>Создание записей</strong>».</p>
<p><strong> 4. </strong> Укажите <strong>форму </strong>для создания записей — <em>«Автомобиль — Основная форма».</em></p>
<div class="screenshot_with_caption">
<p><img alt="Настройка атрибута «Автомобиль» для создания записей на лету" class="img-responsive" height="416" src="https://kb.comindware.ru/assets/img_62436fdbdf697.png" width="1070"/></p>
<p class="caption" style="font-size: 11pt !important;">Настройка атрибута «Автомобиль» для создания записей на лету</p>
</div>
<p><strong>5. </strong> Сохраните форму и опубликуйте диаграмму бизнес-процесса.</p>
<div class="notice notice-info">
<p><strong>Примечание</strong></p>
Флажок «<strong>Создание записей</strong>» в свойствах раскрывающегося списка означает возможность создавать записи с помощью формы связанного шаблона. 
<div>Когда этот флажок установлен для поля <em>«Автомобиль»</em>, сотрудник гаража сможет добавить новый автомобиль «на лету».</div>
</div>
<p>Протестируем добавление нового автомобиля…</p>
<p><strong> 1. </strong> Запустите процесс и пройдите его до задачи <em>«Выполнить рейс».</em></p>
<p><strong> 2. </strong> Нажмите кнопку «<strong>Создать</strong>» в поле <em>«Автомобиль».</em></p>
<div class="screenshot_with_caption">
<p><img alt="Создание автомобиля по ссылке" class="img-responsive" height="495" src="https://kb.comindware.ru/assets/img_6311ca66b0f71.png" width="1254"/></p>
<p class="caption" style="font-size: 11pt !important;">Создание автомобиля по ссылке</p>
</div>
<p><strong> 3. </strong> Заполните поля отобразившейся формы и сохраните ее.</p>
<p><strong>4. </strong>Завершите задачу.</p>
<h2 id="mcetoc_1gbl769r00">Результаты</h2>
<p>В этом уроке мы настроили формы задач для сотрудника гаража, настроили возможность выбора типа автомобиля и протестировали усовершенствованный процесс.</p>
<p>В <a href="https://kb.comindware.ru/article.php?id=2060"> следующем уроке </a> вы настроите автоматическое вычисление номера, статуса заявки и итоговой суммы затрат, а также фильтрацию при выборе типа автомобиля.</p>
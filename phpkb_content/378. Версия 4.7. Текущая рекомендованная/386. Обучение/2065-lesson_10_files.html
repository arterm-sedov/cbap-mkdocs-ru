<h1>Урок 10. Работа с файлами</h1><div class="mce-toc">
<h2 class="toc-heading">Содержание</h2>
<ul>
<li><a href="#mcetoc_1hv71lmog0">Введение</a></li>
<li><a href="#mcetoc_1gbl83l320">Загрузка документов и изображений</a></li>
<li><a href="#mcetoc_1gbl84dn71">Тестирование загрузки документа</a></li>
<li><a href="#mcetoc_1gbl84oct2">Результаты</a></li>
</ul>
</div>
<h2 id="mcetoc_1hv71lmog0">Введение</h2>
<p>Из этого урока вы узнаете, как загружать в систему и скачивать файлы: документы и изображения.</p>
<p><strong>Предусловие:</strong> пройден <samp data-name="aid" data-title="" data-value="2064"><span style="color: #0066bc; font-family: Tahoma;"><img src="https://kb.comindware.ru/images/marker.png" style="vertical-align: middle;"/>{Article-ID:2064}</span></samp>.</p>
<p><strong>Расчетная продолжительность:</strong> 10 мин.</p>
<p><strong>Примечание:</strong> в данном уроке представлен продукт <strong>Comindware Business Application Platform</strong> версии <span style="color: #545764; font-family: 'Open Sans', sans-serif; font-size: 15px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 300; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">4.2.219.0</span>, внешний вид страниц и меню в других версиях продукта может отличаться.</p>
<h2 id="mcetoc_1gbl83l320">Загрузка документов и изображений</h2>
<p>Чтобы водитель, выполняющий рейс, мог загружать в систему сканы квитанций и другие документы, следует добавить соответствующий атрибут на экранную форму.</p>
<p>Добавим атрибут типа «<strong>Документ</strong>» в шаблон <em>«Затраты»</em>…</p>
<p><strong> 1. </strong> Перейдите на вкладку «<strong>Атрибуты</strong>» шаблона <em>«Затраты»</em>.</p>
<p><strong> 2. </strong> Создайте атрибут <em>«Приложение»</em> с <strong>типом данных</strong> «<strong>Документ</strong>».</p>
<p><strong>3. </strong> Установите флажок «<strong>Хранить несколько значений</strong>», чтобы к записи можно было прикреплять несколько файлов одновременно.</p>
<p><strong>4. </strong> Сохраните атрибут.</p>
<div class="screenshot_with_caption">
<p><img alt="Создание атрибута типа &lt;em&gt;«Документ»&lt;/em&gt;" class="img-responsive" height="534" src="https://kb.comindware.ru/assets/img_6317ce3eebdfe.png" width="1254"/></p>
<p class="caption" style="font-size: 11pt !important;">Создание атрибута типа «<strong>Документ</strong>»</p>
</div>
<p>Добавим созданный атрибут в таблицу затрат на форме задачи <em>«Выполнить рейс»</em>…</p>
<p><strong> 1. </strong> Перейдите к вкладке «<strong>Диаграмма</strong>» шаблона процесса <em>«Заказ автотранспорта»</em> нажмите кнопку «<strong>Редактировать</strong>».</p>
<p><strong> 2. </strong> Выберите задачу <em>«Выполнить рейс»</em> и в меню элемента нажмите кнопку «<strong>Форма</strong>».</p>
<p><strong> 3. </strong> На панели элементов разверните шаблоны <em>«Заявка на автомобиль»</em> и <em>«Затраты»</em>.</p>
<p><strong> 4. </strong> Перетащите атрибут <em>«Приложение»</em> на форму в таблицу <em>«Затраты»</em>.</p>
<p><strong> 5. </strong> Сохраните форму.</p>
<div class="screenshot_with_caption">
<p><img alt="Добавление атрибута типа &lt;em&gt;«Документ»&lt;/em&gt; на экранную форму" class="img-responsive" height="706" src="https://kb.comindware.ru/assets/img_6317cf4a7c256.png" width="1254"/></p>
<p class="caption" style="font-size: 11pt !important;">Добавление атрибута типа <em>«Документ»</em> на экранную форму</p>
</div>
<p><strong> 6. </strong> Вернитесь к диаграмме процесса и опубликуйте ее.</p>
<h2 id="mcetoc_1gbl84dn71">Тестирование загрузки документа</h2>
<p><strong> 1. </strong> Создайте новую заявку на автомобиль и пройдите бизнес-процесс до задачи <em>«Выполнить рейс»</em>.</p>
<div class="notice notice-info">
<p><strong>Примечание</strong></p>
Для тестирования работы бизнес-приложения вы можете выполнять пользовательские задачи одним из трех способов: <br/>
<ul>
<li>войти в систему несколько раз с разными учетными записями: <em>Заказчик, Секретарь, Водитель, Диспетчер</em>;</li>
<li>создать заявку на автомобиль, затем открыть диаграмму запущенного бизнес-процесса <em>«Заказ автотранспорта»</em> и переходить к задачам с помощью кнопки «<strong>Перейти</strong>» <img alt="Перейти" class="img-responsive" height="24" src="https://kb.comindware.ru/assets/img_6317cf670d9c3.png" width="24"/>  в панели «<strong>Токены</strong>» ;</li>
<li>назначить себя исполнителем всех пользовательских задач.</li>
</ul>
</div>
<p><strong> 2. </strong> На форме задачи <em>«Выполнить рейс»</em> создайте запись в таблице <em>«Затраты»</em>.</p>
<p><strong> 3. </strong>Загрузите текстовый документ к созданной записи. Для этого нажмите в строке затраты поле <em>«Приложение»</em> и нажмите кнопку «<strong>Добавить документ</strong>».</p>
<p><strong> 4. </strong> Создайте еще одну запись в коллекции <em>«Затраты»</em></p>
<p><strong>5. </strong>Загрузите изображение ко второй записи затрат. </p>
<p><strong>6. </strong> Нажмите кнопку «<strong>Сохранить</strong>».</p>
<p>Проверим возможность скачивания загруженных документов с сохраненной формы…</p>
<p><strong> 7. </strong> Нажмите название загруженного текстового документа или изображения в коллекции затрат. Браузер скачает прикрепленный файл.</p>
<div class="screenshot_with_caption">
<p><img alt="Загрузка в систему и скачивание файла с помощью экранной формы" class="img-responsive" height="495" src="https://kb.comindware.ru/assets/img_6317d1a7c99ba.png" width="1254"/></p>
<p class="caption" style="font-size: 11pt !important;">Загрузка в систему и скачивание файла с помощью экранной формы</p>
</div>
<p> </p>
<h2 id="mcetoc_1gbl84oct2">Результаты</h2>
<p>Поздравляем! Вы научились работать с файлами: загружать в систему и скачивать документы и изображения.</p>
<div class="md-body" data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="comindware" dir="ltr" kb-id="5067" kb-tags="" kb-title="Конфигурация экземпляра, компонентов ПО и служб. Настройка">
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<nav aria-label="Содержание" class="md-nav md-nav--secondary">
<div class="mce-toc">
<h2 class="toc-heading">
      Содержание
      </h2>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#введение">
<span class="md-ellipsis">
      Введение
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#configuration_files_linux_instance">
<span class="md-ellipsis">
      Конфигурация экземпляра ПО Comindware Platform
    </span>
</a>
<nav aria-label="Конфигурация экземпляра ПО Comindware Platform" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#пример-yml-файла-конфигурации-экземпляра-по">
<span class="md-ellipsis">
      Пример YML-файла конфигурации экземпляра ПО
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#конфигурация-службы-apigateway">
<span class="md-ellipsis">
      Конфигурация службы apigateway
    </span>
</a>
<nav aria-label="Конфигурация службы apigateway" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#пример-конфигурации-службы-apigatewayyml">
<span class="md-ellipsis">
      Пример конфигурации службы apigateway.yml
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#конфигурация-службы-adapterhost">
<span class="md-ellipsis">
      Конфигурация службы adapterhost
    </span>
</a>
<nav aria-label="Конфигурация службы adapterhost" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#пример-файла-конфигурации-adapterhostyml">
<span class="md-ellipsis">
      Пример файла конфигурации adapterhost.yml
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#конфигурация-apache-ignite">
<span class="md-ellipsis">
      Конфигурация Apache Ignite
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#конфигурация-кучи-java">
<span class="md-ellipsis">
      Конфигурация кучи Java
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#конфигурация-nginx">
<span class="md-ellipsis">
      Конфигурация NGINX
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#связанные-статьи">
<span class="md-ellipsis">
      Связанные статьи
    </span>
</a>
</li>
</ul>
</div>
</nav>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h2 id="введение">Введение</h2>
<p>Здесь представлены инструкции по настройке файлов конфигурации после развёртывания и обновления ПО <strong>Comindware Platform</strong>, его компонентов и служб.</p>
<h2 id="configuration_files_linux_instance">Конфигурация экземпляра ПО Comindware Platform</h2>
<ol class="colored_numbers_list">
<li>
<p>Откройте файл конфигурации экземпляра ПО (<code>&lt;instanceName&gt;</code> — имя экземпляра ПО) для редактирования:</p>
<div class="highlight"><code><pre><span></span><code>nano<span class="w"> </span>/usr/share/comindware/configs/instance/&lt;instanceName&gt;.yml</code> <br/></pre></code></div>
</li>
<li>
<p>При необходимости измените параметры, например:</p>
<ul>
<li><code>journal.server</code> — адрес сервера OpenSearch (Elasticsearch).</li>
<li><code>journal.name</code> — индекс сервера OpenSearch (Elasticsearch).</li>
<li><code>db.workDir</code> — директория для хранения базы данных экземпляра ПО.</li>
<li><code>db.name</code> — префикс кэшей в базе данных экземпляра ПО.</li>
<li><code>userStorage.localDisk.path</code> — директория для хранения загруженных файлов.</li>
<li><code>mq.server</code> — адрес сервера Apache Kafka.</li>
<li><code>backup.defaultFolder</code> — директория для хранения резервных копий экземпляра ПО.</li>
<li><code>backup.defaultFileName</code> — имя файла резервной копии экземпляра ПО.</li>
</ul>
<div class="notice notice-warning">
<p class="admonition-title">Внимание!</p>
<p>Директивы <code>isFederationAuthEnabled</code> и <code>manageAdapterHost</code> требуется удалить, если они присутствуют.</p>
<p>Директивы <code>mq.server</code> (адрес и порт сервера очереди сообщений), <code>mq.group</code> (идентификатор группы очереди сообщений), <code>mq.node</code> (идентификатор узла очереди сообщений) и <code>cluster.name</code> / <code>clusterName</code> (имя экземпляра ПО) должны совпадать в трёх файлах конфигурации:</p>
<ul>
<li><code>/usr/share/comindware/configs/instance/&lt;instanceName&gt;.yml</code></li>
<li><code>/var/www/&lt;instanceName&gt;/adapterhost.yml</code></li>
<li><code>/var/www/&lt;instanceName&gt;/apigateway.yml</code></li>
</ul>
</div>
</li>
<li>
<p>Сохраните файл конфигурации.</p>
</li>
<li>
<p>Убедитесь, что директории, указанные в файле конфигурации, существуют. При необходимости создайте их и задайте права доступа:</p>
<div class="highlight"><code><pre><span></span><code>mkdir<span class="w"> </span>-p<span class="w"> </span>&lt;path/to/Database&gt;</code> <br/><code>mkdir<span class="w"> </span>-p<span class="w"> </span>&lt;path/to/Streams&gt;</code> <br/><code>mkdir<span class="w"> </span>-p<span class="w"> </span>&lt;path/to/Backup&gt;</code> <br/><code>chown<span class="w"> </span>-R<span class="w"> </span>&lt;User&gt;:&lt;Group&gt;<span class="w"> </span>&lt;path/to/Database&gt;<span class="w"> </span>&lt;path/to/Streams&gt;<span class="w"> </span>&lt;path/to/Backup&gt;</code> <br/></pre></code></div>
<p>Здесь значения <code>&lt;User&gt;</code> и <code>&lt;Group&gt;</code> должны совпадать с такими же параметрами в файле <code>/usr/lib/systemd/system/comindware&lt;instanceName&gt;.service</code></p>
</li>
<li>
<p>Перезапустите службу экземпляра ПО:</p>
<div class="highlight"><code><pre><span></span><code>systemctl<span class="w"> </span>restart<span class="w"> </span>comindware&lt;instanceName&gt;</code> <br/></pre></code></div>
</li>
</ol>
<h3 class="pageBreakBefore" id="пример-yml-файла-конфигурации-экземпляра-по">Пример YML-файла конфигурации экземпляра ПО</h3>
<div class="highlight"><code><pre><span></span><code><span class="c1">##### Настройка базовых параметров Comindware Platform #####</span></code> <br/><code><span class="c1"># Имя экземпляра Comindware Platform.</span></code> <br/><code><span class="c1"># Устаревшая директива: instanceName</span></code> <br/><code><span class="nt">clusterName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;instanceName&gt;</span></code> <br/><code><span class="c1"># Имя узла экземпляра Comindware Platform.</span></code> <br/><code><span class="c1">#nodeName: &lt;instanceName&gt;</span></code> <br/><code><span class="c1"># Путь к экземпляру, по которому Comindware Platform находит свою конфигурацию.</span></code> <br/><code><span class="nt">configPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;configPath&gt;</span></code> <br/><code><span class="c1"># Адрес службы журналирования OpenSearch (Elasticsearch).</span></code> <br/><code><span class="c1"># Устаревшая директива: elasticsearchUri</span></code> <br/><code><span class="nt">journal.server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://&lt;searchHostIP&gt;:&lt;searchHostPort&gt;</span></code> <br/><code><span class="c1"># Индекс службы журналирования.</span></code> <br/><code><span class="c1"># journal.name: &lt;prefix&gt;-&lt;instanceName&gt;</span></code> <br/><code><span class="c1"># Выключение службы журналирования.</span></code> <br/><code><span class="c1">#journal.enabled: false</span></code> <br/><code><span class="c1"># URI-адрес экземпляра Comindware Platform.</span></code> <br/><code><span class="nt">fqdn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;hostName&gt;</span></code> <br/><code><span class="c1"># Порт экземпляра Comindware Platform.</span></code> <br/><code><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;portNumber&gt;</span></code> <br/><code><span class="c1"># Версия экземпляра Comindware Platform.</span></code> <br/><code><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;versionNumber&gt;</span></code> <br/><code></code> <br/><code><span class="c1">##### Настройка базы данных #####</span></code> <br/><code><span class="c1"># Использование тонкого клиента.</span></code> <br/><code><span class="c1">#db.asThinClient: true</span></code> <br/><code><span class="c1"># Конечные точки для подключения тонкого клиента.</span></code> <br/><code><span class="c1">#db.asThinClientEndpoints: 127.0.0.1:10800</span></code> <br/><code><span class="c1"># Путь к базе данных.</span></code> <br/><code><span class="c1"># Устаревшая директива: databasePath</span></code> <br/><code><span class="nt">db.workDir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/lib/comindware/&lt;instanceName&gt;/Database</span></code> <br/><code><span class="c1"># Папка установки Apache Ignite.</span></code> <br/><code><span class="c1">#db.homeDir:</span></code> <br/><code><span class="c1"># Путь к файлу конфигурации Apache Ignite.</span></code> <br/><code><span class="c1">#db.configPath:</span></code> <br/><code><span class="c1"># Настройки JVM.</span></code> <br/><code><span class="c1">#db.jvmOpts:</span></code> <br/><code><span class="c1"># Настройки Java.</span></code> <br/><code><span class="c1">#db.javaOpts:</span></code> <br/><code><span class="c1"># Включение автоматической настройки узлов Apache Ignite.</span></code> <br/><code><span class="c1">#db.baselineAutoAdjustEnabledFlag: false</span></code> <br/><code><span class="c1"># Время ожидания фактического изменения настройки узлов Apache Ignite</span></code> <br/><code><span class="c1"># с момента последнего изменения.</span></code> <br/><code><span class="c1">#db.baselineAutoAdjustTimeout: 3000</span></code> <br/><code><span class="c1"># Согласованный глобальный уникальный идентификатор узла Apache Ignite.</span></code> <br/><code><span class="c1">#db.consistentId: </span></code> <br/><code><span class="c1"># Используемый префикс кэшей в базе данных</span></code> <br/><code><span class="c1"># Устаревшая директива: databaseName</span></code> <br/><code><span class="nt">db.name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;instanceName&gt;</span></code> <br/><code><span class="c1"># Префикс кэшей в базе данных, используемый при обновлении.</span></code> <br/><code><span class="c1">#db.upgradeName:</span></code> <br/><code><span class="c1"># Путь к онтологии Comindware</span></code> <br/><code><span class="c1">#db.n3Dir:</span></code> <br/><code></code> <br/><code></code> <br/><code><span class="c1">##### Настройка хранения загруженных файлов #####</span></code> <br/><code><span class="c1"># Тип хранилища (LocalDisk | S3).</span></code> <br/><code><span class="nt">userStorage.type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LocalDisk</span></code> <br/><code><span class="c1"># Путь к пользовательским файлам экземпляра.</span></code> <br/><code><span class="nt">userStorage.localDisk.path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/lib/comindware/&lt;instanceName&gt;/Streams</span></code> <br/><code><span class="c1"># Имя корзины S3 для хранения загруженных файлов.</span></code> <br/><code><span class="c1">#userStorage.s3.bucket:</span></code> <br/><code><span class="c1"># Имя подключения к S3.</span></code> <br/><code><span class="c1">#userStorage.s3.connection: &lt;s3ConnectionName&gt;</span></code> <br/><code></code> <br/><code><span class="c1">##### Настройка хранения временных файлов #####</span></code> <br/><code><span class="c1"># Тип хранилища (LocalDisk | S3).</span></code> <br/><code><span class="nt">tempStorage.type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LocalDisk</span></code> <br/><code><span class="c1"># Путь к временным файлам экземпляра.</span></code> <br/><code><span class="nt">tempStorage.localDisk.path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/lib/comindware/&lt;instanceName&gt;/Temp</span></code> <br/><code><span class="c1"># Имя корзины S3 для хранения временных файлов.</span></code> <br/><code><span class="c1">#tempStorage.s3.bucket:</span></code> <br/><code><span class="c1"># Имя подключения к S3.</span></code> <br/><code><span class="c1">#tempStorage.s3.connection: &lt;s3ConnectionName&gt;</span></code> <br/><code><span class="c1"># Временная папка</span></code> <br/><code><span class="nt">tempWorkingDir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/lib/comindware/&lt;instanceName&gt;/LocalTemp</span></code> <br/><code></code> <br/><code><span class="c1">##### Настройка очереди сообщений #####</span></code> <br/><code><span class="c1"># Адрес и порт сервера очереди сообщений Apache Kafka.</span></code> <br/><code><span class="nt">mq.server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;kafkaBrokerIP&gt;:&lt;kafkaBrokerPort&gt;</span></code> <br/><code><span class="c1"># Идентификатор группы очереди сообщений.</span></code> <br/><code><span class="nt">mq.group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;prefix&gt;-&lt;instanceName&gt;</span></code> <br/><code><span class="c1"># Префикс имени очередей сообщений.</span></code> <br/><code><span class="nt">mq.name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;instanceName&gt;</span></code> <br/><code><span class="c1"># Идентификатор узла очереди сообщений.</span></code> <br/><code><span class="nt">mq.node</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;instanceName&gt;</span></code> <br/><code><span class="c1"># Выключение функции очереди сообщений.</span></code> <br/><code><span class="c1">#mq.enabled: false</span></code> <br/><code><span class="c1"># Протокол безопасности очереди сообщений.</span></code> <br/><code><span class="c1"># (Plaintext | Ssl | SaslPlaintext | SaslSsl)</span></code> <br/><code><span class="c1">#mq.securityProtocol: Plaintext</span></code> <br/><code></code> <br/><code><span class="c1">##### Настройка SSL-подключения очереди сообщений #####</span></code> <br/><code><span class="c1"># Путь к файлу корневого сертификата сервера очереди сообщений.</span></code> <br/><code><span class="c1">#mq.ssl.caLocation:</span></code> <br/><code><span class="c1"># Выключение идентификации адреса сервера очереди сообщений.</span></code> <br/><code><span class="c1">#mq.ssl.endpointIdentificationEnabled: false </span></code> <br/><code></code> <br/><code><span class="c1">##### Настройка SASL-подключения очереди сообщений #####</span></code> <br/><code><span class="c1"># Имя пользователя, используемое для подключения посредством SASL.</span></code> <br/><code><span class="c1">#mq.sasl.username:</span></code> <br/><code><span class="c1">#Пароль для аутентификации, используемый для подключения посредством SASL.</span></code> <br/><code><span class="c1">#mq.sasl.password:</span></code> <br/><code><span class="c1"># Тип механизма SASL (None | Plain | ScramSha256 | ScramSha512).</span></code> <br/><code><span class="c1">#mq.sasl.mechanism:</span></code> <br/><code></code> <br/><code></code> <br/><code><span class="c1">##### Настройка очереди сообщений для коммуникации с адаптерами #####</span></code> <br/><code><span class="c1"># Выключение функции коммуникации брокера сообщений с адаптером 0.</span></code> <br/><code><span class="c1">#mq.adapter.0.enabled: false</span></code> <br/><code><span class="c1"># Выключение отправителя сообщений.</span></code> <br/><code><span class="c1">#mq.adapter.0.producer.enabled: false</span></code> <br/><code><span class="c1"># Выключение получателя сообщений.</span></code> <br/><code><span class="c1">#mq.adapter.0.consumer.enabled: false</span></code> <br/><code><span class="c1"># Выключение функции коммуникации брокера сообщений с адаптером 1.</span></code> <br/><code><span class="c1">#mq.adapter.1.enabled: false</span></code> <br/><code><span class="c1"># Выключение отправителя сообщений.</span></code> <br/><code><span class="c1">#mq.adapter.1.producer.enabled: false</span></code> <br/><code><span class="c1"># Выключение получателя сообщений.</span></code> <br/><code><span class="c1">#mq.adapter.1.consumer.enabled: false</span></code> <br/><code><span class="c1"># Выключение функции коммуникации брокера сообщений с адаптером 2.</span></code> <br/><code><span class="c1">#mq.adapter.2.enabled: false</span></code> <br/><code><span class="c1"># Выключение отправителя сообщений.</span></code> <br/><code><span class="c1">#mq.adapter.2.producer.enabled: false</span></code> <br/><code><span class="c1"># Выключение получателя сообщений.</span></code> <br/><code><span class="c1">#mq.adapter.2.consumer.enabled: false</span></code> <br/><code><span class="c1"># Выключение функции коммуникации брокера сообщений с адаптером 3.</span></code> <br/><code><span class="c1">#mq.adapter.3.enabled: false</span></code> <br/><code><span class="c1"># Выключение отправителя сообщений.</span></code> <br/><code><span class="c1">#mq.adapter.3.producer.enabled: false</span></code> <br/><code><span class="c1"># Выключение получателя сообщений.</span></code> <br/><code><span class="c1">#mq.adapter.3.consumer.enabled: false</span></code> <br/><code></code> <br/><code><span class="c1">##### Настройка OpenID-аутентификации #####</span></code> <br/><code><span class="c1"># Имя OpenID-сервиса, использующегося для входа.</span></code> <br/><code><span class="c1">#auth.openId.displayName:</span></code> <br/><code><span class="c1"># Включение функции OpenID.</span></code> <br/><code><span class="c1">#auth.openId.enabled: true</span></code> <br/><code><span class="c1"># Адрес сервера OpenID Connect.</span></code> <br/><code><span class="c1">#auth.openId.server:</span></code> <br/><code><span class="c1"># Пространство имен или контекст, в котором происходит аутентификация пользователей.</span></code> <br/><code><span class="c1"># Используется для управления идентификацией и доступом в системе OpenID Connect.</span></code> <br/><code><span class="c1">#auth.openId.realm:</span></code> <br/><code><span class="c1"># Уникальный идентификатор клиентского приложения, используемый</span></code> <br/><code><span class="c1"># для аутентификации и авторизации запросов по протоколу OpenID Connect.</span></code> <br/><code><span class="c1">#auth.openId.clientId:</span></code> <br/><code><span class="c1"># Секретный ключ OpenId Connect</span></code> <br/><code><span class="c1">#auth.openId.clientSecret:</span></code> <br/><code><span class="c1"># Список идентификаторов целевой аудитории, для которой предназначены токены, </span></code> <br/><code><span class="c1"># используемые в процессе аутентификации и авторизации в OpenID Connect.</span></code> <br/><code><span class="c1">#auth.openId.audience:</span></code> <br/><code></code> <br/><code></code> <br/><code><span class="c1">##### Настройка резервного копирования #####</span></code> <br/><code><span class="c1"># Папка для резервного копирования по умолчанию.</span></code> <br/><code><span class="c1"># Будет использоваться во вновь создаваемых конфигурациях резервного копирования.</span></code> <br/><code><span class="c1"># Устаревшая директива: backup.config.default.repository.localDisk.path</span></code> <br/><code><span class="nt">backup.defaultFolder</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/backups/&lt;instanceName&gt;</span></code> <br/><code><span class="c1"># Имя файла резервных копий по умолчанию.</span></code> <br/><code><span class="c1"># Будет использоваться во вновь создаваемых конфигурациях резервного копирования.</span></code> <br/><code><span class="nt">backup.defaultFileName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;instanceName&gt;</span></code> <br/><code><span class="c1"># Выключение функции резервного копирования.</span></code> <br/><code><span class="c1">#backup.enabled: false</span></code> <br/><code><span class="c1"># Выключение сеансов резервного копирования.</span></code> <br/><code><span class="c1"># Выключает выполнение резервного копирования, но не его настройку.</span></code> <br/><code><span class="c1">#backup.sessionsEnabled: false</span></code> <br/><code><span class="c1"># Выключение запуска сеансов резервного копирования по расписанию.</span></code> <br/><code><span class="c1">#backup.schedulesEnabled: false</span></code> <br/><code><span class="c1"># Максимальное количество сеансов резервного копирования.</span></code> <br/><code><span class="c1">#backup.maxSessions: 5</span></code> <br/><code></code> <br/><code><span class="c1">##### Конфигурация резервного копирования по умолчанию #####</span></code> <br/><code><span class="c1"># &lt;backupName&gt; — имя конфигурации резервного копирования, без пробелов</span></code> <br/><code><span class="c1"># Имя файлов резервных копий.</span></code> <br/><code><span class="c1"># К нему будут добавляться метка времени и расширение cdbbz, например:</span></code> <br/><code><span class="c1"># Backup.202202161625.cdbbz</span></code> <br/><code><span class="c1">#backup.default.&lt;backupName&gt;.name: Backup</span></code> <br/><code><span class="c1"># Тип хранилища (LocalDisk | S3).</span></code> <br/><code><span class="c1">#backup.default.&lt;backupName&gt;.repository.type: LocalDisk</span></code> <br/><code><span class="c1"># Путь к файлам резервных копий.</span></code> <br/><code><span class="c1">#backup.default.&lt;backupName&gt;.repository.localDisk.path: /var/backups/&lt;iname&gt;</span></code> <br/><code><span class="c1"># Имя корзины S3 для хранения файлов резервных копий.</span></code> <br/><code><span class="c1">#backup.default.&lt;backupName&gt;.repository.s3.bucket:</span></code> <br/><code><span class="c1"># Имя подключения к S3.</span></code> <br/><code><span class="c1">#backup.default.&lt;backupName&gt;.repository.s3.connection: &lt;s3ConnectionName&gt;</span></code> <br/><code><span class="c1"># Описание конфигурации</span></code> <br/><code><span class="c1">#backup.default.&lt;backupName&gt;.description:</span></code> <br/><code><span class="c1"># Периодичность запуска резервного копирования.</span></code> <br/><code><span class="c1">#backup.default.&lt;backupName&gt;.period: 23:00</span></code> <br/><code><span class="c1"># Дни запуска резервного копирования.</span></code> <br/><code><span class="c1">#backup.default.&lt;backupName&gt;.days: [Sunday,  Monday, Tuesday, Wednesday, Thursday, Friday, Saturday]</span></code> <br/><code><span class="c1"># Время начала запуска резервного копирования.</span></code> <br/><code><span class="c1">#backup.default.&lt;backupName&gt;.timeFrom: 00:01</span></code> <br/><code><span class="c1"># Время окончания запуска резервного копирования.</span></code> <br/><code><span class="c1">#backup.default.&lt;backupName&gt;.timeUpTo: 23:59</span></code> <br/><code><span class="c1"># Количество резервных копий одновременно хранящихся в системе.</span></code> <br/><code><span class="c1"># Старые будут удалены автоматически.</span></code> <br/><code><span class="c1">#backup.default.&lt;backupName&gt;.keepRecent: 10</span></code> <br/><code><span class="c1"># Управление составом резервной копии — загруженные файлы</span></code> <br/><code><span class="c1">#backup.default.&lt;backupName&gt;.withStreams: true</span></code> <br/><code><span class="c1"># Управление составом резервной копии —  файлы скриптов.</span></code> <br/><code><span class="c1">#backup.default.&lt;backupName&gt;.withScripts: true</span></code> <br/><code><span class="c1"># Управление составом резервной копии — файлы истории (OpenSearch (Elasticsearch)).</span></code> <br/><code><span class="c1">#backup.default.&lt;backupName&gt;.withJournal: true</span></code> <br/><code></code> <br/><code></code> <br/><code><span class="c1">##### Настройка дополнительного хранилища для конфигурации резервного копирования по умолчанию #####</span></code> <br/><code><span class="c1"># Тип хранилища (LocalDisk | S3).</span></code> <br/><code><span class="c1">#backup.default.&lt;backupName&gt;.extraRepository.type: LocalDisk</span></code> <br/><code><span class="c1"># Путь к файлам резервных копий.</span></code> <br/><code><span class="c1">#backup.default.&lt;backupName&gt;.extraRepository.localDisk.path: /var/backups/&lt;instanceName&gt;ExtraRepository</span></code> <br/><code><span class="c1"># Имя корзины S3 для хранения файлов резервных копий.</span></code> <br/><code><span class="c1">#backup.default.&lt;backupName&gt;.extraRepository.s3.bucket:</span></code> <br/><code><span class="c1"># Имя подключения к S3.</span></code> <br/><code><span class="c1">#backup.default.&lt;backupName&gt;.extraRepository.s3.connection: &lt;s3ConnectionName&gt;</span></code> <br/><code></code> <br/><code><span class="c1">##### Настройка резервного копирования данных службы журналирования (OpenSearch (Elasticsearch)) #####</span></code> <br/><code><span class="c1"># Тип хранилища (LocalDisk | S3).</span></code> <br/><code><span class="c1">#backup.journalRepository.type: LocalDisk</span></code> <br/><code><span class="c1"># Путь к файлам резервных копий</span></code> <br/><code><span class="c1">#backup.journalRepository.localDisk.path: /var/backups/&lt;instanceName&gt;</span></code> <br/><code><span class="c1"># Имя корзины S3 для хранения файлов резервных копий.</span></code> <br/><code><span class="c1">#backup.journalRepository.s3.bucket:</span></code> <br/><code><span class="c1"># Имя подключения, настроенного в конфигурации службы журналирования.</span></code> <br/><code><span class="c1">#backup.journalRepository.s3.journalConnection: &lt;s3ConnectionName&gt;</span></code> <br/><code><span class="c1"># Имя подключения к S3, настроенного в этом файле конфигурации экземпляра Comindware Platform.</span></code> <br/><code><span class="c1">#backup.journalRepository.s3.platformConnection: &lt;s3ConnectionName&gt;</span></code> <br/><code></code> <br/><code><span class="c1">##### Конфигурация подключения к хранилищу S3 #####</span></code> <br/><code><span class="c1"># Описание конфигурации.</span></code> <br/><code><span class="c1">#s3.&lt;s3ConnectionName&gt;.description:</span></code> <br/><code><span class="c1"># Адрес подключения к S3.</span></code> <br/><code><span class="c1">#s3.&lt;s3ConnectionName&gt;.endpointURL:</span></code> <br/><code><span class="c1"># Информация учётной записи. Ключ подключения к хранилищу S3</span></code> <br/><code><span class="c1">#s3.&lt;s3ConnectionName&gt;.accessKey:</span></code> <br/><code><span class="c1"># Информация учётной записи. Секретный ключ подключения к хранилищу S3.</span></code> <br/><code><span class="c1">#s3.&lt;s3ConnectionName&gt;.secretKey:</span></code> <br/><code><span class="c1"># Установите значение true, если сервер принимает только запросы path-style вида:</span></code> <br/><code><span class="c1"># https://&lt;s3hostname&gt;/bucket-name/key-name</span></code> <br/><code><span class="c1">#s3.&lt;s3ConnectionName&gt;.pathStyleAccess: true</span></code> <br/><code></code> <br/><code><span class="c1">##### Настройка полнотекстового поиска #####</span></code> <br/><code><span class="c1"># Выключение функции полнотекстового поиска.</span></code> <br/><code><span class="c1">#search.enabled: false</span></code> <br/><code><span class="c1"># Выключение обновления индексов полнотекстового поиска.</span></code> <br/><code><span class="c1">#search.rebuildingEnabled: false</span></code> <br/><code><span class="c1"># Выключение индексирования для полнотекстового поиска.</span></code> <br/><code><span class="c1">#search.indexingEnabled: false</span></code> <br/><code></code> <br/><code><span class="c1">##### Настройка сенсоров мониторинга #####</span></code> <br/><code><span class="c1"># Выключение функции сенсоров мониторинга.</span></code> <br/><code><span class="c1">#sensors.enabled: false</span></code> <br/><code></code> <br/><code><span class="c1">##### Настройка синхронизации аккаунтов с LDAP-сервисом #####</span></code> <br/><code><span class="c1"># Выключение функции синхронизации.</span></code> <br/><code><span class="c1">#sync.ldap.enabled: true</span></code> <br/><code><span class="c1"># Выключение запуска сеансов синхронизации.</span></code> <br/><code><span class="c1"># Выключает выполнение сеансов, но не их настройку.</span></code> <br/><code><span class="c1">#sync.ldap.sessionsEnabled: true</span></code> <br/><code><span class="c1"># Выключение запуска сеансов синхронизации по расписанию.</span></code> <br/><code><span class="c1">#sync.ldap.schedulesEnabled: true</span></code> <br/><code></code> <br/><code></code> <br/><code><span class="c1">##### Настройка синхронизации данных с OData-сервисом #####</span></code> <br/><code><span class="c1"># Выключение интеграции по OData.</span></code> <br/><code><span class="c1">#sync.oData.enabled: false</span></code> <br/><code><span class="c1"># Выключение запуска сеансов синхронизации данных по OData.</span></code> <br/><code><span class="c1"># Выключает выполнение сеансов, но не их настройку.</span></code> <br/><code><span class="c1">#sync.oData.sessionsEnabled: false</span></code> <br/><code><span class="c1"># Выключение запуска сеансов синхронизации данных по OData по расписанию.</span></code> <br/><code><span class="c1">#sync.oData.schedulesEnabled: false</span></code> <br/><code><span class="c1"># Интервал экспорта данных по OData (минуты).</span></code> <br/><code><span class="c1">#sync.oData.exportTimeInterval: 60</span></code> <br/><code></code> <br/><code><span class="c1">##### Настройки трассировки производительности #####</span></code> <br/><code><span class="c1"># Выключение функции трассировки производительности.</span></code> <br/><code><span class="c1">#tracing.enabled: false</span></code> <br/><code></code> <br/><code><span class="c1">##### Настройки электронной почты #####</span></code> <br/><code><span class="c1"># Выключение функции проверки наличия и получения новых писем.</span></code> <br/><code><span class="c1">#email.listenerEnabled: false</span></code> <br/><code><span class="c1"># Выключение функции отправки эл. почты</span></code> <br/><code><span class="c1">#email.senderEnabled: false</span></code> <br/><code></code> <br/><code><span class="c1">##### Настройки уведомлений #####</span></code> <br/><code><span class="c1"># Выключение функции отправки уведомлений.</span></code> <br/><code><span class="c1">#notifications.enabled: false</span></code> <br/><code><span class="c1"># Выключение отправки уведомлений по пользовательским задачам.</span></code> <br/><code><span class="c1">#notifications.onUserTaskEnabled: false</span></code> <br/><code><span class="c1"># Выключение отправки уведомлений об обсуждениях.</span></code> <br/><code><span class="c1">#notifications.pushEnabled: false</span></code> <br/><code><span class="c1"># Выключение отправки уведомлений на страницах обслуживания.</span></code> <br/><code><span class="c1">#notifications.onMaintenanceEnabled: false</span></code> <br/><code></code> <br/><code><span class="c1">##### Настройка бизнес-процессов #####</span></code> <br/><code><span class="c1"># Выключение функции бизнес-процессов</span></code> <br/><code><span class="c1">#bpms.enabled: false</span></code> <br/><code><span class="c1"># Количество потоков выполнения бизнес-процессов</span></code> <br/><code><span class="c1">#bpms.threadsCount: 4</span></code> <br/><code><span class="c1"># Выключение процессных таймеров</span></code> <br/><code><span class="c1">#bpms.timersEnabled: false</span></code> <br/><code></code> <br/><code><span class="c1">##### Настройка использования Docker #####</span></code> <br/><code><span class="c1"># Включение использования в среде Docker</span></code> <br/><code><span class="c1">#isContainerEnvironment: true</span></code> <br/><code></code> <br/><code><span class="c1">##### Настройка обработчика сервис-запросов #####</span></code> <br/><code><span class="c1"># Включение функции обработчика сервис-запросов</span></code> <br/><code><span class="c1">#requestProcessor.enabled: true</span></code> <br/><code><span class="c1"># Список обработчиков сервис-запросов. </span></code> <br/><code><span class="c1"># Если не указан, включает все доступные на узле  запросы</span></code> <br/><code><span class="c1"># (conversation, useractivity, notification, architect)</span></code> <br/><code><span class="c1">#requestProcessor.services:</span></code> <br/><code><span class="c1">#  - apiPrefix: conversation</span></code> <br/><code><span class="c1">#  - enabled: true</span></code> <br/><code></code> <br/><code><span class="c1">##### Настройка отображения количества строк таблицы на одной странице #####</span></code> <br/><code><span class="c1"># Задайте варианты, которые будут отображаться</span></code> <br/><code><span class="c1"># в меню выбора количества строк таблицы.</span></code> <br/><code><span class="c1">#queryPageResultRange: [ 50, 500, 5000, 1000000000 ]</span></code> <br/></pre></code></div>
<h2 class="pageBreakBefore" id="конфигурация-службы-apigateway">Конфигурация службы apigateway</h2>
<ol class="colored_numbers_list">
<li>
<p>Откройте файл конфигурации <code>apigateway.yml</code> экземпляра ПО для редактирования:</p>
<div class="highlight"><code><pre><span></span><code>nano<span class="w"> </span>/var/www/&lt;instanceName&gt;/apigateway.yml</code> <br/></pre></code></div>
</li>
<li>
<p>Измените необходимые параметры.</p>
</li>
<li>Удостоверьтесь, что значение параметра <code>cluster.name</code> (имя экземпляра ПО) совпадает с <code>clusterName</code> и значение параметров <code>mq.server</code> (адрес и порт сервера очереди сообщений), <code>mq.group</code> (идентификатор группы очереди сообщений), <code>mq.node</code> (идентификатор узла очереди сообщений) — с аналогичными параметрами в <a class="mkdocs_imported_link" href="#configuration_files_linux_instance">файле конфигурации экземпляра</a>.</li>
<li>Сохраните файл конфигурации.</li>
<li>
<p>Перезапустите службу <code>apigateway</code>:</p>
<div class="highlight"><code><pre><span></span><code>systemctl<span class="w"> </span>restart<span class="w"> </span>apigateway&lt;instanceName&gt;</code> <br/></pre></code></div>
</li>
</ol>
<h3 class="pageBreakBefore" id="пример-конфигурации-службы-apigatewayyml">Пример конфигурации службы apigateway.yml</h3>
<div class="highlight"><code><pre><span></span><code><span class="c1"># Имя экземпляра ПО</span></code> <br/><code><span class="nt">cluster.name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;instanceName&gt;</span></code> <br/><code><span class="c1"># Имя узла экземпляра</span></code> <br/><code><span class="c1"># nodeName:</span></code> <br/><code><span class="c1"># Включение/выключение конфигурации журналирования экземпляра (true | false)</span></code> <br/><code><span class="nt">log.enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span></code> <br/><code><span class="c1"># Путь к файлу конфигурации журналирования экземпляра</span></code> <br/><code><span class="nt">log.configurationFile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/www/&lt;instanceName&gt;/logs.config</span></code> <br/><code><span class="nt">kata.enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span></code> <br/><code><span class="c1"># Адрес сервера очереди сообщений Apache Kafka с портом.</span></code> <br/><code><span class="nt">mq.server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;kafkaBrokerIp&gt;:&lt;kafkaBrokerPort&gt;</span></code> <br/><code><span class="c1"># Идентификатор группы очереди сообщений</span></code> <br/><code><span class="nt">mq.group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;instanceName&gt;</span></code> <br/><code><span class="c1"># Идентификатор узла очереди сообщений</span></code> <br/><code><span class="nt">mq.node</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;instanceName&gt;</span></code> <br/><code><span class="c1"># Тип механизма SASL. (None | Plain | ScramSha256 | ScramSha512)</span></code> <br/><code><span class="nt">mq.sasl.mechanism</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span></code> <br/><code><span class="c1"># Протокол безопасности очереди сообщений. (Plaintext | Ssl | SaslPlaintext | SaslSsl)</span></code> <br/><code><span class="nt">mq.securityProtocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Plaintext</span></code> <br/><code><span class="c1"># Путь к сокету apigateway</span></code> <br/><code><span class="nt">listen.socketPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/www/&lt;instanceName&gt;/App_Data/apigateway.socket</span></code> <br/><code><span class="c1"># Включение/выключение файлового хранилища  (true | false)</span></code> <br/><code><span class="nt">fileStorage.enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span></code> <br/><code><span class="c1"># Тип файлового хранилища (Platform — встроенное | Custom — особая DLL-библиотека )</span></code> <br/><code><span class="nt">fileStorage.type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Platform</span></code> <br/><code><span class="c1"># IP-адрес сервера для загрузки файлов</span></code> <br/><code><span class="nt">fileStorage.attachmentServerUri</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://local.host.ip.address/</span></code> <br/><code><span class="c1"># Путь к загружаемым файлам</span></code> <br/><code><span class="nt">fileStorage.uploadAttachment.path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api/Attachment/Upload</span></code> <br/><code><span class="c1"># Путь к скачанным файлам</span></code> <br/><code><span class="nt">fileStorage.downloadAttachment.path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api/Attachment/GetReferenceContent/{0}</span></code> <br/><code><span class="c1"># Путь к удалённым файлам</span></code> <br/><code><span class="nt">fileStorage.removeAttachment.path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api/Attachment/Remove/{0}</span></code> <br/><code><span class="c1"># Префиксы служб API</span></code> <br/><code><span class="nt">services</span><span class="p">:</span></code> <br/><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiPrefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conversation</span></code> <br/><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiPrefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">useractivity</span></code> <br/><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiPrefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">notification</span></code> <br/><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiPrefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">architect</span></code> <br/></pre></code></div>
<h2 class="pageBreakBefore" id="конфигурация-службы-adapterhost">Конфигурация службы adapterhost</h2>
<ol class="colored_numbers_list">
<li>
<p>Откройте файл конфигурации <code>adapterhost.yml</code> экземпляра ПО для редактирования:</p>
<div class="highlight"><code><pre><span></span><code>nano<span class="w"> </span>/var/www/&lt;instanceName&gt;/adapterhost.yml</code> <br/></pre></code></div>
</li>
<li>
<p>Измените необходимые параметры.</p>
</li>
<li>Удостоверьтесь, что значения параметров <code>mq.server</code> (адрес и порт сервера очереди сообщений), <code>mq.group</code> (идентификатор группы очереди сообщений), <code>mq.node</code> (идентификатор узла очереди сообщений) и <code>clusterName</code> (имя экземпляра ПО) совпадают с аналогичными параметрами в <a class="mkdocs_imported_link" href="#пример-yml-файла-конфигурации-экземпляра-по">файле конфигурации экземпляра ПО</a>.</li>
<li>Сохраните файл конфигурации.</li>
<li>
<p>После внесения изменений перезапустите службу <code>adapterhost</code>:</p>
<div class="highlight"><code><pre><span></span><code>systemctl<span class="w"> </span>restart<span class="w"> </span>adapterhost&lt;instanceName&gt;</code> <br/></pre></code></div>
</li>
</ol>
<h3 id="пример-файла-конфигурации-adapterhostyml">Пример файла конфигурации adapterhost.yml</h3>
<div class="highlight"><code><pre><span></span><code><span class="c1"># Имя экземпляра ПО</span></code> <br/><code><span class="nt">clusterName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;instanceName&gt;</span></code> <br/><code><span class="c1"># Имя папки загрузчика экземпляра ПО</span></code> <br/><code><span class="nt">loaderFolder</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;instanceName&gt;</span></code> <br/><code><span class="c1"># Язык сервера (en-US | ru-RU )</span></code> <br/><code><span class="nt">serverLanguage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ru-RU</span></code> <br/><code><span class="c1"># Адрес и порт сервера очереди сообщений Apache Kafka</span></code> <br/><code><span class="nt">mq.server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;kafkaBrokerIp&gt;:&lt;kafkaBrokerPort&gt;</span></code> <br/><code><span class="c1"># Протокол безопасности очереди сообщений. (Plaintext | Ssl | SaslPlaintext | SaslSsl)</span></code> <br/><code><span class="nt">mq.securityProtocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Plaintext</span></code> <br/><code><span class="c1"># Тип механизма SASL (None | Plain | ScramSha256 | ScramSha512)</span></code> <br/><code><span class="nt">mq.sasl.mechanism</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span></code> <br/><code><span class="c1"># Путь к файлам журналирования экземпляра ПО</span></code> <br/><code><span class="nt">log.folder</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/comindware/&lt;instanceName&gt;/Logs/</span></code> <br/><code><span class="c1"># Максимальное кол-во файлов журналов</span></code> <br/><code><span class="nt">log.maxArchiveFiles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span></code> <br/><code><span class="c1"># Максимальный размер файлов журналов (байты)</span></code> <br/><code><span class="nt">log.archiveAboveSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1048576000</span></code> <br/><code><span class="c1"># Путь к архивам журналов</span></code> <br/><code><span class="nt">log.archiveFolder</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/comindware/&lt;instanceName&gt;/Logs/Archive/</span></code> <br/></pre></code></div>
<h2 class="pageBreakBefore" id="конфигурация-apache-ignite">Конфигурация Apache Ignite</h2>
<ol class="colored_numbers_list">
<li>
<p>Откройте файл конфигурации Apache Ignite для редактирования:</p>
<div class="highlight"><code><pre><span></span><code>nano<span class="w"> </span>/var/www/&lt;instanceName&gt;/Ignite.config</code> <br/></pre></code></div>
</li>
<li>
<p>В блоке <code>&lt;bean class="org.apache.ignite.configuration.DataRegionConfiguration"&gt;</code> задайте максимальный объём выделяемой памяти:</p>
<ul>
<li>
<p>3 ГБ:</p>
<div class="highlight"><code><pre><span></span><code><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"maxSize"</span><span class="w"> </span><span class="na">value=</span><span class="s">"#{3L * 1024 * 1024 * 1024}"</span><span class="w"> </span><span class="nt">/&gt;</span></code> <br/></pre></code></div>
</li>
<li>
<p>8 ГБ:</p>
<div class="highlight"><code><pre><span></span><code><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"maxSize"</span><span class="w"> </span><span class="na">value=</span><span class="s">"#{8L * 1024 * 1024 * 1024}"</span><span class="w"> </span><span class="nt">/&gt;</span></code> <br/></pre></code></div>
</li>
</ul>
</li>
<li>
<p>В случае изменения максимального объёма выделяемой памяти отредактируйте параметр <code>checkpointPageBufferSize</code>. Чтобы рассчитать размер значения, разделите размер <code>maxSize</code> на четыре, при этом значение должно быть в диапазоне 256 МБ — 2 ГБ.</p>
<ul>
<li>
<p>8 ГБ:</p>
<div class="highlight"><code><pre><span></span><code><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"checkpointPageBufferSize"</span><span class="w"> </span><span class="na">value=</span><span class="s">"#{2L * 1024 * 1024 * 1024}"</span><span class="w"> </span><span class="nt">/&gt;</span></code> <br/></pre></code></div>
</li>
</ul>
</li>
<li>
<p>Перезапустите службу экземпляра ПО:</p>
<div class="highlight"><code><pre><span></span><code>systemctl<span class="w"> </span>restart<span class="w"> </span>comindware&lt;instanceName&gt;</code> <br/></pre></code></div>
</li>
</ol>
<h2 class="pageBreakBefore" id="конфигурация-кучи-java">Конфигурация кучи Java</h2>
<p>В зависимости от объёма оперативной памяти на сервере следует отредактировать конфигурацию области памяти для кучи Java.</p>
<ol class="colored_numbers_list">
<li>
<p>Откройте файл конфигурации среды экземпляра ПО для редактирования:</p>
<div class="highlight"><code><pre><span></span><code>nano<span class="w"> </span>/etc/sysconfig/comindware&lt;instanceName&gt;-env</code> <br/></pre></code></div>
</li>
<li>
<p>Задайте объём памяти, который выделяется для кучи Java:</p>
<div class="highlight"><code><pre><span></span><code><span class="na">JVM_OPTS</span><span class="o">=</span><span class="s">-Xms512m -Xmx16g -XX:MaxDirectMemorySize=1g ...</span></code> <br/></pre></code></div>
<p>Здесь:</p>
<ul>
<li><code>-Xms</code> — начальный размер кучи;</li>
<li><code>-Xmx</code> — максимальный размер кучи.</li>
</ul>
</li>
<li>
<p>Сохраните файл конфигурации.</p>
</li>
<li>
<p>Перезапустите службу экземпляра ПО:</p>
<div class="highlight"><code><pre><span></span><code>systemctl<span class="w"> </span>daemon-reload</code> <br/><code>systemctl<span class="w"> </span>restart<span class="w"> </span>comindware&lt;instanceName&gt;</code> <br/></pre></code></div>
</li>
</ol>
<h2 class="pageBreakBefore" id="конфигурация-nginx">Конфигурация NGINX</h2>
<ol class="colored_numbers_list">
<li>
<p>Откройте файл конфигурации NGINX для редактирования:</p>
<ul>
<li>
<p><strong>Astra Linux</strong>, <strong>Ubuntu</strong>, <strong>Debian</strong> (DEB-based)</p>
<div class="highlight"><code><pre><span></span><code>nano<span class="w"> </span>/etc/nginx/sites-available/comindware&lt;instanceName&gt;</code> <br/></pre></code></div>
</li>
<li>
<p><strong>РЕД ОС</strong>, <strong>Rocky</strong> (RPM-based)</p>
<div class="highlight"><code><pre><span></span><code>nano<span class="w"> </span>/etc/nginx/conf.d/comindware&lt;instanceName&gt;</code> <br/></pre></code></div>
</li>
<li>
<p><strong>Альт Сервер</strong></p>
<div class="highlight"><code><pre><span></span><code>nano<span class="w"> </span>/etc/nginx/sites-available.d/comindware&lt;instanceName&gt;</code> <br/></pre></code></div>
</li>
</ul>
</li>
<li>
<p>В директиве <code>server</code> задайте номер порта и адрес сервера, по которым будет доступен экземпляр ПО:</p>
<div class="highlight"><code><pre><span></span><code>server<span class="w"> </span><span class="o">{</span></code> <br/><code><span class="w">    </span><span class="c1"># Адрес сервера для доступа к экземпляру ПО.</span></code> <br/><code><span class="w">    </span>server_name<span class="w"> </span>&lt;hostName&gt;</code> <br/><code><span class="w">    </span><span class="c1"># Номер порта для доступа к экземпляру ПО.</span></code> <br/><code><span class="w">    </span>listen<span class="w"> </span>&lt;portNumber&gt;</code> <br/><code><span class="o">}</span></code> <br/></pre></code></div>
</li>
<li>
<p>Для записи событий в отдельные журналы укажите их:</p>
<div class="highlight"><code><pre><span></span><code><span class="w">    </span>error_log<span class="w"> </span>/var/log/nginx/&lt;instanceName&gt;-error.log<span class="p">;</span></code> <br/><code><span class="w">    </span>access_log<span class="w"> </span>/var/log/nginx/&lt;instanceName&gt;-access.log<span class="p">;</span></code> <br/></pre></code></div>
</li>
<li>
<p>Сохраните файл конфигурации.</p>
</li>
<li>
<p>Проверьте, что изменения работают корректно:</p>
<div class="highlight"><code><pre><span></span><code>nginx<span class="w"> </span>-t</code> <br/></pre></code></div>
</li>
<li>
<p>При успешном вступлении изменений в силу перезагрузите NGINX:</p>
<div class="highlight"><code><pre><span></span><code>nginx<span class="w"> </span>-s<span class="w"> </span>reload</code> <br/></pre></code></div>
</li>
</ol>
<div class="relatedTopics">
<h2 id="связанные-статьи">Связанные статьи</h2>
<ul>
<li><em><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4620">Пути и содержимое директорий экземпляра ПО</a></em></li>
<li><em><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4604">Настройка конфигурации вспомогательного ПО для оптимизации работы Comindware Platform</a></em></li>
</ul>
</div>
</article>
</div>
</div>
<a class="md-top md-icon mkdocs_imported_link" data-md-component="top" href="#">
<i class="fa-light fa-arrow-up">&zwnj;<!--icon--></i>
            К началу
          </a>
</main>
</div>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": true, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></div>
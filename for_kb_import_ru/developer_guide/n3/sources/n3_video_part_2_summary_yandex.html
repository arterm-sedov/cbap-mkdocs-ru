<div class="md-body" data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="comindware" dir="ltr" kb-id="" kb-tags="" kb-title="">
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<nav aria-label="Содержание" class="md-nav md-nav--secondary">
</nav>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<ul>
<li><strong>Цель примера:</strong> вывести неархивные записи, где текущий пользователь является создателем записи или руководителем создателя.</li>
<li><strong>Префиксы и URI:</strong> в начале задаются <code>@prefix</code> для сокращения длинных URI. Ключевые префиксы: <code>object:</code> (например, <code>object:findProperty</code>, <code>object:alias</code>), <code>user:</code>, <code>assert:</code> и др.</li>
<li><strong>Триплеты и переменные:</strong> всё выражается триплетами СПО. Переменные (<code>?item</code>, <code>?container</code>, <code>?user_current</code>) при неизвестности запускают поиск (энумерацию), при известности работают как фильтр.</li>
<li><strong>Поиск идентификатора свойства:</strong> <code>object:findProperty</code> получает на вход список из двух алиасов <code>(алиас_шаблона, алиас_атрибута)</code> и отдаёт уникальный ID свойства (<code>obs-*</code>). Это нужно из‑за неуниверсальности системных имён атрибутов между шаблонами.</li>
<li><strong>Нахождение шаблона и записей:</strong> <code>?container object:alias ?nit</code> — ищет контейнер (шаблон) по его алиасу. Далее <code>?item rdfs:member ?container</code> — находит все записи в шаблоне.</li>
<li><strong>Фильтрация «не архив»:</strong> отрицание <code>NOT { ?item v-s:is_disabled true }</code> исключает заархивированные записи.</li>
<li><strong>Текущий пользователь:</strong> <code>?user_current user:current ()</code> получает пользователя из контекста сессии.</li>
<li><strong>Логика <code>assert:union</code>:</strong> субъект — список формул; каждая формула — самостоятельная проверка. Условие истинно, если выполнена хотя бы одна формула. В примере: (1) <code>?item ?property_creator ?user_current</code> (пользователь — создатель); (2) через промежуточную переменную <code>?user</code> проверяется, что <code>?user_current</code> — <code>v-s:manager</code> создателя.</li>
<li><strong>Механика выполнения:</strong> каждый паттерн возвращает перечислитель (энумератор). Для эффективности наиболее селективные паттерны ставятся выше, чтобы уменьшить перебор. Формулы внутри <code>assert:union</code> независимы и вычисляются отдельно.</li>
<li><strong>Практические замечания:</strong></li>
<li>аккуратно относитесь к множественным значениям, избегая декартовых произведений;</li>
<li>переносите инвариантные вызовы (например, <code>user:current</code>) выше по выражению;</li>
<li>следите за читабельностью: корректное форматирование формул и списков упрощает чтение и сопровождение.</li>
</ul>
<p>Введение и домашнее задание
• Обсуждение домашнего задания по вычислимым свойствам.
• Упоминание о простом и сложном заданиях.
Объяснение префиксов
• Объяснение использования префиксов для сокращения записей.
• Пример использования префикса «обжиг» для доступа к свойствам из определённого пространства имён.
Структура предикатов
• Разбор структуры предикатов: сабъект, предикат, объект.
• Объяснение работы предиката «обжиг проперти».
Работа с атрибутами
• Поиск идентификатора атрибута в шаблоне записи.
• Передача параметров для функции, возвращающей идентификатор.
Оптимизация запросов
• Обсуждение оптимизации запросов и порядка их выполнения.
• Важность возврата наименьшего значения генератора.
Сбор контейнера
• Сбор контейнера с субъектами, удовлетворяющими определённому условию.
• Использование предиката «обжиг толяс» для поиска субъектов.
Контекст текущего объекта
• Обсуждение контекста текущего объекта при вычислении свойств.
• Различие между известным и неизвестным контекстом.
Входные и выходные данные
• Входные данные отсутствуют, только выходное — атом.
• При работе с вычисляемыми атрибутами всегда есть входное значение атом.
Поиск записей по шаблону
• Необходимо найти все записи в контейнере шаблона, которые не являются архивными.
• Сначала определяется контейнер шаблона, затем ищутся записи внутри него.
Фильтрация записей
• Проверяется, не содержится ли запись в архиве.
• Если запись не в архиве, она не отфильтровывается.
Использование текущего пользователя
• Вычисляется текущий пользователь для определения создателя записей.
• Цель — вывести активные записи, созданные текущим пользователем.
Работа с предикатами и union
• Предикаты используются для проверки условий.
• union объединяет результаты нескольких условий.
Анализ формул
• Каждая формула состоит из триплетов, которые проверяются на истинность.
• Проверяется, является ли текущий пользователь создателем записи.
Завершение анализа
• Вторая формула состоит из двух триплетов: «а этим известен» и «пройти креатор известен».
• Подчёркивается независимость каждой формулы друг от друга.</p>
</article>
</div>
</div>
<a class="md-top md-icon mkdocs_imported_link" data-md-component="top" href="#">
<i class="fa-light fa-arrow-up">&zwnj;<!--icon--></i>
            К началу
          </a>
</main>
</div>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": true, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></div>
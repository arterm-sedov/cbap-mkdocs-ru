<div class="md-body" data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="comindware" dir="ltr" kb-id="4712" kb-tags="" kb-title="Факторы, влияющие на производительность. Рекомендации по оптимизации">
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<nav aria-label="Содержание" class="md-nav md-nav--secondary">
<div class="mce-toc">
<h2 class="toc-heading">
      Содержание
      </h2>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#введение">
<span class="md-ellipsis">
      Введение
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#оптимизация-времени-отклика">
<span class="md-ellipsis">
      Оптимизация времени отклика
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#оптимизация-интеграций-с-внешними-службами">
<span class="md-ellipsis">
      Оптимизация интеграций с внешними службами
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#оптимизация-выполнения-процессов-и-токенов">
<span class="md-ellipsis">
      Оптимизация выполнения процессов и токенов
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#оптимизация-публикации-процессов-и-токенов">
<span class="md-ellipsis">
      Оптимизация публикации процессов и токенов
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#мониторинг-и-диагностика">
<span class="md-ellipsis">
      Мониторинг и диагностика
    </span>
</a>
</li>
</ul>
</div>
</nav>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h4 id="введение">Введение</h4>
<p>Производительность Comindware Platform зависит от сложности настроенных приложений, объёма обрабатываемых данных и интеграций с внешними системами.</p>
<p>Приблизительно оценить снижение производительности в зависимости от наиболее важных факторов можно по следующей формуле</p>
<div class="highlight"><code><pre><span></span><code>Снижение производительности = {кол-во правил для форм} × {сложность правил для форм} × {правила контекстных ролей} × {кол-во элементов на формах и вложенных форм} × {объем данных}</code> <br/></pre></code></div>
<p>Ниже представлены типовые рекомендации по повышению производительности.</p>
<p>Примечание</p>
<ul>
<li>Представленные рекомендации являются общими и подходят не для всех случаев.</li>
<li>Всегда тщательно анализируйте свои системы, сетевое окружение, программное и техническое обеспечение, бизнес-процессы, сценарии, скрипты и алгоритмы, чтобы определить, какие методы оптимизации будут наиболее эффективными в вашем конкретном случае.</li>
<li>Эффективность предложенных мер зависит от конкретной конфигурации сервера и окружения, с которым он взаимодействует.</li>
</ul>
<h4 id="оптимизация-времени-отклика">Оптимизация времени отклика</h4>
<ol class="colored_numbers_list">
<li><strong>Вход в систему</strong>
   - Проверьте и сведите к минимуму сетевые задержки. Используйте инструменты мониторинга сети, например <code>traceroute</code> и <code>ping</code>.
   - Проверьте и повысьте скорость ответа сервера. Этого можно достичь путем оптимизации серверного оборудования, использования более производительных процессоров, увеличения пропускной способности сети и увеличения объема оперативной памяти.</li>
<li><strong>Открытие разделов навигации</strong>
   - Сократите количество пунктов и подразделов в разделах навигации.
   - Разделите большие разделы навигации на меньшие разделы и назначьте их тем ролям, которым они необходимы.
   - Назначьте ролям только разделы навигации, которые действительно необходимы пользователям этих ролей.</li>
<li><strong>Открытие таблицы</strong>
   - Сократите количество столбцов с вычисляемыми атрибутами.
   - Упростите выражения для вычисляемых атрибутов.
   - Упростите выражения для фильтра данных таблицы. Для повышения производительности можно переписать формулу в выражение на языке N3.</li>
<li><strong>Открытие формы</strong>
   - Сократите количество полей с вычисляемыми атрибутами.
   - Упростите выражения для вычисляемых атрибутов. Также можно переписать формулы в выражения на языке N3, который обеспечивает более высокую производительность.
   - Уменьшите сложность правил для формы.<ul>
<li>Сократите количество правил.</li>
<li>Задайте условия выполнения правил, чтобы вложенные в них действия не выполнялись без необходимости.</li>
<li>Упростите выражения в правилах. Для повышения производительности можно переписать формулы в выражения на языке N3.</li>
<li>Проверьте и упростите иерархию вложенных форм.</li>
</ul>
</li>
<li><strong>Сохранение формы</strong>
   - Уменьшите сложность правил для формы.<ul>
<li>Сократите количество правил.</li>
<li>Задайте условия выполнения правил, чтобы вложенные в них действия не выполнялись без необходимости.</li>
<li>Упростите выражения в правилах.</li>
<li>Оптимизируйте сценарии, выполняющиеся при сохранении формы.</li>
<li>Упростите алгоритмы работы сценариев.</li>
<li>Сократите количество действий.</li>
<li>Сократите количество условий и вложенных циклов.</li>
<li>Упростите выражения в сценариях. Также можно переписать формулы в выражения на языке N3, который обеспечивает более высокую производительность.</li>
<li>Сократите количество выражений.</li>
<li>Сократите количество фиктивных и реальных изменений в данных формы.</li>
<li>Оптимизируйте скрипты, выполняющиеся при сохранении формы.</li>
<li>Упростите алгоритмы работы скриптов.</li>
<li>Проверьте и оптимизируйте взаимодействие с API, например используйте более эффективные методы.</li>
</ul>
</li>
<li><strong>Контекстные правила ролей</strong>
   - Сравните производительность для аккаунта администратора и аккаунтами других пользователей для выявления проблем в конфигурации ролей.
   - Оптимизируйте фильтры аккаунтов и условия применения разрешений в конфигурациях ролей. Для повышения производительности можно переписать формулы в выражения на языке N3.</li>
</ol>
<h4 id="оптимизация-интеграций-с-внешними-службами">Оптимизация интеграций с внешними службами</h4>
<ol class="colored_numbers_list">
<li><strong>Прием сообщений</strong>
   - Оптимизируйте параметры подключений и путей передачи данных.
   - Оптимизируйте интервал опроса сервера входящих сообщений.</li>
<li><strong>Отправка сообщений</strong>
   - Оптимизируйте параметры подключений и путей передачи данных.
   - Оптимизируйте частоту отправки сообщений.</li>
<li><strong>Обработка сообщений сценарием</strong>
   - Упростите выражения в сценарии. Для повышения производительности можно переписать формулы в выражения на языке N3.
   - Сократите количество выражений.
   - Упростите алгоритм работы сценария.
   - Сократите количество действий.
   - Сократите количество условий и вложенных циклов.</li>
<li><strong>Обработка сообщений скриптом</strong>
   - Упростите алгоритмы работы скрипта.
   - Проверьте и оптимизируйте взаимодействие с API, например используйте более эффективные методы.</li>
<li><strong>Сохранение данных</strong>
   - Сократите количество фиктивных и реальных изменений в данных.</li>
<li><strong>Интеграция с сервером каталогов</strong>
   - Оптимизируйте подключения и запросы к серверу каталогов.</li>
<li><strong>Службы Kafka, Ignite и Elasticsearch</strong>
   - Оптимизируйте конфигурацию служб Apache Kafka, Apache Ignite и Elasticsearch:<ul>
<li>выделение памяти;</li>
<li>размер кучи Javaж.</li>
<li>Проверьте и настройте конфигурации репликации и шардирования данных для Elasticsearch.</li>
<li>Настройте параметры устойчивости и производительности Apache Ignite, такие как количество узлов и сетевые параметры.</li>
<li>Настройте параметры устойчивости и производительности Apache Kafka, такие как период хранения сообщений и сегментация журналов.</li>
<li>Регулярно дефрагментируйте базу данных Apache Ignite для ускорения доступа и освобождения места.</li>
</ul>
</li>
<li><strong>Антивирус</strong>
   - Проверьте, не снижается ли производительность из-за работы антивируса на сервере.
   - Рассмотрите возможность настройки исключений для служб Kafka, Ignite и Elasticsearch в антивирусном программном обеспечении.</li>
<li><strong>Ненужные внешние службы</strong>
   - Отключите ненужные внешние службы для повышения производительности.</li>
</ol>
<h4 id="оптимизация-выполнения-процессов-и-токенов">Оптимизация выполнения процессов и токенов</h4>
<ol class="colored_numbers_list">
<li><strong>Рекурсия в настройках</strong>
   - Избегайте рекурсивных настроек в процессах.</li>
<li><strong>Обработка сообщений сценарием</strong>
   - Упростите выражения в сценарии.
   - Сократите количество выражений.
   - Сократите количество действий.
   - Сократите количество условий и вложенных циклов.
   - Упростите алгоритм работы сценария.</li>
<li><strong>Сохранение данных</strong>
   - Сократите количество фиктивных и реальных изменений в данных.</li>
<li><strong>Оптимизация алгоритмов</strong>
   - Декомпозируйте и оптимизируйте процессы.<ul>
<li>Разделите сложные бизнес-процессы на более мелкие, управляемые части. Это поможет упростить управление процессами, быстрее вносить изменения и снизить вероятность ошибок.</li>
<li>Создайте подпроцессы для выполнения определенных задач или логических блоков. Вызывайте эти подпроцессы из основного процесса. Это поможет структурировать процессы, сделать их более понятными и упростит управление ими.</li>
<li>Используйте понятные и простые логические структуры, избегая избыточных условий и ветвлений.</li>
<li>Упростите логику алгоритмов, используемых в бизнес-процессах:</li>
<li>уменьшите количество операций;</li>
<li>оптимизируйте структуры данных.</li>
</ul>
</li>
</ol>
<h4 id="оптимизация-публикации-процессов-и-токенов">Оптимизация публикации процессов и токенов</h4>
<ol class="colored_numbers_list">
<li><strong>Количество версий процессов</strong>
   - Сократите количество версий диаграмм процессов, оставив только необходимые.</li>
</ol>
<h4 id="мониторинг-и-диагностика">Мониторинг и диагностика</h4>
<ol class="colored_numbers_list">
<li><strong>Мониторинг и трассировка</strong>
   - Используйте инструменты трассировки мониторинга работы <strong>Comindware Platform</strong>для выявления узких мест:<ul>
<li>страницу «<a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4669">Производительность</a>»;</li>
<li>страницу «<a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4673">Журналы событий</a>»;</li>
<li>страницу «<a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4666">Мониторинг</a>»;</li>
<li><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4623">файловые журналы</a>;</li>
<li>тайминги запросов браузера;</li>
<li>Используйте инструменты профилирования производительности вебсайта, например Webpagetest, профайлер JavaScript в Chrome;</li>
<li>Используйте инструменты мониторинга производительности сервера, например Zabbix, Prometheus, Grafana, VmStat (<code>sysstat</code>), <code>top</code>, <code>htop</code>, <code>perf</code> и <code>flamegraph.pl</code>, .</li>
<li>Используйте инструменты мониторинга:</li>
<li>Elasticsearch — Kibana.</li>
<li>Apache Kafka — AKHQ, Kowl, Kafdrop, UI for Apache Kafka, Lenses, CMAK, Confluent CC, Conduktor.</li>
<li>Apache Ignite — JMX и MBeans, системные представления в SQL, Yardstick Framework.</li>
<li>В журналах обращайте внимание на разницу во времени между началом и завершением событий, потенциально вызывающих снижение производительности.</li>
</ul>
</li>
<li><strong>Резервное копирование и индексация</strong>
   - Настройте регулярное резервное копирование.
   - Проверьте индексацию данных.</li>
<li><strong>Системные службы</strong>
   - Для отладки отключите системные службы, вызывающие подозрения.
   - В случае неудачной настройки:<ul>
<li>остановите соответствующие системные службы;</li>
<li>удалите неудачно настроенные сущности или исправьте настройку;</li>
<li>снова включите системные службы.</li>
</ul>
</li>
</ol>
</article>
</div>
</div>
<a class="md-top md-icon mkdocs_imported_link" data-md-component="top" href="#">
<i class="fa-light fa-arrow-up">&zwnj;<!--icon--></i>
            К началу
          </a>
</main>
</div>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": true, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></div>
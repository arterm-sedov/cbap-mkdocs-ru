<div class="md-body" data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="comindware" dir="ltr" kb-id="4894" kb-tags="" kb-title="Формирование текста письма по шаблону">
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<nav aria-label="Содержание" class="md-nav md-nav--secondary">
</nav>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<p>В ряде случаев может потребоваться необходимость формирования текста письма по определённому шаблону с возможностью автоматического добавления переменных в некоторых местах. Это может понадобиться, например, для настройки отправки уведомления пользователям о результатах выполнения работы или информировании клиентов об изменениях сроков.</p>
<p>Ниже описана последовательность действий для настройки текста уведомления сотрудника в рамках процесса оформления отпуска. Данную последовательность можно применять и для настройки вашего сценария, видоизменив определенные переменные.</p>
<p><strong>1.</strong> В текущем шаблоне записи (в данном примере — «Отпуска») создайте текстовый атрибут «Шаблон письма» (системное имя «template»), в котором будет содержаться текст шаблона с переменными, а также при необходимости с включенными в него дополнительными данными (графические изображения и т.д.).</p>
<p>Пример шаблона:</p>
<div class="highlight"><code><pre><span></span><code>Уважаемый [Сотрудник],</code> <br/><code>Просим вас явиться в кабинет директора по персоналу [Срок] для подписания документов на отпуск.</code> <br/><code>С уважением, специалист отдела кадров [ФИО специалиста]</code> <br/></pre></code></div>
<p>В этом примере текст в квадратных скобках является переменной, вместо него будут подставлены данные с формы при заполнении: ФИО сотрудника, дата подписания, ФИО сотрудника кадрового отдела.</p>
<p><strong>Примечание :</strong> Содержание шаблона может быть предварительно заполнено правилами для данных на форме или событием в процессе.</p>
<p><strong>2.</strong> В текущем шаблоне записи (в данном примере — «Отпуска») создайте текстовый атрибут «ФИО сотрудника» (системное имя «fiosotrudnika»).</p>
<p><strong>3.</strong> В текущем шаблоне записи (в данном примере — «Отпуска») создайте атрибут Дата / Время «Дата подписания» (системное имя «date»).</p>
<p><strong>4.</strong> В текущем шаблоне записи (в данном примере — «Отпуска») создайте текстовый атрибут «ФИО специалиста» (системное имя «managerfio»).</p>
<p><strong>5.</strong> В текущем шаблоне записи (в данном примере — «Отпуска») создайте текстовый атрибут «Текст письма», в котором будет содержаться итоговый текст для отправки. Сделайте этот атрибут вычисляемым и напишите выражение с помощью функции REPLACE:</p>
<div class="highlight"><code><pre><span></span><code>REPLACE(</code> <br/><code>REPLACE(</code> <br/><code></code> <br/><code>REPLACE($template,"[Срок]", $date)",</code> <br/><code></code> <br/><code>"[Сотрудник]", $fiosotrudnika),</code> <br/><code></code> <br/><code>[ФИО специалиста]", $managerfio)</code> <br/></pre></code></div>
<p>Полученный результат можно использовать для отправки на почту сотруднику в рамках процесса оформления отпуска.</p>
</article>
</div>
</div>
<a class="md-top md-icon mkdocs_imported_link" data-md-component="top" href="#">
<i class="fa-light fa-arrow-up">&zwnj;<!--icon--></i>
            К началу
          </a>
</main>
</div>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": true, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></div>
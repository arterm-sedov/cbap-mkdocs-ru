<div class="md-body" data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="comindware" dir="ltr" kb-id="4712" kb-tags="N3,BPMN,устранение неполадок,оптимизация,производительность,рекомендации,сценарии,формы,ошибки" kb-title="Факторы, влияющие на производительность. Рекомендации по оптимизации">
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<nav aria-label="Содержание" class="md-nav md-nav--secondary">
<div class="mce-toc">
<h2 class="toc-heading">
      Содержание
      </h2>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#performance_optimize_intro">
<span class="md-ellipsis">
      Введение
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#performance_optimize_response_time">
<span class="md-ellipsis">
      Оптимизация времени отклика
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#performance_optimize_external_services">
<span class="md-ellipsis">
      Оптимизация интеграций с внешними службами
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#performance_optimize_processes_tokens">
<span class="md-ellipsis">
      Оптимизация выполнения процессов и токенов
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#performance_optimize_publishing">
<span class="md-ellipsis">
      Оптимизация публикации процессов и токенов
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link mkdocs_imported_link" href="#performance_optimize_monitoring">
<span class="md-ellipsis">
      Мониторинг и диагностика
    </span>
</a>
</li>
</ul>
</div>
</nav>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h2 id="performance_optimize_intro">Введение</h2>
<p>Производительность <strong>Comindware Platform</strong> зависит от сложности настроенных приложений, объёма обрабатываемых данных и интеграций с внешними системами.</p>
<p>Приблизительно оценить снижение производительности в зависимости от наиболее важных факторов можно по следующей формуле</p>
<div class="highlight"><code><pre><span></span><code>Снижение производительности = {кол-во правил для форм} × {сложность правил для форм}</code> <br/><code>× {правила контекстных ролей} × {кол-во элементов на формах и вложенных форм}</code> <br/><code>× {объем данных}</code> <br/></pre></code></div>
<p>Ниже представлены типовые рекомендации по повышению производительности.</p>
<div class="notice notice-info">
<p class="admonition-title">Примечание</p>
<ul>
<li>Представленные рекомендации являются общими и подходят не для всех случаев.</li>
<li>Всегда тщательно анализируйте свои системы, сетевое окружение, программное и техническое обеспечение, бизнес-процессы, сценарии, скрипты и алгоритмы, чтобы определить, какие методы оптимизации будут наиболее эффективными в вашем конкретном случае.</li>
<li>Эффективность предложенных мер зависит от конкретной конфигурации сервера и окружения, с которым он взаимодействует.</li>
</ul>
</div>
<h2 id="performance_optimize_response_time">Оптимизация времени отклика</h2>
<ol class="colored_numbers_list">
<li>
<p><strong>Вход в систему</strong></p>
<ul>
<li>Проверьте и сведите к минимуму сетевые задержки. Используйте инструменты мониторинга сети, например <code>traceroute</code> и <code>ping</code>.</li>
<li>Проверьте и повысьте скорость ответа сервера. Этого можно достичь путем оптимизации серверного оборудования, использования более производительных процессоров, увеличения пропускной способности сети и увеличения объема оперативной памяти.</li>
</ul>
</li>
<li>
<p><strong>Открытие разделов навигации</strong></p>
<ul>
<li>Сократите количество пунктов и подразделов в разделах навигации.</li>
<li>Разделите большие разделы навигации на меньшие разделы и назначьте их тем ролям, которым они необходимы.</li>
<li>Назначьте ролям только разделы навигации, которые действительно необходимы пользователям этих ролей.</li>
</ul>
</li>
<li>
<p><strong>Открытие таблицы</strong></p>
<ul>
<li>Сократите количество столбцов с вычисляемыми атрибутами.</li>
<li>Упростите выражения для вычисляемых атрибутов.</li>
<li>Упростите выражения для фильтра данных таблицы. Для повышения производительности можно переписать формулу в выражение на языке N3.</li>
</ul>
</li>
<li>
<p><strong>Открытие формы</strong></p>
<ul>
<li>Сократите количество полей с вычисляемыми атрибутами.</li>
<li>Упростите выражения для вычисляемых атрибутов. Также можно переписать формулы в выражения на языке N3, который обеспечивает более высокую производительность.</li>
<li>Уменьшите сложность правил для формы:<ul>
<li>сократите количество правил;</li>
<li>задайте условия выполнения правил, чтобы вложенные в них действия не выполнялись без необходимости;</li>
<li>упростите выражения в правилах;</li>
<li>для повышения производительности можно переписать формулы в выражения на языке N3.</li>
</ul>
</li>
<li>Проверьте и упростите иерархию вложенных форм.</li>
</ul>
</li>
<li>
<p><strong>Сохранение формы</strong></p>
<ul>
<li>Уменьшите сложность правил для формы:<ul>
<li>сократите количество правил;</li>
<li>задайте условия выполнения правил, чтобы вложенные в них действия не выполнялись без необходимости;</li>
<li>упростите выражения в правилах.</li>
</ul>
</li>
<li>Оптимизируйте сценарии, выполняющиеся при сохранении формы:<ul>
<li>упростите алгоритмы работы сценариев;</li>
<li>сократите количество действий;</li>
<li>сократите количество условий и вложенных циклов;</li>
<li>упростите выражения в сценариях. Также можно переписать формулы в выражения на языке N3, который обеспечивает более высокую производительность;</li>
<li>сократите количество выражений.</li>
</ul>
</li>
<li>Сократите количество фиктивных и реальных изменений в данных формы.</li>
<li>Оптимизируйте скрипты, выполняющиеся при сохранении формы.<ul>
<li>упростите алгоритмы работы скриптов;</li>
<li>проверьте и оптимизируйте взаимодействие с API, например используйте более эффективные методы.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Контекстные правила ролей</strong></p>
<ul>
<li>Сравните производительность для аккаунта администратора и аккаунтами других пользователей для выявления проблем в конфигурации ролей.</li>
<li>Оптимизируйте фильтры аккаунтов и условия применения разрешений в конфигурациях ролей. Для повышения производительности можно переписать формулы в выражения на языке N3.</li>
</ul>
</li>
</ol>
<h2 id="performance_optimize_external_services">Оптимизация интеграций с внешними службами</h2>
<ol class="colored_numbers_list">
<li>
<p><strong>Прием сообщений</strong></p>
<ul>
<li>Оптимизируйте параметры подключений и путей передачи данных.</li>
<li>Оптимизируйте интервал опроса сервера входящих сообщений.</li>
</ul>
</li>
<li>
<p><strong>Отправка сообщений</strong></p>
<ul>
<li>Оптимизируйте параметры подключений и путей передачи данных.</li>
<li>Оптимизируйте частоту отправки сообщений.</li>
</ul>
</li>
<li>
<p><strong>Обработка сообщений сценарием</strong></p>
<ul>
<li>Упростите выражения в сценарии. Для повышения производительности можно переписать формулы в выражения на языке N3.</li>
<li>Сократите количество выражений.</li>
<li>Упростите алгоритм работы сценария.</li>
<li>Сократите количество действий.</li>
<li>Сократите количество условий и вложенных циклов.</li>
</ul>
</li>
<li>
<p><strong>Обработка сообщений скриптом</strong></p>
<ul>
<li>Упростите алгоритмы работы скрипта.</li>
<li>Проверьте и оптимизируйте взаимодействие с API, например используйте более эффективные методы.</li>
</ul>
</li>
<li>
<p><strong>Сохранение данных</strong></p>
<ul>
<li>Сократите количество фиктивных и реальных изменений в данных.</li>
</ul>
</li>
<li>
<p><strong>Интеграция с сервером каталогов</strong></p>
<ul>
<li>Оптимизируйте подключения и запросы к серверу каталогов.</li>
</ul>
</li>
<li>
<p><strong>Службы Apache Kafka, Apache Ignite и OpenSearch (Elasticsearch)</strong></p>
<ul>
<li>Оптимизируйте конфигурацию служб Apache Kafka, Apache Ignite и OpenSearch (Elasticsearch):<ul>
<li>выделение памяти;</li>
<li>размер кучи Java.</li>
</ul>
</li>
<li>Проверьте и настройте конфигурации репликации и шардирования данных для OpenSearch (Elasticsearch).</li>
<li>Настройте параметры устойчивости и производительности Apache Ignite, такие как количество узлов и сетевые параметры.</li>
<li>Настройте параметры устойчивости и производительности Apache Kafka, такие как период хранения сообщений и сегментация журналов.</li>
<li>Регулярно дефрагментируйте базу данных Apache Ignite для ускорения доступа и освобождения места.</li>
</ul>
</li>
<li>
<p><strong>Антивирус</strong></p>
<ul>
<li>Проверьте, не снижается ли производительность из-за работы антивируса на сервере.</li>
<li>Рассмотрите возможность настройки исключений для служб Apache Kafka, Apache Ignite и OpenSearch (Elasticsearch) в антивирусном программном обеспечении.</li>
</ul>
</li>
<li>
<p><strong>Ненужные внешние службы</strong></p>
<ul>
<li>Отключите ненужные внешние службы для повышения производительности.</li>
</ul>
</li>
</ol>
<h2 id="performance_optimize_processes_tokens">Оптимизация выполнения процессов и токенов</h2>
<ol class="colored_numbers_list">
<li>
<p><strong>Рекурсия в настройках</strong></p>
<ul>
<li>
<p>Избегайте рекурсивных настроек в процессах.
2. <strong>Обработка сообщений сценарием</strong></p>
</li>
<li>
<p>Упростите выражения в сценарии.</p>
</li>
<li>Сократите количество выражений.</li>
<li>Сократите количество действий.</li>
<li>Сократите количество условий и вложенных циклов.</li>
<li>Упростите алгоритм работы сценария.</li>
</ul>
</li>
<li>
<p><strong>Сохранение данных</strong></p>
<ul>
<li>Сократите количество фиктивных и реальных изменений в данных.</li>
</ul>
</li>
<li>
<p><strong>Оптимизация алгоритмов</strong></p>
<ul>
<li>Декомпозируйте и оптимизируйте процессы.</li>
<li>Разделите сложные бизнес-процессы на более мелкие, управляемые части. Это поможет упростить управление процессами, быстрее вносить изменения и снизить вероятность ошибок.</li>
<li>Создайте подпроцессы для выполнения определенных задач или логических блоков. Вызывайте эти подпроцессы из основного процесса. Это поможет структурировать процессы, сделать их более понятными и упростит управление ими.</li>
<li>Используйте понятные и простые логические структуры, избегая избыточных условий и ветвлений.</li>
<li>Упростите логику алгоритмов, используемых в бизнес-процессах:<ul>
<li>уменьшите количество операций;</li>
<li>оптимизируйте структуры данных.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="performance_optimize_publishing">Оптимизация публикации процессов и токенов</h2>
<ol class="colored_numbers_list">
<li>
<p><strong>Количество версий процессов</strong></p>
<ul>
<li>Сократите количество версий диаграмм процессов, оставив только необходимые.</li>
</ul>
</li>
</ol>
<h2 id="performance_optimize_monitoring">Мониторинг и диагностика</h2>
<ol class="colored_numbers_list">
<li>
<p><strong>Мониторинг и трассировка</strong></p>
<ul>
<li>Используйте инструменты трассировки мониторинга работы <strong>Comindware Platform</strong>для выявления узких мест:</li>
<li>страницу «<a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4669">Производительность</a>»;</li>
<li>страницу «<a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4673">Журналы событий</a>»;</li>
<li>страницу «<a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4666">Мониторинг</a>»;</li>
<li><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4623">файловые журналы</a>;</li>
<li>тайминги запросов браузера;</li>
<li>Используйте инструменты профилирования производительности вебсайта, например Webpagetest, профайлер JavaScript в Chrome;</li>
<li>Используйте инструменты мониторинга производительности сервера, например Zabbix, Prometheus, Grafana, VmStat (<code>sysstat</code>), <code>top</code>, <code>htop</code>, <code>perf</code> и <code>flamegraph.pl</code>, .</li>
<li>Используйте инструменты мониторинга:</li>
<li>OpenSearch (Elasticsearch) — Kibana.</li>
<li>Apache Apache Kafka — AKHQ, Kowl, Kafdrop, UI for Apache Kafka, Lenses, CMAK, Confluent CC, Conduktor.</li>
<li>Apache Ignite — JMX и MBeans, системные представления в SQL, Yardstick Framework.</li>
<li>В журналах обращайте внимание на разницу во времени между началом и завершением событий, потенциально вызывающих снижение производительности.</li>
</ul>
</li>
<li>
<p><strong>Резервное копирование и индексация</strong></p>
<ul>
<li>Настройте регулярное резервное копирование.</li>
<li>Проверьте индексацию данных.</li>
</ul>
</li>
<li>
<p><strong>Системные службы</strong></p>
<ul>
<li>Для отладки отключите системные службы, вызывающие подозрения.</li>
<li>В случае неудачной настройки:</li>
<li>остановите соответствующие системные службы;</li>
<li>удалите неудачно настроенные сущности или исправьте настройку;</li>
<li>снова включите системные службы.</li>
</ul>
</li>
</ol>
</article>
</div>
</div>
<a class="md-top md-icon mkdocs_imported_link" data-md-component="top" href="#">
<i class="fa-light fa-arrow-up">&zwnj;<!--icon--></i>
            К началу
          </a>
</main>
</div>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": true, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></div>